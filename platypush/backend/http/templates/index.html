<!doctype html>
<head>
    <title>Platypush Web Console</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/skeleton.css') }}">
    <!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/skeleton-tabs.css') }}"> -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/normalize.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='font-awesome/css/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/application.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/toggles.css') }}">

    <script type="text/javascript" src="{{ url_for('static', filename='js/vue.js') }}"></script>
    <!--<script type="text/javascript" src="{{ url_for('static', filename='js/vue.min.js') }}"></script>-->

    <!-- <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}"></script> -->
    <!-- <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-ui-1.12.1.min.js') }}"></script> -->
    <!-- <script type="text/javascript" src="{{ url_for('static', filename='js/skeleton-tabs.js') }}"></script> -->

    <script type="text/javascript" src="{{ url_for('static', filename='js/application.js') }}"></script>
    <!-- <script type="text/javascript" src="{{ url_for('static', filename='js/pushbullet.js') }}"></script> -->
    <script type="text/javascript">
        if (!window.config) {
            window.config = {};
        }

        window.config = { ...window.config,
            websocket_port: {% print(websocket_port) %},
            has_ssl: {% print('true' if has_ssl else 'false') %},
            plugins: JSON.parse('{% print(utils.to_json(plugins))|safe %}'),
        };

        {% if token %}
            window.config.token = '{% print(token) %}';
        {% else %}
            window.config.token = undefined;
        {% endif %}
    </script>
</head>

<body>
    <header>
        <div class="row">
            <div class="logo nine columns">
                <span class="logo-1">Platypush</span>
                <span class="logo-2">Web Panel</span>
            </div>

            <div id="date-time" class="three columns">
                <div class="date"></div>
                <div class="time"></div>
            </div>
        </div>
    </header>

    <nav>
        {% for plugin in plugins.keys()|sort() %}
        <a href="#{% print plugin %}">
            {% print plugin %}
        </a>
        {% endfor %}
    </nav>

    <main>
        <div id="app">
            {% for plugin in plugins.keys()|sort() %}
                {% with configuration=plugins[plugin], utils=utils %}
                    <div class="tab-pane plugin-tab-content" id="{% print plugin %}-container">
                        {% include 'panel/' + plugin + '/index.html' %}
                    </div>
                {% endwith %}
            {% endfor %}
        </div>
    </main>
</body>

