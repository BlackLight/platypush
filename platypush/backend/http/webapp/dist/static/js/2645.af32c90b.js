"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[2645],{1989:function(e,t,n){n.d(t,{Z:function(){return u}});var s=n(6252),o=n(3577);const i={key:0,class:"icon"};function a(e,t,n,a,l,c){const r=(0,s.up)("Icon");return(0,s.wg)(),(0,s.iD)("div",{class:(0,o.C_)(["tab",n.selected?"selected":""]),onClick:t[0]||(t[0]=t=>e.$emit("input"))},[n.iconClass?.length||n.iconUrl?.length?((0,s.wg)(),(0,s.iD)("span",i,[(0,s.Wm)(r,{class:(0,o.C_)(n.iconClass),url:n.iconUrl},null,8,["class","url"])])):(0,s.kq)("",!0),(0,s.Uk)(" Â  "),(0,s.WI)(e.$slots,"default",{},void 0,!0)],2)}var l=n(657),c={name:"Tab",components:{Icon:l.Z},emits:["input"],props:{selected:{type:Boolean,default:!1},iconClass:{type:String},iconUrl:{type:String}}},r=n(3744);const d=(0,r.Z)(c,[["render",a],["__scopeId","data-v-3f708306"]]);var u=d},3176:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(6252);const o={class:"tabs"};function i(e,t,n,i,a,l){return(0,s.wg)(),(0,s.iD)("div",o,[(0,s.WI)(e.$slots,"default",{},void 0,!0)])}var a={name:"Tabs"},l=n(3744);const c=(0,l.Z)(a,[["render",i],["__scopeId","data-v-f4300bb0"]]);var r=c},2645:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var s=n(6252),o=n(9963),i=n(3577);const a={class:"row plugin extensions-container"},l={class:"filter-container"},c=["disabled"],r={class:"items"},d={key:0,class:"extension"},u=["data-name","onClick","textContent"],p={key:0,class:"extension-body-container until tablet"},f={key:0,class:"extension-body-container from desktop"};function h(e,t,n,h,b,m){const x=(0,s.up)("Loading"),k=(0,s.up)("Extension");return(0,s.wg)(),(0,s.iD)("div",a,[b.loading?((0,s.wg)(),(0,s.j4)(x,{key:0})):(0,s.kq)("",!0),(0,s._)("header",null,[(0,s._)("div",l,[(0,s.wy)((0,s._)("input",{type:"text",ref:"filter",placeholder:"Extension name","onUpdate:modelValue":t[0]||(t[0]=e=>b.filter=e),disabled:b.loading},null,8,c),[[o.nr,b.filter]])])]),(0,s._)("main",null,[(0,s._)("div",r,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.extensionNames,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"extension-container",key:e},[m.matchesFilter(e)?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",{class:(0,i.C_)(["item name",{selected:e===b.selectedExtension}]),"data-name":e,onClick:t=>m.onInput(e,!1),textContent:(0,i.zw)(m.extensions[e].name)},null,10,u),b.selectedExtension&&e===b.selectedExtension?((0,s.wg)(),(0,s.iD)("div",p,[(0,s.Wm)(k,{extension:m.extensions[b.selectedExtension]},null,8,["extension"])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])))),128))]),b.selectedExtension?((0,s.wg)(),(0,s.iD)("div",f,[(0,s.Wm)(k,{extension:m.extensions[b.selectedExtension]},null,8,["extension"])])):(0,s.kq)("",!0)])])}var b=n(6791),m=n(6397);const x=e=>((0,s.dD)("data-v-d824bfd6"),e=e(),(0,s.Cn)(),e),k={class:"extension"},_=x((()=>(0,s._)("span",{class:"from tablet"},"Documentation",-1))),g=x((()=>(0,s._)("span",{class:"from tablet"},"Install",-1))),v=x((()=>(0,s._)("span",{class:"from tablet"},"Configuration",-1))),w=x((()=>(0,s._)("span",{class:"from tablet"},"Actions",-1))),y={class:"extension-body"};function D(e,t,n,o,i,a){const l=(0,s.up)("Tab"),c=(0,s.up)("Tabs"),r=(0,s.up)("Doc");return(0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("header",null,[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{selected:"doc"===i.selectedTab,"icon-class":"fas fa-book",onInput:t[0]||(t[0]=e=>i.selectedTab="doc")},{default:(0,s.w5)((()=>[_])),_:1},8,["selected"]),(0,s.Wm)(l,{selected:"install"===i.selectedTab,"icon-class":"fas fa-download",onInput:t[1]||(t[1]=e=>i.selectedTab="install")},{default:(0,s.w5)((()=>[g])),_:1},8,["selected"]),(0,s.Wm)(l,{selected:"conf"===i.selectedTab,"icon-class":"fas fa-square-check",onInput:t[2]||(t[2]=e=>i.selectedTab="conf")},{default:(0,s.w5)((()=>[v])),_:1},8,["selected"]),(0,s.Wm)(l,{selected:"actions"===i.selectedTab,"icon-class":"fas fa-play",onInput:t[3]||(t[3]=e=>i.selectedTab="actions")},{default:(0,s.w5)((()=>[w])),_:1},8,["selected"])])),_:1})]),(0,s._)("div",y,["doc"===i.selectedTab?((0,s.wg)(),(0,s.j4)(r,{key:0,extension:n.extension},null,8,["extension"])):(0,s.kq)("",!0)])])}var C=n(1989),E=n(3176);const T=e=>((0,s.dD)("data-v-715079bb"),e=e(),(0,s.Cn)(),e),I={class:"doc"},q=["href"],Z=T((()=>(0,s._)("i",{class:"icon fas fa-book"},null,-1))),$=["innerHTML"];function W(e,t,n,o,a,l){return(0,s.wg)(),(0,s.iD)("section",I,[(0,s._)("header",null,[(0,s._)("h2",null,[(0,s._)("a",{class:"title",href:n.extension.doc_url,target:"_blank"},[Z,(0,s.Uk)(" "+(0,i.zw)(n.extension.name),1)],8,q)])]),a.doc?((0,s.wg)(),(0,s.iD)("article",{key:0,innerHTML:a.doc,onClick:t[0]||(t[0]=(...e)=>l.onDocClick&&l.onDocClick(...e))},null,8,$)):(0,s.kq)("",!0)])}var j=n(5250),L={name:"Doc",mixins:[m.Z],props:{extension:{type:Object,required:!0}},data(){return{doc:null}},methods:{async parseDoc(){return this.extension.doc?.length?await this.request("utils.rst_to_html",{text:this.extension.doc}):null},refreshDoc(){this.parseDoc().then((e=>this.doc=e))},onDocClick(e){if("a"===!e.target.tagName.toLowerCase())return;e.preventDefault();const t=e.target.getAttribute("href");if(!t)return;const n=t.match(/^https:\/\/docs\.platypush\.tech\/platypush\/(plugins|backend)\/([\w.]+)\.html#?.*$/);if(!n)return e.preventDefault(),void window.open(t,"_blank");let[s,o,i]=n;"backend"===o&&(i=`backend.${i}`),j.$.emit("update:extension",i),e.preventDefault()}},mounted(){this.refreshDoc(),this.$watch("extension.doc",this.refreshDoc)}},U=n(3744);const O=(0,U.Z)(L,[["render",W],["__scopeId","data-v-715079bb"]]);var H=O,N={name:"Extension",components:{Doc:H,Tab:C.Z,Tabs:E.Z},props:{extension:{type:Object,required:!0}},data(){return{selectedTab:"doc"}}};const S=(0,U.Z)(N,[["render",D],["__scopeId","data-v-d824bfd6"]]);var z=S,A={name:"Extensions",mixins:[m.Z],components:{Extension:z,Loading:b.Z,Utils:m.Z},data(){return{loading:!1,plugins:{},backends:{},filter:"",selectedExtension:null}},computed:{extensions(){const e={};return Object.entries(this.plugins).forEach((([t,n])=>{e[t]={...n,name:t}})),Object.entries(this.backends).forEach((([t,n])=>{t=`backend.${t}`,e[t]={...n,name:t}})),e},extensionNames(){return Object.keys(this.extensions).sort()}},methods:{onInput(e,t=!0){t&&(this.filter=e);const n=e?.toLowerCase()?.trim();if(n?.length&&n!==this.selectedExtension&&this.extensions[n]){this.selectedExtension=n;const e=this.$el.querySelector(`.extensions-container .item[data-name="${n}"]`);e&&e.scrollIntoView({behavior:"smooth"})}else this.selectedExtension=null},matchesFilter(e){return!this.filter||e.includes(this.filter.toLowerCase())},async loadExtensions(){this.loading=!0;try{[this.plugins,this.backends]=await Promise.all([this.request("inspect.get_all_plugins"),this.request("inspect.get_all_backends")])}finally{this.loading=!1}}},mounted(){this.loadExtensions(),j.$.on("update:extension",(e=>this.onInput(e,!1))),this.$nextTick((()=>this.$refs.filter.focus()))}};const F=(0,U.Z)(A,[["render",h],["__scopeId","data-v-2e55fa3c"]]);var M=F}}]);
//# sourceMappingURL=2645.af32c90b.js.map