(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[7083],{4964:function(e,t,n){var i=n(5112),r=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},3929:function(e,t,n){var i=n(7850),r=TypeError;e.exports=function(e){if(i(e))throw r("The method doesn't accept regular expressions");return e}},6091:function(e,t,n){var i=n(6530).PROPER,r=n(7293),a=n(1361),o="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||o[e]()!==o||i&&a[e].name!==e}))}},7852:function(e,t,n){"use strict";var i=n(2109),r=n(1702),a=n(1236).f,o=n(7466),s=n(1340),l=n(3929),u=n(4488),c=n(4964),d=n(1913),f=r("".endsWith),p=r("".slice),m=Math.min,v=c("endsWith"),h=!d&&!v&&!!function(){var e=a(String.prototype,"endsWith");return e&&!e.writable}();i({target:"String",proto:!0,forced:!h&&!v},{endsWith:function(e){var t=s(u(this));l(e);var n=arguments.length>1?arguments[1]:void 0,i=t.length,r=void 0===n?i:m(o(n),i),a=s(e);return f?f(t,a,r):p(t,r-a.length,r)===a}})},6755:function(e,t,n){"use strict";var i=n(2109),r=n(1702),a=n(1236).f,o=n(7466),s=n(1340),l=n(3929),u=n(4488),c=n(4964),d=n(1913),f=r("".startsWith),p=r("".slice),m=Math.min,v=c("startsWith"),h=!d&&!v&&!!function(){var e=a(String.prototype,"startsWith");return e&&!e.writable}();i({target:"String",proto:!0,forced:!h&&!v},{startsWith:function(e){var t=s(u(this));l(e);var n=o(m(arguments.length>1?arguments[1]:void 0,t.length)),i=s(e);return f?f(t,i,n):p(t,n,n+i.length)===i}})},3210:function(e,t,n){"use strict";var i=n(2109),r=n(3111).trim,a=n(6091);i({target:"String",proto:!0,forced:a("trim")},{trim:function(){return r(this)}})},7083:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});n(8309);var i=n(6252),r=n(3577),a=n(9963),o={key:0,class:"children fade-in"};function s(e,t,n,s,l,u){var c,d,f,p=(0,i.up)("Entity",!0);return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["entity-container-wrapper",{"with-children":u.hasChildren,collapsed:u.isCollapsed,hidden:!(null!==(c=e.value)&&void 0!==c&&null!==(d=c.name)&&void 0!==d&&d.length)}])},[(0,i._)("div",{class:(0,r.C_)(["row item entity-container",{"with-children":u.hasChildren,collapsed:u.isCollapsed,blink:l.justUpdated}])},[(0,i._)("div",{class:(0,r.C_)(["adjuster",{"with-children":u.hasChildren}])},[((0,i.wg)(),(0,i.j4)((0,i.LL)(l.component),{value:e.value,parent:e.parent,children:e.children,loading:e.loading,ref:"instance",error:e.error||0==(null===(f=e.value)||void 0===f?void 0:f.reachable),onClick:u.onClick,onInput:t[0]||(t[0]=function(t){return e.$emit("input",t)}),onLoading:t[1]||(t[1]=function(t){return e.$emit("loading",t)})},null,8,["value","parent","children","loading","error","onClick"]))],2),u.hasChildren?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"col-1 collapse-toggler",onClick:t[2]||(t[2]=(0,a.iM)((function(){return u.toggleCollapsed&&u.toggleCollapsed.apply(u,arguments)}),["stop"]))},[(0,i._)("i",{class:(0,r.C_)(["fas",{"fa-chevron-down":u.isCollapsed,"fa-chevron-up":!u.isCollapsed}])},null,2)])):(0,i.kq)("",!0)],2),u.hasChildren&&!u.isCollapsed?((0,i.wg)(),(0,i.iD)("div",o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.children,(function(n){return(0,i.wg)(),(0,i.iD)("div",{class:"child",key:n.id},[(0,i.Wm)(p,{value:n,parent:e.value,children:u.childrenByParentId(n.id),loading:e.loading,level:e.level+1,onShowModal:t[3]||(t[3]=function(t){return e.$emit("show-modal",t)}),onInput:function(t){return e.$emit("input",n)}},null,8,["value","parent","children","loading","level","onInput"])])})),128))])):(0,i.kq)("",!0)],2)}var l=n(4648),u=(n(7941),n(1539),n(9600),n(1249),n(4916),n(3123),n(7042),n(8783),n(3948),n(2262)),c=n(7909),d=n(5250),f={name:"Entity",mixins:[c["default"]],emits:["input","loading","update","show-modal"],data:function(){return{component:null,justUpdated:!1}},computed:{hasChildren:function(){return!!Object.keys(this.children).length},isCollapsed:function(){return!this.hasChildren||this.collapsed},instance:function(){return this.$refs.instance}},methods:{valuesEqual:function(e,t){e=(0,l.Z)({},e),t=(0,l.Z)({},t);for(var n=0,i=["updated_at","data"];n<i.length;n++){var r=i[n];delete e[r],delete t[r]}return this.objectsEqual(e,t)},childrenByParentId:function(e){var t,n=this,i=null===(t=this.allEntities)||void 0===t?void 0:t[e];return i?(i.children_ids||[]).reduce((function(e,t){var i=n.allEntities[t];return i&&!i.is_configuration&&(e[i.id]=i),e}),{}):{}},onClick:function(e){e.stopPropagation(),e.target.classList.contains("label")||e.target.classList.contains("head")?this.toggleCollapsed():this.$emit("show-modal",this.value.id)},onEntityUpdate:function(e){var t=null===e||void 0===e?void 0:e.id,n=null!=t&&this.children&&t in this.children;n&&this.notifyUpdate()},toggleCollapsed:function(){this.collapsed=!this.collapsed,this.instance&&(this.instance.collapsed=!this.instance.collapsed)},notifyUpdate:function(){this.justUpdated=!0;var e=this;setTimeout((function(){return e.justUpdated=!1}),1e3)}},mounted:function(){var e=this;if("Entity"!==this.type){var t=this.type.split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");this.$watch((function(){return e.value}),(function(t,n){if(e.valuesEqual(n,t))return!1;e.notifyUpdate(),e.$emit("update",{value:t})})),this.component=(0,u.XI)((0,i.RC)((function(){return n(7243)("./".concat(t))})))}d.$.onEntity(this.onEntityUpdate)}},p=n(3744);const m=(0,p.Z)(f,[["render",s],["__scopeId","data-v-cf35fe46"]]);var v=m},1706:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n(6252),r=n(3577),a=["title"],o={key:0,class:"fas fa-spinner fa-spin loading"},s={key:1,class:"fas fa-circle-exclamation error"};function l(e,t,n,l,u,c){var d=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["entity-icon-container",{"with-color-fill":!!c.colorFill}]),title:e.prettify(n.entity.type||""),style:(0,r.j5)(c.colorFillStyle)},[n.loading?((0,i.wg)(),(0,i.iD)("i",o)):n.error?((0,i.wg)(),(0,i.iD)("i",s)):((0,i.wg)(),(0,i.j4)(d,(0,r.vs)((0,i.dG)({key:2},c.computedIconNormalized)),null,16))],14,a)}var u=n(4648),c=(n(7941),n(7042),n(1478)),d=n(6813),f={name:"EntityIcon",components:{Icon:c.Z},mixins:[d.Z],props:{loading:{type:Boolean,default:!1},error:{type:Boolean,default:!1},entity:{type:Object,required:!0},icon:{type:Object,default:function(){}},hasColorFill:{type:Boolean,default:!1}},data:function(){return{component:null,modalVisible:!1}},computed:{computedIcon:function(){var e,t,n=(0,u.Z)({},(null===(e=this.entity)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.icon)||{});return Object.keys(this.icon||{}).length&&(n=this.icon),(0,u.Z)({},n)},colorFill:function(){return this.hasColorFill&&this.computedIcon.color},colorFillStyle:function(){return this.colorFill&&!this.error?{background:this.colorFill}:{}},computedIconNormalized:function(){var e=(0,u.Z)({},this.computedIcon);return this.colorFill&&delete e.color,e},type:function(){var e=this.entity.type||"";return e.charAt(0).toUpperCase()+e.slice(1)}}},p=n(3744);const m=(0,p.Z)(f,[["render",l],["__scopeId","data-v-49689016"]]);var v=m},7909:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});n(9653),n(9600),n(1249),n(4916),n(3123),n(7042);var i=n(6813),r={name:"EntityMixin",mixins:[i.Z],emits:["input"],props:{loading:{type:Boolean,default:!1},error:{type:Boolean,default:!1},value:{type:Object,required:!0},parent:{type:Object,default:function(){}},children:{type:Object,default:function(){}},allEntities:{type:Object,default:function(){}},level:{type:Number,default:0}},data:function(){return{modalVisible:!1,collapsed:!0}},computed:{type:function(){var e=this.value.type||"";return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("")}}};const a=r;var o=a},532:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});n(7941),n(8309),n(2707),n(2479);var i=n(6252),r=n(3577),a=function(e){return(0,i.dD)("data-v-5c19fd1f"),e=e(),(0,i.Cn)(),e},o={class:"row plugin entities-container"},s={class:"groups-canvas"},l=(0,i.Uk)("No entities found"),u={key:2,class:"groups-container"},c={class:"frame"},d={class:"header"},f={class:"section left"},p={class:"section center"},m=["textContent"],v={class:"section right"},h=["onClick"],y=a((function(){return(0,i._)("i",{class:"fa fa-sync-alt"},null,-1)})),g=[y],_={class:"body"};function w(e,t,n,a,y,w){var b,S=(0,i.up)("Loading"),C=(0,i.up)("Selector"),k=(0,i.up)("EntityModal"),E=(0,i.up)("VariableModal"),x=(0,i.up)("NoItems"),I=(0,i.up)("Icon"),D=(0,i.up)("Entity");return(0,i.wg)(),(0,i.iD)("div",o,[y.loading?((0,i.wg)(),(0,i.j4)(S,{key:0})):(0,i.kq)("",!0),(0,i._)("header",null,[(0,i.Wm)(C,{"entity-groups":y.entityGroups,value:y.selector,onInput:t[0]||(t[0]=function(e){return y.selector=e}),onRefresh:w.refresh,onShowVariableModal:t[1]||(t[1]=function(e){return y.variableModalVisible=!0})},null,8,["entity-groups","value","onRefresh"])]),(0,i._)("div",s,[y.modalEntityId&&y.entities[y.modalEntityId]?((0,i.wg)(),(0,i.j4)(k,{key:0,entity:y.entities[y.modalEntityId],parent:y.entities[y.entities[y.modalEntityId].parent_id],children:w.childrenByParentId(y.modalEntityId),visible:y.modalVisible,"config-values":w.configValuesByParentId(y.modalEntityId),onClose:w.onEntityModal,onEntityUpdate:t[2]||(t[2]=function(e){return y.modalEntityId=e})},null,8,["entity","parent","children","visible","config-values","onClose"])):(0,i.kq)("",!0),(0,i.Wm)(E,{visible:y.variableModalVisible,onClose:t[3]||(t[3]=function(e){return y.variableModalVisible=!1})},null,8,["visible"]),null!==(b=Object.keys(w.displayGroups||{}))&&void 0!==b&&b.length?((0,i.wg)(),(0,i.iD)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.displayGroups,(function(e){var n,a;return(0,i.wg)(),(0,i.iD)("div",{class:"group fade-in",key:e.name},[(0,i._)("div",c,[(0,i._)("div",d,[(0,i._)("span",f,["category"===y.selector.grouping&&w.entitiesMeta[w.typesByCategory[e.name]]?((0,i.wg)(),(0,i.j4)(I,(0,r.vs)((0,i.dG)({key:0},w.entitiesMeta[w.typesByCategory[e.name]].icon||{})),null,16)):"plugin"===y.selector.grouping&&w.pluginIcons[e.name]?((0,i.wg)(),(0,i.j4)(I,{key:1,class:(0,r.C_)(null===(n=w.pluginIcons[e.name])||void 0===n?void 0:n.class),url:null===(a=w.pluginIcons[e.name])||void 0===a?void 0:a.imgUrl},null,8,["class","url"])):(0,i.kq)("",!0)]),(0,i._)("span",p,[(0,i._)("div",{class:"title",textContent:(0,r.zw)(e.name)},null,8,m)]),(0,i._)("span",v,[(0,i._)("button",{title:"Refresh",onClick:function(t){return w.refresh(e)}},g,8,h)])]),(0,i._)("div",_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(e.entities).sort((function(e,t){return e.name.localeCompare(t.name)})),(function(e){return(0,i.wg)(),(0,i.iD)("div",{class:"entity-frame",key:e.id},[e.parent_id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(D,{value:e,children:w.childrenByParentId(e.id),"all-entities":y.entities,onShowModal:t[4]||(t[4]=function(e){return w.onEntityModal(e)}),onInput:function(t){return w.onEntityInput(e)},error:!!y.errorEntities[e.id],key:e.id,loading:!!y.loadingEntities[e.id],onLoading:function(t){return y.loadingEntities[e.id]=t}},null,8,["value","children","all-entities","onInput","error","loading","onLoading"]))])})),128))])])])})),128))])):((0,i.wg)(),(0,i.j4)(x,{key:1},{default:(0,i.w5)((function(){return[l]})),_:1}))])])}var b=n(4648),S=n(8534),C=n(6084),k=(n(5666),n(9653),n(1539),n(9720),n(1249),n(7327),n(6813)),E=n(1232),x=n(1478),I={class:"no-items-container"},D={class:"no-items fade-in"};function j(e,t,n,r,a,o){return(0,i.wg)(),(0,i.iD)("div",I,[(0,i._)("div",D,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])])}var G={name:"NoItems"},T=n(3744);const V=(0,T.Z)(G,[["render",j],["__scopeId","data-v-6fec32b5"]]);var Z=V,M=n(7083),O=n(8730),q=n(9429),U=n(3692),$=n(5250),N=n(1359),B=n(7369),R={name:"Entities",mixins:[k.Z],components:{Entity:M["default"],EntityModal:q["default"],Icon:x.Z,Loading:E.Z,NoItems:Z,Selector:O["default"],VariableModal:U["default"]},props:{entityScanTimeout:{type:Number,default:30}},data:function(){return{loading:!1,loadingEntities:{},errorEntities:{},entityTimeouts:{},entities:{},entityGroups:{id:{},category:{},plugin:{},type:{}},modalEntityId:null,modalVisible:!1,variableModalVisible:!1,selector:{grouping:"plugin",selectedEntities:{}}}},computed:{entitiesMeta:function(){return B},pluginIcons:function(){return N},typesByCategory:function(){return Object.entries(B).reduce((function(e,t){var n=(0,C.Z)(t,2),i=n[0],r=n[1];return e[r.name_plural]=i,e}),{})},displayGroups:function(){var e=this;return Object.entries(this.entityGroups[this.selector.grouping]).filter((function(t){return Object.values(t[1]).filter((function(t){return!!e.selector.selectedEntities[t.id]&&null==t.parent_id})).length>0})).map((function(t){var n=(0,C.Z)(t,2),i=n[0],r=n[1];return{name:i,entities:Object.values(r).filter((function(t){return t.id in e.selector.selectedEntities}))}})).sort((function(e,t){return e.name.localeCompare(t.name)}))}},methods:{addEntity:function(e){var t=this;null==e.parent_id&&(this.entities[e.id]=e,["id","type","category","plugin"].forEach((function(n){null!=e[n]&&("id"==n?t.entityGroups[n][e[n]]=e:(t.entityGroups[n][e[n]]||(t.entityGroups[n][e[n]]={}),t.entityGroups[n][e[n]][e.id]=e))})))},removeEntity:function(e){var t=this;null==e.parent_id&&(["id","type","category","plugin"].forEach((function(n){t.entityGroups[n][e[n]][e.id]&&delete t.entityGroups[n][e[n]][e.id]})),this.entities[e.id]&&delete this.entities[e.id])},_shouldSkipLoading:function(e){var t=Object.values(this.childrenByParentId(e.id)),n=t.filter((function(e){return!e.is_configuration&&!e.is_write_only&&!e.is_query_disabled})).length>0;return e.is_query_disabled||e.is_write_only||t.length&&!n},refresh:function(e){var t=this;return(0,S.Z)(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=(e?e.entities:t.entities)||{},r={},e&&(r.plugins=Object.values(i).reduce((function(e,t){return e[t.plugin]=!0,e}),{})),t.loadingEntities=Object.values(i).reduce((function(e,n){if(t._shouldSkipLoading(n))return e;var i=t,r=n.id;return t.entityTimeouts[r]&&clearTimeout(t.entityTimeouts[r]),t.addEntity(n),t.entityTimeouts[r]=setTimeout((function(){i.loadingEntities[r]&&delete i.loadingEntities[r],i.entityTimeouts[r]&&delete i.entityTimeouts[r],i.errorEntities[r]=n,console.warn("Scan timeout for ".concat(n.name))}),1e3*t.entityScanTimeout),e[r]=!0,e}),{}),n.next=6,t.request("entities.scan",r);case 6:case"end":return n.stop()}}),n)})))()},sync:function(){var e=this;return(0,S.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.request("entities.get");case 4:e.entities=t.sent.reduce((function(t,n){var i;return n.name=(null===n||void 0===n||null===(i=n.meta)||void 0===i?void 0:i.name_override)||n.name,n.category=B[n.type].name_plural,n.meta=(0,b.Z)((0,b.Z)({},B[n.type]||{}),n.meta||{}),t[n.id]=n,e.addEntity(n),t}),{}),e.selector.selectedEntities=e.entityGroups.id;case 6:return t.prev=6,e.loading=!1,t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])})))()},childrenByParentId:function(e,t){var n,i,r=this,a=null===(n=this.entities)||void 0===n?void 0:n[e];return null!==a&&void 0!==a&&null!==(i=a.children_ids)&&void 0!==i&&i.length?a.children_ids.reduce((function(e,n){var i=r.entities[n];return i&&(!t&&!i.is_configuration||t&&i.is_configuration)&&(e[n]=r.entities[n]),e}),{}):{}},configValuesByParentId:function(e){return this.childrenByParentId(e,!0)},clearEntityTimeouts:function(e){this.errorEntities[e]&&delete this.errorEntities[e],this.loadingEntities[e]&&delete this.loadingEntities[e],this.entityTimeouts[e]&&(clearTimeout(this.entityTimeouts[e]),delete this.entityTimeouts[e])},onEntityInput:function(e){e.category=B[e.type].name_plural,this.entities[e.id]=e,this.clearEntityTimeouts(e.id),this.loadingEntities[e.id]&&delete this.loadingEntities[e.id]},onEntityUpdate:function(e){var t,n,i,r,a,o,s,l,u,c,d,f=e.entity.id;if(null!=f){this.clearEntityTimeouts(f);var p=(0,b.Z)({},e.entity);null==(null===(t=e.entity)||void 0===t?void 0:t.state)&&(p.state=null===(n=this.entities[f])||void 0===n?void 0:n.state),null!==(i=p.meta)&&void 0!==i&&null!==(r=i.name_override)&&void 0!==r&&r.length?p.name=p.meta.name_override:null!==(a=this.entities[f])&&void 0!==a&&null!==(o=a.meta)&&void 0!==o&&null!==(s=o.name_override)&&void 0!==s&&s.length?p.name=this.entities[f].meta.name_override:p.name=(null===(l=e.entity)||void 0===l?void 0:l.name)||(null===(u=this.entities[f])||void 0===u?void 0:u.name),p.category=B[p.type].name_plural,p.meta=(0,b.Z)((0,b.Z)((0,b.Z)({},B[e.entity.type]||{}),(null===(c=this.entities[f])||void 0===c?void 0:c.meta)||{}),(null===(d=e.entity)||void 0===d?void 0:d.meta)||{}),this.addEntity(p),$.$.publishEntity(p)}},onEntityDelete:function(e){var t,n=null===(t=e.entity)||void 0===t?void 0:t.id;null!=n&&(n===this.modalEntityId&&(this.modalEntityId=null),this.entities[n]&&this.removeEntity(this.entities[n]))},onEntityModal:function(e){e?(this.modalEntityId=e,this.modalVisible=!0):(this.modalEntityId=null,this.modalVisible=!1)}},mounted:function(){var e=this;return(0,S.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.subscribe(e.onEntityUpdate,"on-entity-update","platypush.message.event.entities.EntityUpdateEvent"),e.subscribe(e.onEntityDelete,"on-entity-delete","platypush.message.event.entities.EntityDeleteEvent"),t.next=4,e.sync();case 4:return t.next=6,e.refresh();case 6:case"end":return t.stop()}}),t)})))()},unmounted:function(){this.unsubscribe("on-entity-update")}};const W=(0,T.Z)(R,[["render",w],["__scopeId","data-v-5c19fd1f"]]);var F=W},9429:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _t}});n(8309),n(2526),n(1817),n(7941);var i=n(6252),r=n(3577),a=n(9963),o=function(e){return(0,i.dD)("data-v-e7f9b796"),e=e(),(0,i.Cn)(),e},s=(0,i.Uk)(" Are you "),l=o((function(){return(0,i._)("b",null,"sure",-1)})),u=(0,i.Uk)(" that you want to delete this entity? "),c=o((function(){return(0,i._)("br",null,null,-1)})),d=o((function(){return(0,i._)("br",null,null,-1)})),f=(0,i.Uk)(" Note: you should only delete an entity if its plugin has been disabled or the entity is no longer reachable."),p=o((function(){return(0,i._)("br",null,null,-1)})),m=o((function(){return(0,i._)("br",null,null,-1)})),v=(0,i.Uk)(" Otherwise, the entity will simply be created again upon the next scan. "),h={class:"table-row"},y={class:"title"},g=(0,i.Uk)(" Name "),_={class:"value"},w=["textContent"],b={class:"table-row"},S={class:"title"},C=(0,i.Uk)(" Icon "),k={class:"value icon-canvas"},E={key:0,class:"icon-editor"},x=o((function(){return(0,i._)("i",{class:"fas fa-rotate-left"},null,-1)})),I=[x],D=o((function(){return(0,i._)("span",{class:"help"},[(0,i.Uk)(" Supported: image URLs or "),(0,i._)("a",{href:"https://fontawesome.com/icons",target:"_blank"},"FontAwesome icon classes"),(0,i.Uk)(". ")],-1)})),j={class:"table-row"},G=o((function(){return(0,i._)("div",{class:"title"}," Icon color ",-1)})),T={class:"value icon-color-picker"},V=["value"],Z=o((function(){return(0,i._)("i",{class:"fas fa-rotate-left"},null,-1)})),M=[Z],O={class:"table-row"},q=o((function(){return(0,i._)("div",{class:"title"},"Plugin",-1)})),U=["textContent"],$={class:"table-row"},N=o((function(){return(0,i._)("div",{class:"title"},"Internal ID",-1)})),B=["textContent"],R={key:0,class:"table-row"},W=o((function(){return(0,i._)("div",{class:"title"},"External ID",-1)})),F=["textContent"],L={key:1,class:"table-row"},P=o((function(){return(0,i._)("div",{class:"title"},"Description",-1)})),z=["textContent"],A={key:2,class:"table-row"},H=o((function(){return(0,i._)("div",{class:"title"},"External URL",-1)})),K={class:"value url"},Y=["href","text"],Q={key:3,class:"table-row"},J=o((function(){return(0,i._)("div",{class:"title"},"Image",-1)})),X={class:"value"},ee=["src"],te={key:4,class:"table-row"},ne=o((function(){return(0,i._)("div",{class:"title"},"Parent",-1)})),ie={class:"value"},re=["textContent"],ae={key:5,class:"table-row"},oe=o((function(){return(0,i._)("div",{class:"title"},"Created at",-1)})),se=["textContent"],le={key:6,class:"table-row"},ue=o((function(){return(0,i._)("div",{class:"title"},"Updated at",-1)})),ce=["textContent"],de=o((function(){return(0,i._)("div",{class:"title"},"Delete Entity",-1)})),fe={class:"value"},pe=o((function(){return(0,i._)("i",{class:"fas fa-trash"},null,-1)})),me=[pe],ve={key:7,class:"section children-container"},he=o((function(){return(0,i._)("div",{class:"col-11"},[(0,i._)("i",{class:"fas fa-sitemap"}),(0,i.Uk)("   Children ")],-1)})),ye={class:"col-1 pull-right"},ge={key:0,class:"children-container-info"},_e={class:"title"},we={class:"value"},be=["onClick","textContent"],Se={class:"section extra-info-container"},Ce=o((function(){return(0,i._)("div",{class:"col-11"},[(0,i._)("i",{class:"fas fa-circle-info"}),(0,i.Uk)("   Extra Info ")],-1)})),ke={class:"col-1 pull-right"},Ee={key:0,class:"extra-info"},xe={key:0,class:"table-row"},Ie=["textContent"],De=["textContent"],je={key:0,class:"table-row"},Ge=["textContent"],Te=["textContent"],Ve={key:8,class:"section config-container"},Ze=o((function(){return(0,i._)("div",{class:"col-11"},[(0,i._)("i",{class:"fas fa-screwdriver-wrench"}),(0,i.Uk)("   Configuration ")],-1)})),Me={class:"col-1 pull-right"},Oe={key:0,class:"entities"};function qe(e,t,n,o,x,Z){var pe=(0,i.up)("ConfirmDialog"),qe=(0,i.up)("EditButton"),Ue=(0,i.up)("NameEditor"),$e=(0,i.up)("Icon"),Ne=(0,i.up)("EntityIcon"),Be=(0,i.up)("Entity"),Re=(0,i.up)("Modal",!0);return n.entity?((0,i.wg)(),(0,i.j4)(Re,{key:0,visible:n.visible,class:"entity-modal",title:n.entity.name||n.entity.external_id},{default:(0,i.w5)((function(){var o,Re,We,Fe,Le,Pe,ze,Ae;return[(0,i.Wm)(pe,{ref:"deleteConfirmDiag",title:"Confirm entity deletion",onInput:Z.onDelete},{default:(0,i.w5)((function(){return[s,l,u,c,d,f,p,m,v]})),_:1},8,["onInput"]),(0,i._)("div",h,[(0,i._)("div",y,[g,x.editName?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(qe,{key:0,onClick:t[0]||(t[0]=function(e){return x.editName=!0})}))]),(0,i._)("div",_,[x.editName?((0,i.wg)(),(0,i.j4)(Ue,{key:0,value:n.entity.name,onInput:Z.onRename,onCancel:t[1]||(t[1]=function(e){return x.editName=!1}),disabled:x.loading},null,8,["value","onInput","disabled"])):((0,i.wg)(),(0,i.iD)("span",{key:1,textContent:(0,r.zw)(n.entity.name)},null,8,w))])]),(0,i._)("div",b,[(0,i._)("div",S,[C,x.editIcon?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(qe,{key:0,onClick:t[2]||(t[2]=function(e){return x.editIcon=!0})}))]),(0,i._)("div",k,[x.editIcon?((0,i.wg)(),(0,i.iD)("span",E,[(0,i.Wm)(Ue,{value:(null===(o=n.entity.meta)||void 0===o||null===(Re=o.icon)||void 0===Re?void 0:Re.class)||(null===(We=n.entity.meta)||void 0===We||null===(Fe=We.icon)||void 0===Fe?void 0:Fe.url),onInput:Z.onIconEdit,onCancel:t[5]||(t[5]=function(e){return x.editIcon=!1}),disabled:x.loading},{default:(0,i.w5)((function(){return[(0,i._)("button",{type:"button",title:"Reset",onClick:t[3]||(t[3]=function(e){return Z.onIconEdit(null)}),onTouch:t[4]||(t[4]=function(e){return Z.onIconEdit(null)})},I,32)]})),_:1},8,["value","onInput","disabled"]),D])):((0,i.wg)(),(0,i.j4)($e,(0,r.vs)((0,i.dG)({key:1},(null===(Le=n.entity)||void 0===Le||null===(Pe=Le.meta)||void 0===Pe?void 0:Pe.icon)||{})),null,16))])]),(0,i._)("div",j,[G,(0,i._)("div",T,[(0,i._)("input",{type:"color",value:null===(ze=n.entity.meta)||void 0===ze||null===(Ae=ze.icon)||void 0===Ae?void 0:Ae.color,onChange:t[6]||(t[6]=function(){return Z.onIconColorEdit&&Z.onIconColorEdit.apply(Z,arguments)})},null,40,V),(0,i._)("button",{type:"button",title:"Reset",onClick:t[7]||(t[7]=function(e){return Z.onIconColorEdit(null)}),onTouch:t[8]||(t[8]=function(e){return Z.onIconColorEdit(null)})},M,32)])]),(0,i._)("div",O,[q,(0,i._)("div",{class:"value",textContent:(0,r.zw)(n.entity.plugin)},null,8,U)]),(0,i._)("div",$,[N,(0,i._)("div",{class:"value",textContent:(0,r.zw)(n.entity.id)},null,8,B)]),n.entity.external_id?((0,i.wg)(),(0,i.iD)("div",R,[W,(0,i._)("div",{class:"value",textContent:(0,r.zw)(n.entity.external_id)},null,8,F)])):(0,i.kq)("",!0),n.entity.description?((0,i.wg)(),(0,i.iD)("div",L,[P,(0,i._)("div",{class:"value",textContent:(0,r.zw)(n.entity.description)},null,8,z)])):(0,i.kq)("",!0),n.entity.external_url?((0,i.wg)(),(0,i.iD)("div",A,[H,(0,i._)("div",K,[(0,i._)("a",{href:n.entity.external_url,target:"_blank",text:n.entity.external_url},null,8,Y)])])):(0,i.kq)("",!0),n.entity.image_url?((0,i.wg)(),(0,i.iD)("div",Q,[J,(0,i._)("div",X,[(0,i._)("img",{class:"entity-image",src:n.entity.image_url},null,8,ee)])])):(0,i.kq)("",!0),n.parent?((0,i.wg)(),(0,i.iD)("div",te,[ne,(0,i._)("div",ie,[(0,i._)("a",{class:"url",onClick:t[9]||(t[9]=function(t){return e.$emit("entity-update",n.parent.id)}),textContent:(0,r.zw)(n.parent.name)},null,8,re)])])):(0,i.kq)("",!0),n.entity.created_at?((0,i.wg)(),(0,i.iD)("div",ae,[oe,(0,i._)("div",{class:"value",textContent:(0,r.zw)(e.formatDateTime(n.entity.created_at))},null,8,se)])):(0,i.kq)("",!0),n.entity.updated_at?((0,i.wg)(),(0,i.iD)("div",le,[ue,(0,i._)("div",{class:"value",textContent:(0,r.zw)(e.formatDateTime(n.entity.updated_at))},null,8,ce)])):(0,i.kq)("",!0),(0,i._)("div",{class:"table-row delete-entity-container",onClick:t[11]||(t[11]=function(t){return e.$refs.deleteConfirmDiag.show()})},[de,(0,i._)("div",fe,[(0,i._)("button",{onClick:t[10]||(t[10]=(0,a.iM)((function(t){return e.$refs.deleteConfirmDiag.show()}),["stop"]))},me)])]),Object.keys(n.children||{}).length?((0,i.wg)(),(0,i.iD)("div",ve,[(0,i._)("div",{class:"title section-title",onClick:t[12]||(t[12]=function(e){return x.childrenCollapsed=!x.childrenCollapsed})},[he,(0,i._)("div",ye,[(0,i._)("i",{class:(0,r.C_)(["fas",{"fa-chevron-down":x.childrenCollapsed,"fa-chevron-up":!x.childrenCollapsed}])},null,2)])]),x.childrenCollapsed?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ge,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.children,(function(t){var a,o;return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["table-row",{hidden:!(null!==(a=t.name)&&void 0!==a&&a.length)||t.is_configuration}]),key:t.id},[(0,i._)("div",_e,[(0,i.Wm)(Ne,{entity:n.entity,icon:null===(o=n.entity.meta)||void 0===o?void 0:o.icon},null,8,["entity","icon"]),(0,i.Uk)("   "+(0,r.zw)(e.prettify(t.type)),1)]),(0,i._)("div",we,[(0,i._)("a",{class:"url",onClick:function(n){return e.$emit("entity-update",t.id)},textContent:(0,r.zw)(t.name)},null,8,be)])],2)})),128))]))])):(0,i.kq)("",!0),(0,i._)("div",Se,[(0,i._)("div",{class:"title section-title",onClick:t[13]||(t[13]=function(e){return x.extraInfoCollapsed=!x.extraInfoCollapsed})},[Ce,(0,i._)("div",ke,[(0,i._)("i",{class:(0,r.C_)(["fas",{"fa-chevron-down":x.extraInfoCollapsed,"fa-chevron-up":!x.extraInfoCollapsed}])},null,2)])]),x.extraInfoCollapsed?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Ee,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.entity,(function(t,n){return(0,i.wg)(),(0,i.iD)("div",{key:n},[null!=t&&x.specialFields.indexOf(n)<0?((0,i.wg)(),(0,i.iD)("div",xe,[(0,i._)("div",{class:"title",textContent:(0,r.zw)(e.prettify(n))},null,8,Ie),(0,i._)("div",{class:"value",textContent:(0,r.zw)(Z.stringify(t))},null,8,De)])):(0,i.kq)("",!0)])})),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.entity.data||{},(function(t,n){return(0,i.wg)(),(0,i.iD)("div",{key:n},[null!=t?((0,i.wg)(),(0,i.iD)("div",je,[(0,i._)("div",{class:"title",textContent:(0,r.zw)(e.prettify(n))},null,8,Ge),(0,i._)("div",{class:"value",textContent:(0,r.zw)(Z.stringify(t))},null,8,Te)])):(0,i.kq)("",!0)])})),128))]))]),Z.computedConfig.length?((0,i.wg)(),(0,i.iD)("div",Ve,[(0,i._)("div",{class:"title section-title",onClick:t[14]||(t[14]=function(e){return x.configCollapsed=!x.configCollapsed})},[Ze,(0,i._)("div",Me,[(0,i._)("i",{class:(0,r.C_)(["fas",{"fa-chevron-down":x.configCollapsed,"fa-chevron-up":!x.configCollapsed}])},null,2)])]),x.configCollapsed?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Oe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Z.computedConfig,(function(t){return(0,i.wg)(),(0,i.j4)(Be,{key:t.id,value:t,onInput:function(n){return e.$emit("input",t)}},null,8,["value","onInput"])})),128))]))])):(0,i.kq)("",!0)]})),_:1},8,["visible","title"])):(0,i.kq)("",!0)}var Ue=n(3336),$e=n(8534),Ne=(n(5666),n(2707),n(2479),n(6755),n(8862),n(8453)),Be=n(1478),Re=function(e){return(0,i.dD)("data-v-d543b3e4"),e=e(),(0,i.Cn)(),e},We={class:"dialog-content"},Fe=Re((function(){return(0,i._)("i",{class:"fas fa-check"},null,-1)})),Le=Re((function(){return(0,i._)("i",{class:"fas fa-xmark"},null,-1)}));function Pe(e,t,n,o,s,l){var u=(0,i.up)("Modal");return(0,i.wg)(),(0,i.j4)(u,{ref:"modal",title:n.title},{default:(0,i.w5)((function(){return[(0,i._)("div",We,[(0,i.WI)(e.$slots,"default",{},void 0,!0)]),(0,i._)("form",{class:"buttons",onSubmit:t[4]||(t[4]=(0,a.iM)((function(){return l.onConfirm&&l.onConfirm.apply(l,arguments)}),["prevent"]))},[(0,i._)("button",{type:"submit",class:"ok-btn",onClick:t[0]||(t[0]=function(){return l.onConfirm&&l.onConfirm.apply(l,arguments)}),onTouch:t[1]||(t[1]=function(){return l.onConfirm&&l.onConfirm.apply(l,arguments)})},[Fe,(0,i.Uk)("   "+(0,r.zw)(n.confirmText),1)],32),(0,i._)("button",{type:"button",class:"cancel-btn",onClick:t[2]||(t[2]=function(){return l.close&&l.close.apply(l,arguments)}),onTouch:t[3]||(t[3]=function(){return l.close&&l.close.apply(l,arguments)})},[Le,(0,i.Uk)("   "+(0,r.zw)(n.cancelText),1)],32)],32)]})),_:3},8,["title"])}var ze={emits:["input","click","touch"],components:{Modal:Ne.Z},props:{title:{type:String},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"}},methods:{onConfirm:function(){this.$emit("input"),this.close()},show:function(){this.$refs.modal.show()},close:function(){this.$refs.modal.hide()}}},Ae=n(3744);const He=(0,Ae.Z)(ze,[["render",Pe],["__scopeId","data-v-d543b3e4"]]);var Ke=He,Ye=function(e){return(0,i.dD)("data-v-3344f2bf"),e=e(),(0,i.Cn)(),e},Qe=Ye((function(){return(0,i._)("i",{class:"fas fa-pen-to-square"},null,-1)})),Je=[Qe];function Xe(e,t,n,r,a,o){return(0,i.wg)(),(0,i.iD)("button",{class:"edit-btn",onClick:t[0]||(t[0]=function(e){return o.proxy(e)}),onTouch:t[1]||(t[1]=function(e){return o.proxy(e)}),onInput:t[2]||(t[2]=function(e){return o.proxy(e)})},Je,32)}var et={emits:["input","click","touch"],methods:{proxy:function(e){this.$emit(e.type,e)}}};const tt=(0,Ae.Z)(et,[["render",Xe],["__scopeId","data-v-3344f2bf"]]);var nt=tt,it=n(1706),rt=function(e){return(0,i.dD)("data-v-600cb1a8"),e=e(),(0,i.Cn)(),e},at=["disabled"],ot=rt((function(){return(0,i._)("button",{type:"submit"},[(0,i._)("i",{class:"fas fa-circle-check"})],-1)})),st=rt((function(){return(0,i._)("i",{class:"fas fa-ban"},null,-1)})),lt=[st];function ut(e,t,n,r,o,s){return(0,i.wg)(),(0,i.iD)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)((function(){return s.submit&&s.submit.apply(s,arguments)}),["prevent"])),class:"name-editor"},[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.text=e}),disabled:n.disabled,ref:"input"},null,8,at),[[a.nr,o.text]]),ot,(0,i._)("button",{class:"cancel",onClick:t[1]||(t[1]=function(t){return e.$emit("cancel")}),onTouch:t[2]||(t[2]=function(t){return e.$emit("cancel")})},lt,32),(0,i.WI)(e.$slots,"default",{},void 0,!0)],32)}var ct={emits:["input","cancel"],props:{value:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{text:null}},methods:{proxy:function(e){this.$emit(e.type,e)},submit:function(){return this.$emit("input",this.text),!1}},mounted:function(){this.text=this.value,this.$refs.input.focus()}};const dt=(0,Ae.Z)(ct,[["render",ut],["__scopeId","data-v-600cb1a8"]]);var ft=dt,pt=n(6813),mt=n(7083),vt=n(7369),ht=["created_at","data","description","external_id","external_url","id","image_url","is_configuration","meta","name","plugin","updated_at","parent_id"],yt={name:"EntityModal",components:{Entity:mt["default"],EntityIcon:it["default"],Modal:Ne.Z,EditButton:nt,NameEditor:ft,Icon:Be.Z,ConfirmDialog:Ke},mixins:[pt.Z],emits:["input","loading","entity-update"],props:{entity:{type:Object,required:!0},parent:{type:Object},children:{type:Object},visible:{type:Boolean,default:!1},configValues:{type:Object,default:function(){}}},computed:{computedConfig:function(){return Object.values(this.configValues).sort((function(e,t){return(e.name||"").localeCompare(t.name||"")}))}},data:function(){return{loading:!1,editName:!1,editIcon:!1,configCollapsed:!0,childrenCollapsed:!0,extraInfoCollapsed:!0,specialFields:ht}},methods:{onRename:function(e){var t=this;return(0,$e.Z)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,i={},i[t.entity.id]=e,n.next=6,t.request("entities.rename",i);case 6:return n.prev=6,t.loading=!1,t.editName=!1,n.finish(6);case 10:case"end":return n.stop()}}),n,null,[[1,,6,10]])})))()},onDelete:function(){var e=this;return(0,$e.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.request("entities.delete",[e.entity.id]);case 4:return t.prev=4,e.loading=!1,t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])})))()},onIconEdit:function(e){var t=this;return(0,$e.Z)(regeneratorRuntime.mark((function n(){var i,r,a,o,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,i={url:null,class:null},null!==e&&void 0!==e&&e.length?e.startsWith("http")?i.url=e:i.class=e:(i.url=null===(r=vt[t.entity.type]||{})||void 0===r||null===(a=r.icon)||void 0===a?void 0:a.url,i.class=null===(o=vt[t.entity.type]||{})||void 0===o||null===(s=o.icon)||void 0===s?void 0:s["class"]),l={},l[t.entity.id]={icon:i},n.next=8,t.request("entities.set_meta",l);case 8:return n.prev=8,t.loading=!1,t.editIcon=!1,n.finish(8);case 12:case"end":return n.stop()}}),n,null,[[1,,8,12]])})))()},onIconColorEdit:function(e){var t=this;return(0,$e.Z)(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,r=(null===(i=t.entity.meta)||void 0===i?void 0:i.icon)||{},r.color=e?e.target.value:null,a={},a[t.entity.id]={icon:r},n.next=8,t.request("entities.set_meta",a);case 8:return n.prev=8,t.loading=!1,t.editIcon=!1,n.finish(8);case 12:case"end":return n.stop()}}),n,null,[[1,,8,12]])})))()},stringify:function(e){return null==e?"":Array.isArray(e)||"object"===(0,Ue.Z)(e)?JSON.stringify(e,null,2):""+e}}};const gt=(0,Ae.Z)(yt,[["render",qe],["__scopeId","data-v-e7f9b796"]]);var _t=gt},8730:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});n(7941);var i=n(6252),r=n(9963),a={class:"entities-selectors-container"},o={key:0,class:"selector search-container col-11"},s={class:"selector actions-container col-1 pull-right"};function l(e,t,n,l,u,c){var d=(0,i.up)("DropdownItem"),f=(0,i.up)("Dropdown");return(0,i.wg)(),(0,i.iD)("div",a,[Object.keys(n.entityGroups.id||{}).length?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.wy)((0,i._)("input",{ref:"search",type:"text",class:"search-bar",title:"Filter by name, plugin or ID",placeholder:"🔎","onUpdate:modelValue":t[0]||(t[0]=function(e){return u.searchTerm=e})},null,512),[[r.nr,u.searchTerm]])])):(0,i.kq)("",!0),(0,i._)("div",s,[(0,i.Wm)(f,{title:"Actions","icon-class":"fas fa-ellipsis"},{default:(0,i.w5)((function(){return[(0,i.Wm)(d,{"icon-class":"fas fa-sync-alt",text:"Refresh",onClick:t[1]||(t[1]=function(t){return e.$emit("refresh")})}),(0,i.Wm)(d,{"icon-class":"fas fa-square-root-variable",text:"Set Variable",onClick:t[2]||(t[2]=function(t){return e.$emit("show-variable-modal")})}),(0,i.Wm)(f,{title:"Group by",text:"Group by","icon-class":"fas fa-object-ungroup",ref:"groupingSelector"},{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.visibleGroupings,(function(e){var t;return(0,i.wg)(),(0,i.j4)(d,{key:e,text:c.prettifyGroupingName(e),"item-class":{selected:(null===(t=n.value)||void 0===t?void 0:t.grouping)===e},onClick:function(t){return c.onGroupingChanged(e)}},null,8,["text","item-class","onClick"])})),128))]})),_:1},512),(0,i.Wm)(f,{title:"Filter groups",text:"Filter groups","icon-class":{fas:!0,"fa-filter":!0,active:c.hasActiveFilter},ref:"groupSelector","keep-open-on-item-click":""},{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.sortedGroups,(function(e){return(0,i.wg)(),(0,i.j4)(d,(0,i.dG)({key:e,text:e},c.iconForGroup(e),{"item-class":{selected:!!u.selectedGroups[e]},onClick:(0,r.iM)((function(t){return c.toggleGroup(e)}),["stop"])}),null,16,["text","item-class","onClick"])})),128))]})),_:1},8,["icon-class"])]})),_:1})])])}var u=n(4648),c=(n(7327),n(1539),n(2479),n(2707),n(8309),n(9714),n(7852),n(7042),n(6813)),d=n(5771),f=n(2684),p=n(7369),m=n(1359),v=n(5250),h={name:"Selector",emits:["input","refresh","show-variable-modal"],mixins:[c.Z],components:{Dropdown:d.Z,DropdownItem:f.Z},props:{entityGroups:{type:Object,required:!0},value:{type:Object,required:!0}},data:function(){return{selectedGroups:{},searchTerm:""}},computed:{visibleGroupings:function(){return Object.keys(this.entityGroups).filter((function(e){return"id"!==e}))},hasActiveFilter:function(){return Object.values(this.selectedGroups).filter((function(e){return!1===e})).length>0},sortedGroups:function(){var e;return Object.keys(this.entityGroups[null===(e=this.value)||void 0===e?void 0:e.grouping]||{}).sort()},typesMeta:function(){return p},isGroupFilterActive:function(){return Object.keys(this.selectedGroups).length!==this.sortedGroups.length},selectedEntities:function(){var e,t=this,n=null===(e=this.searchTerm)||void 0===e?void 0:e.toLowerCase();return Object.values(this.entityGroups.id).filter((function(e){var i;return!!t.selectedGroups[e[null===(i=t.value)||void 0===i?void 0:i.grouping]]&&(null===n||void 0===n||!n.length||((e.name||"").toLowerCase().indexOf(n)>=0||(e.plugin||"").toLowerCase().indexOf(n)>=0||(e.external_id||"").toLowerCase().indexOf(n)>=0||(e.id||0).toString()==n))})).reduce((function(e,t){return e[t.id]=t,e}),{})}},methods:{prettifyGroupingName:function(e){return e?(e=this.prettify(e),e.endsWith("y")&&(e=e.slice(0,e.length-1)+"ie"),e+="s",e):""},iconForGroup:function(e){if("plugin"===this.value.grouping&&m[e]){var t,n,i=m[e];return{"icon-class":null!==(t=i["class"])&&void 0!==t&&t.length||null===(n=i.imgUrl)||void 0===n||!n.length?i["class"]:"fas fa-gears","icon-url":i.imgUrl}}return{}},synchronizeSelectedEntities:function(){var e=(0,u.Z)({},this.value);e.selectedEntities=this.selectedEntities,this.$emit("input",e)},updateSearchTerm:function(){var e=(0,u.Z)({},this.value);e.searchTerm=this.searchTerm,e.selectedEntities=this.selectedEntities,this.$emit("input",e)},refreshGroupFilter:function(){var e;this.selectedGroups=Object.keys(this.entityGroups[null===(e=this.value)||void 0===e?void 0:e.grouping]||{}).reduce((function(e,t){return e[t]=!0,e}),{}),this.synchronizeSelectedEntities()},toggleGroup:function(e){this.selectedGroups[e]=!this.selectedGroups[e],this.synchronizeSelectedEntities()},processEntityUpdate:function(e){var t,n=e[null===(t=this.value)||void 0===t?void 0:t.grouping];n&&null==this.selectedGroups[e[n]]&&(this.selectedGroups[n]=!0)},onGroupingChanged:function(e){var t;if(!this.entityGroups[e]||e===(null===(t=this.value)||void 0===t?void 0:t.grouping))return!1;var n=(0,u.Z)({},this.value);n.grouping=e,this.$emit("input",n)}},mounted:function(){var e=this;this.refreshGroupFilter(),this.$watch((function(){var t;return null===(t=e.value)||void 0===t?void 0:t.grouping}),(function(){e.refreshGroupFilter()})),this.$watch((function(){return e.searchTerm}),this.updateSearchTerm),v.$.onEntity(this.processEntityUpdate)}},y=n(3744);const g=(0,y.Z)(h,[["render",l],["__scopeId","data-v-e7732be6"]]);var _=g},3692:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var i=n(6252),r=n(9963),a=function(e){return(0,i.dD)("data-v-4e3d4a40"),e=e(),(0,i.Cn)(),e},o={class:"variable-modal-container"},s={class:"row"},l=a((function(){return(0,i._)("div",{class:"col-s-12 col-m-4 label"},[(0,i._)("label",{for:"name"},"Variable Name")],-1)})),u={class:"col-s-12 col-m-8 value"},c=["disabled"],d={class:"row"},f=a((function(){return(0,i._)("div",{class:"col-s-12 col-m-4 label"},[(0,i._)("label",{for:"name"},"Variable Value")],-1)})),p={class:"col-s-12 col-m-8 value"},m=["disabled"],v={class:"row button-container"},h=["disabled"],y=a((function(){return(0,i._)("i",{class:"fas fa-check"},null,-1)})),g=[y];function _(e,t,n,a,y,_){var w=(0,i.up)("Modal");return(0,i.wg)(),(0,i.j4)(w,{visible:n.visible,title:"Set Variable",ref:"modal",onOpen:_.onOpen,onClose:t[3]||(t[3]=function(t){return e.$emit("close",t)})},{default:(0,i.w5)((function(){return[(0,i._)("div",o,[(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,r.iM)((function(){return _.setValue&&_.setValue.apply(_,arguments)}),["prevent"]))},[(0,i._)("div",s,[l,(0,i._)("div",u,[(0,i.wy)((0,i._)("input",{type:"text",id:"variable-name","onUpdate:modelValue":t[0]||(t[0]=function(e){return y.varName=e}),placeholder:"Variable Name",disabled:y.loading,ref:"varName"},null,8,c),[[r.nr,y.varName]])])]),(0,i._)("div",d,[f,(0,i._)("div",p,[(0,i.wy)((0,i._)("input",{type:"text",id:"variable-value","onUpdate:modelValue":t[1]||(t[1]=function(e){return y.varValue=e}),ref:"varValue",placeholder:"Variable Value",disabled:y.loading},null,8,m),[[r.nr,y.varValue]])])]),(0,i._)("div",v,[(0,i._)("button",{type:"submit",title:"Set",disabled:y.loading},g,8,h)])],32)])]})),_:1},8,["visible","onOpen"])}var w=n(8534),b=(n(5666),n(3210),n(8453)),S=n(6813),C={name:"VariableModal",components:{Modal:b.Z},mixins:[S.Z],emits:["close"],props:{visible:{type:Boolean,default:!1}},data:function(){return{loading:!1,varName:null,varValue:null}},methods:{clearValue:function(){var e=this;return(0,w.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.request("variable.unset",{name:e.varName.trim()});case 4:return t.prev=4,e.loading=!1,t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])})))()},setValue:function(){var e=this;return(0,w.Z)(regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.varName.trim(),null!==n&&void 0!==n&&n.length||e.notifyWarning("No variable name has been specified"),i=e.varValue,null!==i&&void 0!==i&&i.length){t.next=8;break}return t.next=6,e.clearValue();case 6:t.next=17;break;case 8:return e.loading=!0,t.prev=9,r={},r[n]=i,t.next=14,e.request("variable.set",r);case 14:return t.prev=14,e.loading=!1,t.finish(14);case 17:e.$refs.varName.value="",e.$refs.varValue.value="",e.$refs.modal.close();case 20:case"end":return t.stop()}}),t,null,[[9,,14,17]])})))()},onOpen:function(){var e=this;this.$nextTick((function(){e.$refs.varName.focus()}))}}},k=n(3744);const E=(0,k.Z)(C,[["render",_],["__scopeId","data-v-4e3d4a40"]]);var x=E},7243:function(e,t,n){var i={"./Accelerometer":[5157,9,1300,5157],"./Accelerometer.vue":[5157,9,1300,5157],"./Battery":[7503,9,7503],"./Battery.vue":[7503,9,7503],"./BinarySensor":[8135,9,3490,8135],"./BinarySensor.vue":[8135,9,3490,8135],"./BluetoothDevice":[9767,9,3490,9767],"./BluetoothDevice.vue":[9767,9,3490,9767],"./BluetoothService":[5498,9,3490,5498],"./BluetoothService.vue":[5498,9,3490,5498],"./Button":[9276,9,1300,9276],"./Button.vue":[9276,9,1300,9276],"./CloudInstance":[5225,9,5225],"./CloudInstance.vue":[5225,9,5225],"./CompositeSensor":[5157,9,1300,5157],"./CompositeSensor.vue":[5157,9,1300,5157],"./ContactSensor":[8135,9,3490,8135],"./ContactSensor.vue":[8135,9,3490,8135],"./Cpu":[9450,9,9450],"./Cpu.vue":[9450,9,9450],"./CpuInfo":[2806,9,2806],"./CpuInfo.vue":[2806,9,2806],"./CpuStats":[5225,9,5225],"./CpuStats.vue":[5225,9,5225],"./CpuTimes":[8444,9,8444],"./CpuTimes.vue":[8444,9,8444],"./CurrentSensor":[5157,9,1300,5157],"./CurrentSensor.vue":[5157,9,1300,5157],"./Device":[5225,9,5225],"./Device.vue":[5225,9,5225],"./DewPointSensor":[5157,9,1300,5157],"./DewPointSensor.vue":[5157,9,1300,5157],"./Dimmer":[5924,9,7782,5924],"./Dimmer.vue":[5924,9,7782,5924],"./Disk":[7141,9,7141],"./Disk.vue":[7141,9,7141],"./DistanceSensor":[5157,9,1300,5157],"./DistanceSensor.vue":[5157,9,1300,5157],"./EnergySensor":[5157,9,1300,5157],"./EnergySensor.vue":[5157,9,1300,5157],"./Entity":[7083,9],"./Entity.vue":[7083,9],"./EntityIcon":[1706,9],"./EntityIcon.vue":[1706,9],"./EntityMixin":[7909,9],"./EntityMixin.vue":[7909,9],"./EnumSensor":[9276,9,1300,9276],"./EnumSensor.vue":[9276,9,1300,9276],"./EnumSwitch":[6358,9,6358],"./EnumSwitch.vue":[6358,9,6358],"./HeartRateSensor":[5157,9,1300,5157],"./HeartRateSensor.vue":[5157,9,1300,5157],"./HumiditySensor":[5157,9,1300,5157],"./HumiditySensor.vue":[5157,9,1300,5157],"./IlluminanceSensor":[5157,9,1300,5157],"./IlluminanceSensor.vue":[5157,9,1300,5157],"./Index":[532,9],"./Index.vue":[532,9],"./Light":[1196,9,7782,3490,1196],"./Light.vue":[1196,9,7782,3490,1196],"./LinkQuality":[6815,9,6815],"./LinkQuality.vue":[6815,9,6815],"./Magnetometer":[5157,9,1300,5157],"./Magnetometer.vue":[5157,9,1300,5157],"./MemoryStats":[9387,9,9387],"./MemoryStats.vue":[9387,9,9387],"./Modal":[9429,9],"./Modal.vue":[9429,9],"./MotionSensor":[5157,9,1300,5157],"./MotionSensor.vue":[5157,9,1300,5157],"./Muted":[3303,9,3490,3303],"./Muted.vue":[3303,9,3490,3303],"./NetworkInterface":[6164,9,6164],"./NetworkInterface.vue":[6164,9,6164],"./NumericSensor":[5157,9,1300,5157],"./NumericSensor.vue":[5157,9,1300,5157],"./PercentSensor":[675,9,675],"./PercentSensor.vue":[675,9,675],"./PowerSensor":[5157,9,1300,5157],"./PowerSensor.vue":[5157,9,1300,5157],"./PresenceSensor":[8135,9,3490,8135],"./PresenceSensor.vue":[8135,9,3490,8135],"./PressureSensor":[5157,9,1300,5157],"./PressureSensor.vue":[5157,9,1300,5157],"./RawSensor":[5157,9,1300,5157],"./RawSensor.vue":[5157,9,1300,5157],"./Selector":[8730,9],"./Selector.vue":[8730,9],"./Sensor":[5157,9,1300,5157],"./Sensor.vue":[5157,9,1300,5157],"./StepsSensor":[5157,9,1300,5157],"./StepsSensor.vue":[5157,9,1300,5157],"./SwapStats":[9387,9,9387],"./SwapStats.vue":[9387,9,9387],"./Switch":[3303,9,3490,3303],"./Switch.vue":[3303,9,3490,3303],"./SystemBattery":[7503,9,7503],"./SystemBattery.vue":[7503,9,7503],"./SystemFan":[5157,9,1300,5157],"./SystemFan.vue":[5157,9,1300,5157],"./SystemTemperature":[5157,9,1300,5157],"./SystemTemperature.vue":[5157,9,1300,5157],"./TemperatureSensor":[5157,9,1300,5157],"./TemperatureSensor.vue":[5157,9,1300,5157],"./ThreeAxisSensor":[5157,9,1300,5157],"./ThreeAxisSensor.vue":[5157,9,1300,5157],"./TimeDuration":[5157,9,1300,5157],"./TimeDuration.vue":[5157,9,1300,5157],"./Variable":[1213,9,1213],"./Variable.vue":[1213,9,1213],"./VariableModal":[3692,9],"./VariableModal.vue":[3692,9],"./VoltageSensor":[5157,9,1300,5157],"./VoltageSensor.vue":[5157,9,1300,5157],"./Volume":[5924,9,7782,5924],"./Volume.vue":[5924,9,7782,5924],"./WeightSensor":[5157,9,1300,5157],"./WeightSensor.vue":[5157,9,1300,5157],"./common.scss":[65,9,4981,65],"./meta":[7369,3],"./meta.json":[7369,3],"./vars.scss":[5207,9,4981,5207]};function r(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(r,16|t[1])}))}r.keys=function(){return Object.keys(i)},r.id=7243,e.exports=r},7369:function(e){"use strict";e.exports=JSON.parse('{"battery":{"name":"Battery","name_plural":"Batteries","icon":{"class":"fas fa-battery-full"}},"button":{"name":"Button","name_plural":"Buttons","icon":{"class":"fas fa-circle-dot"}},"cpu_info":{"name":"System","name_plural":"System","icon":{"class":"fas fa-circle-info"}},"cpu_stats":{"name":"System","name_plural":"System","icon":{"class":"fas fa-gauge"}},"cpu_times":{"name":"System","name_plural":"System","icon":{"class":"fas fa-clock"}},"memory_stats":{"name":"System","name_plural":"System","icon":{"class":"fas fa-memory"}},"swap_stats":{"name":"System","name_plural":"System","icon":{"class":"fas fa-memory"}},"disk":{"name":"System","name_plural":"System","icon":{"class":"fas fa-hard-drive"}},"network_interface":{"name":"System","name_plural":"System","icon":{"class":"fas fa-ethernet"}},"system_temperature":{"name":"System","name_plural":"System","icon":{"class":"fas fa-temperature-half"}},"system_fan":{"name":"System","name_plural":"System","icon":{"class":"fas fa-fan"}},"system_battery":{"name":"System","name_plural":"System","icon":{"class":"fas fa-battery-full"}},"current_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-bolt"}},"cpu":{"name":"System","name_plural":"System","icon":{"class":"fas fa-microchip"}},"motion_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-person-running"}},"distance_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-ruler-horizontal"}},"bluetooth_device":{"name":"Device","name_plural":"Devices","icon":{"class":"fab fa-bluetooth-b"}},"cloud_instance":{"name":"Cloud Entity","name_plural":"Cloud Entities","icon":{"class":"fas fa-cloud"}},"bluetooth_service":{"name":"Service","name_plural":"Services","icon":{"class":"fas fa-satellite-dish"}},"accelerometer":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-up-down-left-right"}},"magnetometer":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-magnet"}},"device":{"name":"Device","name_plural":"Devices","icon":{"class":"fas fa-gear"}},"volume":{"name":"Dimmer","name_plural":"Dimmers","icon":{"class":"fas fa-volume-high"}},"dimmer":{"name":"Dimmer","name_plural":"Dimmers","icon":{"class":"fas fa-gauge"}},"energy_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-plug"}},"entity":{"name":"Entity","name_plural":"Entities","icon":{"class":"fas fa-circle-question"}},"humidity_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-droplet"}},"dew_point_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-hand-holding-droplet"}},"illuminance_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-sun"}},"light":{"name":"Light","name_plural":"Lights","icon":{"class":"fas fa-lightbulb"}},"contact_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"far fa-hand"}},"presence_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-person"}},"weight_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-weight-scale"}},"link_quality":{"name":"Link Quality","name_plural":"Link Qualities","icon":{"class":"fas fa-tower-broadcast"}},"power_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-plug"}},"temperature_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-temperature-half"}},"steps_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-shoe-prints"}},"heart_rate_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-heart-pulse"}},"time_duration_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-clock"}},"pressure_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-gauge"}},"muted":{"name":"Switch","name_plural":"Switches","icon":{"class":"fas fa-volume-xmark"}},"enum_switch":{"name":"Switch","name_plural":"Switches","icon":{"class":"fas fa-gauge"}},"switch":{"name":"Switch","name_plural":"Switches","icon":{"class":"fas fa-toggle-on"}},"variable":{"name":"Variable","name_plural":"Variables","icon":{"class":"fas fa-square-root-variable"}},"voltage_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-car-battery"}},"composite_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-thermometer"}},"binary_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-thermometer"}},"numeric_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-thermometer"}},"percent_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-thermometer"}},"enum_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-thermometer"}},"raw_sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-thermometer"}},"sensor":{"name":"Sensor","name_plural":"Sensors","icon":{"class":"fas fa-thermometer"}}}')}}]);
//# sourceMappingURL=7083-legacy.e72144a3.js.map