"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[8853],{8853:function(e,t,s){s.r(t),s.d(t,{default:function(){return As}});var l=s(6252),a=s(3577),i=s(9963);const c=e=>((0,l.dD)("data-v-e009e590"),e=e(),(0,l.Cn)(),e),n={class:"nav-container"},o={class:"view-container"},r={class:"track-info-container"},d={key:0,class:"track-info-content"},u={key:0,class:"row file"},h=c((()=>(0,l._)("div",{class:"col-3 attr"},"File",-1))),k=["textContent"],p={key:1,class:"row artist"},y=c((()=>(0,l._)("div",{class:"col-3 attr"},"Artist",-1))),m={class:"col-9 value"},f=["href","textContent"],v={key:2,class:"row track-title"},g=c((()=>(0,l._)("div",{class:"col-3 attr"},"Title",-1))),w=["textContent"],C={key:3,class:"row album"},_=c((()=>(0,l._)("div",{class:"col-3 attr"},"Album",-1))),b={class:"col-9 value"},D=["href","textContent"],T={key:4,class:"row date"},x=c((()=>(0,l._)("div",{class:"col-3 attr"},"Date",-1))),$=["textContent"],P={key:5,class:"row duration"},S=c((()=>(0,l._)("div",{class:"col-3 attr"},"Duration",-1))),A=["textContent"],I={key:6,class:"row track"},R=c((()=>(0,l._)("div",{class:"col-3 attr"},"Track",-1))),q=["textContent"],M={key:7,class:"row disc"},L=c((()=>(0,l._)("div",{class:"col-3 attr"},"Disc",-1))),W=["textContent"],z={key:8,class:"row url"},V=c((()=>(0,l._)("div",{class:"col-3 attr"},"URL",-1))),j={class:"col-9 value"},E=["href","textContent"],O={class:"playlists-modal-container"},F={class:"filter"},N={class:"playlists"},Z=["checked","onChange"],H=["textContent"],K=c((()=>(0,l._)("i",{class:"fa fa-plus"},null,-1)));function U(e,t,s,c,U,Y){const B=(0,l.up)("Loading"),Q=(0,l.up)("Nav"),G=(0,l.up)("Playlist"),J=(0,l.up)("Playlists"),X=(0,l.up)("Search"),ee=(0,l.up)("Library"),te=(0,l.up)("MediaView"),se=(0,l.up)("Modal"),le=(0,l.up)("FormFooter");return(0,l.wg)(),(0,l.iD)(l.HY,null,[s.loading?((0,l.wg)(),(0,l.j4)(B,{key:0})):((0,l.wg)(),(0,l.j4)(te,{key:1,"plugin-name":s.pluginName,status:s.status,track:Y.track,onPlay:t[27]||(t[27]=t=>e.$emit("play",t)),onPause:t[28]||(t[28]=t=>e.$emit("pause")),onStop:t[29]||(t[29]=t=>e.$emit("stop")),onPrevious:t[30]||(t[30]=t=>e.$emit("previous")),onNext:t[31]||(t[31]=t=>e.$emit("next")),onSetVolume:t[32]||(t[32]=t=>e.$emit("set-volume",t)),onSeek:t[33]||(t[33]=t=>e.$emit("seek",t)),onConsume:t[34]||(t[34]=t=>e.$emit("consume",t)),onRepeat:t[35]||(t[35]=t=>e.$emit("repeat",t)),onRandom:t[36]||(t[36]=t=>e.$emit("random",t)),onSearch:Y.search},{default:(0,l.w5)((()=>[(0,l._)("main",null,[(0,l._)("div",n,[(0,l.Wm)(Q,{"selected-view":U.selectedView,onInput:t[0]||(t[0]=e=>U.selectedView=e)},null,8,["selected-view"])]),(0,l._)("div",o,["playing"===U.selectedView?((0,l.wg)(),(0,l.j4)(G,{key:0,tracks:s.tracks,status:s.status,loading:s.loading,devices:s.devices,"selected-device":s.selectedDevice,"active-device":s.activeDevice,onPlay:t[1]||(t[1]=t=>e.$emit("play",t)),onClear:t[2]||(t[2]=t=>e.$emit("clear")),onSwap:t[3]||(t[3]=t=>e.$emit("swap-tracks",t)),onAdd:t[4]||(t[4]=t=>e.$emit("add-to-tracklist",t)),onRemove:t[5]||(t[5]=t=>e.$emit("remove-from-tracklist",t)),onMove:t[6]||(t[6]=t=>e.$emit("tracklist-move",t)),onSave:t[7]||(t[7]=t=>e.$emit("tracklist-save",t)),onInfo:t[8]||(t[8]=t=>e.$emit("info",t)),onAddToPlaylist:Y.openAddToPlaylist,onSearch:Y.search,onRefreshStatus:Y.refreshStatus,onSelectDevice:Y.selectDevice},null,8,["tracks","status","loading","devices","selected-device","active-device","onAddToPlaylist","onSearch","onRefreshStatus","onSelectDevice"])):"playlists"===U.selectedView?((0,l.wg)(),(0,l.j4)(J,{key:1,playlists:s.playlists,loading:s.loading,devices:s.devices,"selected-device":s.selectedDevice,"active-device":s.activeDevice,"edited-playlist":s.editedPlaylist,tracks:s.editedPlaylistTracks,onPlay:t[9]||(t[9]=t=>e.$emit("play-playlist",t)),onLoad:t[10]||(t[10]=t=>e.$emit("load-playlist",t)),onRemove:t[11]||(t[11]=t=>e.$emit("remove-playlist",t)),onPlaylistEdit:t[12]||(t[12]=t=>e.$emit("playlist-edit",t)),onLoadTrack:t[13]||(t[13]=t=>e.$emit("add-to-tracklist-from-edited-playlist",t)),onRemoveTrack:t[14]||(t[14]=t=>e.$emit("remove-from-playlist",t)),onInfo:t[15]||(t[15]=t=>e.$emit("info",t)),onPlaylistAdd:t[16]||(t[16]=t=>e.$emit("playlist-add",t)),onAddToPlaylist:Y.openAddToPlaylist,onTrackMove:t[17]||(t[17]=t=>e.$emit("playlist-track-move",t)),onSearch:Y.search,onRefreshStatus:Y.refreshStatus,onSelectDevice:Y.selectDevice},null,8,["playlists","loading","devices","selected-device","active-device","edited-playlist","tracks","onAddToPlaylist","onSearch","onRefreshStatus","onSelectDevice"])):"search"===U.selectedView?((0,l.wg)(),(0,l.j4)(X,{key:2,loading:s.loading,devices:s.devices,"selected-device":s.selectedDevice,"active-device":s.activeDevice,onSearch:Y.search,results:s.searchResults,onClear:t[18]||(t[18]=t=>e.$emit("search-clear")),onInfo:t[19]||(t[19]=t=>e.$emit("info",t)),onPlay:t[20]||(t[20]=t=>e.$emit("play",t)),onLoad:t[21]||(t[21]=t=>e.$emit("add-to-tracklist",t)),onAddToPlaylist:Y.openAddToPlaylist,onRefreshStatus:Y.refreshStatus,onSelectDevice:Y.selectDevice},null,8,["loading","devices","selected-device","active-device","onSearch","results","onAddToPlaylist","onRefreshStatus","onSelectDevice"])):"library"===U.selectedView?((0,l.wg)(),(0,l.j4)(ee,{key:3,loading:s.loading,devices:s.devices,"selected-device":s.selectedDevice,"active-device":s.activeDevice,onSearch:Y.search,results:s.libraryResults,path:s.path,onClear:t[22]||(t[22]=t=>e.$emit("search-clear")),onInfo:t[23]||(t[23]=t=>e.$emit("info",t)),onPlay:t[24]||(t[24]=t=>e.$emit("play",t)),onLoad:t[25]||(t[25]=t=>e.$emit("add-to-tracklist",t)),onAddToPlaylist:Y.openAddToPlaylist,onCd:t[26]||(t[26]=t=>e.$emit("cd",t)),onRefreshStatus:Y.refreshStatus,onSelectDevice:Y.selectDevice},null,8,["loading","devices","selected-device","active-device","onSearch","results","path","onAddToPlaylist","onRefreshStatus","onSelectDevice"])):(0,l.kq)("",!0)])])])),_:1},8,["plugin-name","status","track","onSearch"])),(0,l._)("div",r,[(0,l.Wm)(se,{title:"Track info",ref:"trackInfo"},{default:(0,l.w5)((()=>[s.trackInfo?((0,l.wg)(),(0,l.iD)("div",d,[s.trackInfo.file?((0,l.wg)(),(0,l.iD)("div",u,[h,(0,l._)("div",{class:"col-9 value",textContent:(0,a.zw)(s.trackInfo.file)},null,8,k)])):(0,l.kq)("",!0),s.trackInfo.artist?((0,l.wg)(),(0,l.iD)("div",p,[y,(0,l._)("div",m,[(0,l._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(s.trackInfo.artist),onClick:t[37]||(t[37]=(0,i.iM)((e=>Y.search({artist:s.trackInfo.artist})),["prevent"]))},null,8,f)])])):(0,l.kq)("",!0),s.trackInfo.title?((0,l.wg)(),(0,l.iD)("div",v,[g,(0,l._)("div",{class:"col-9 value",textContent:(0,a.zw)(s.trackInfo.title)},null,8,w)])):(0,l.kq)("",!0),s.trackInfo.album?((0,l.wg)(),(0,l.iD)("div",C,[_,(0,l._)("div",b,[(0,l._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(s.trackInfo.album),onClick:t[38]||(t[38]=(0,i.iM)((e=>Y.search({artist:s.trackInfo.artist,album:s.trackInfo.album})),["prevent"]))},null,8,D)])])):(0,l.kq)("",!0),s.trackInfo.date?((0,l.wg)(),(0,l.iD)("div",T,[x,(0,l._)("div",{class:"col-9 value",textContent:(0,a.zw)(s.trackInfo.date)},null,8,$)])):(0,l.kq)("",!0),s.trackInfo.time?((0,l.wg)(),(0,l.iD)("div",P,[S,(0,l._)("div",{class:"col-9 value",textContent:(0,a.zw)(e.convertTime(s.trackInfo.time))},null,8,A)])):(0,l.kq)("",!0),s.trackInfo.track?((0,l.wg)(),(0,l.iD)("div",I,[R,(0,l._)("div",{class:"col-9 value",textContent:(0,a.zw)(s.trackInfo.track)},null,8,q)])):(0,l.kq)("",!0),s.trackInfo.disc?((0,l.wg)(),(0,l.iD)("div",M,[L,(0,l._)("div",{class:"col-9 value",textContent:(0,a.zw)(s.trackInfo.disc)},null,8,W)])):(0,l.kq)("",!0),s.trackInfo.url?((0,l.wg)(),(0,l.iD)("div",z,[V,(0,l._)("div",j,[(0,l._)("a",{href:s.trackInfo.url,textContent:(0,a.zw)(s.trackInfo.uri||s.trackInfo.url),target:"_blank"},null,8,E)])])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])),_:1},512)]),(0,l._)("div",O,[(0,l.Wm)(se,{title:"Playlists",ref:"playlistsModal",onClose:t[41]||(t[41]=e=>U.addToPlaylistTrack=null),onOpen:t[42]||(t[42]=e=>U.selectedPlaylists=[...Array(s.playlists.length).keys()].map((()=>!1)))},{default:(0,l.w5)((()=>[(0,l._)("div",F,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[39]||(t[39]=e=>U.playlistFilter=e)},null,512),[[i.nr,U.playlistFilter]])])]),(0,l._)("div",N,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.playlists,((e,t)=>((0,l.wg)(),(0,l.iD)("label",{class:(0,a.C_)(["row playlist",{hidden:U.playlistFilter?.length>0&&e.name.toLowerCase().indexOf(U.playlistFilter.toLowerCase())<0}]),key:t},[(0,l._)("input",{type:"checkbox",checked:U.selectedPlaylists[t],onChange:e=>U.selectedPlaylists[t]=e.target.checked},null,40,Z),(0,l._)("span",{class:"name",textContent:(0,a.zw)(e.name)},null,8,H)],2)))),128))]),(0,l.Wm)(le,null,{default:(0,l.w5)((()=>[(0,l._)("button",{onClick:t[40]||(t[40]=(...e)=>Y.addToPlaylist&&Y.addToPlaylist(...e))},[K,(0,l.Uk)(" Â  Add ")])])),_:1})])),_:1},512)])],64)}const Y={class:"form-footer"};function B(e,t,s,a,i,c){return(0,l.wg)(),(0,l.iD)("div",Y,[(0,l.WI)(e.$slots,"default",{},void 0,!0)])}var Q={name:"FormFooter"},G=s(3744);const J=(0,G.Z)(Q,[["render",B],["__scopeId","data-v-2495ce8a"]]);var X=J,ee=s(6791),te=s(3493),se=s(1065),le=s(5962);const ae=["title","onClick"];function ie(e,t,s,i,c,n){return(0,l.wg)(),(0,l.iD)("nav",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.views,((t,i)=>((0,l.wg)(),(0,l.iD)("li",{key:i,title:t.displayName,class:(0,a.C_)({selected:i===s.selectedView}),onClick:t=>e.$emit("input",i)},[(0,l._)("i",{class:(0,a.C_)(t.iconClass)},null,2)],10,ae)))),128))])}var ce={name:"Nav",emits:["input"],props:{selectedView:{type:String},collapsed:{type:Boolean,default:!1},views:{type:Object,default:()=>({playing:{iconClass:"fas fa-play",displayName:"Queue"},search:{iconClass:"fas fa-search",displayName:"Search"},playlists:{iconClass:"fas fa-list-ul",displayName:"Playlists"},library:{iconClass:"fas fa-compact-disc",displayName:"Library"}})}}};const ne=(0,G.Z)(ce,[["render",ie],["__scopeId","data-v-edee6494"]]);var oe=ne;const re=e=>((0,l.dD)("data-v-4badd225"),e=e(),(0,l.Cn)(),e),de={key:1,class:"playlist fade-in"},ue={class:"header-container"},he={class:"col-8 filter"},ke={class:"col-4 buttons"},pe=re((()=>(0,l._)("i",{class:"fa fa-plus"},null,-1))),ye=[pe],me=re((()=>(0,l._)("i",{class:"fa fa-sync"},null,-1))),fe=[me],ve={key:0,class:"no-content"},ge=["onDragstart","onDragend","onDragover","set","data-index","onClick","onDblclick"],we={class:"col-10"},Ce={class:"title"},_e={key:0,class:"artist"},be=["href","textContent"],De={key:1,class:"album"},Te=["href","textContent"],xe={class:"col-2 right-side"},$e=["textContent"],Pe={class:"actions"};function Se(e,t,s,c,n,o){const r=(0,l.up)("Loading"),d=(0,l.up)("DropdownItem"),u=(0,l.up)("Dropdown"),h=(0,l.up)("MusicHeader");return s.loading?((0,l.wg)(),(0,l.j4)(r,{key:0})):((0,l.wg)(),(0,l.iD)("div",de,[(0,l._)("div",ue,[(0,l.Wm)(h,{ref:"header"},{default:(0,l.w5)((()=>[(0,l._)("div",he,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[0]||(t[0]=e=>n.filter=e)},null,512),[[i.nr,n.filter]])])]),(0,l._)("div",ke,[(0,l.Wm)(u,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Save as playlist","icon-class":"fa fa-save",disabled:!s.tracks?.length,onClick:o.playlistSave},null,8,["disabled","onClick"]),2===n.selectedTracks?.length?((0,l.wg)(),(0,l.j4)(d,{key:0,text:"Swap tracks","icon-class":"fa fa-retweet",onClick:t[1]||(t[1]=t=>e.$emit("swap",n.selectedTracks))})):(0,l.kq)("",!0),(0,l.Wm)(d,{text:n.selectionMode?"End selection":"Start selection","icon-class":"far fa-check-square",disabled:!s.tracks?.length,onClick:t[2]||(t[2]=e=>n.selectionMode=!n.selectionMode)},null,8,["text","disabled"]),(0,l.Wm)(d,{text:n.selectedTracks?.length===s.tracks?.length?"Unselect all":"Select all","icon-class":"fa fa-check-double",disabled:!s.tracks?.length,onClick:t[3]||(t[3]=e=>n.selectedTracks=n.selectedTracks.length===s.tracks.length?[]:[...Array(s.tracks.length).keys()])},null,8,["text","disabled"]),n.selectedTracks.length>0?((0,l.wg)(),(0,l.j4)(d,{key:1,text:"Remove track"+(n.selectedTracks.length>1?"s":""),"icon-class":"fa fa-trash",onClick:t[4]||(t[4]=t=>e.$emit("remove",[...new Set(n.selectedTracks)]))},null,8,["text"])):(0,l.kq)("",!0),(0,l.Wm)(d,{text:"Clear playlist","icon-class":"fa fa-ban",disabled:!s.tracks?.length,onClick:t[5]||(t[5]=t=>e.$emit("clear"))},null,8,["disabled"])])),_:1}),(0,l._)("button",{title:"Add track",onClick:t[6]||(t[6]=(...e)=>o.addTrack&&o.addTrack(...e))},ye),null!=s.devices?((0,l.wg)(),(0,l.iD)("button",{key:0,title:"Refresh status",onClick:t[7]||(t[7]=t=>e.$emit("refresh-status"))},fe)):(0,l.kq)("",!0),Object.keys(s.devices||{}).length?((0,l.wg)(),(0,l.j4)(u,{key:1,title:"Players","icon-class":"fa fa-volume-up"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.devices,((t,i)=>((0,l.wg)(),(0,l.j4)(d,{key:i,textContent:(0,a.zw)(t.name),"item-class":{active:s.activeDevice===i,selected:s.selectedDevice===i},"icon-class":"fa fa-volume-up",onClick:t=>e.$emit("select-device",i)},null,8,["textContent","item-class","onClick"])))),128))])),_:1})):(0,l.kq)("",!0)])])),_:1},512)]),(0,l._)("div",{class:"body",ref:"body",onScroll:t[11]||(t[11]=(...e)=>o.onScroll&&o.onScroll(...e))},[s.tracks?.length?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",ve," No tracks are loaded ")),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.displayedTrackIndices,(c=>((0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(["row track",o.trackClass(c)]),onDragstart:e=>o.onTrackDragStart(c),onDragend:e=>o.onTrackDragEnd(c),onDragover:e=>o.onTrackDragOver(c),draggable:"true",set:e.track=s.tracks[c],key:c,"data-index":c,onClick:e=>o.onTrackClick(e,c),onDblclick:t=>e.$emit("play",{pos:c})},[(0,l._)("div",we,[(0,l._)("div",Ce,[(0,l.Uk)((0,a.zw)(e.track.title||"[No Title]")+" ",1),s.status?.playingPos!==c||"play"!==s.status?.state&&"pause"!==s.status?.state?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,a.C_)(["playing-icon",{paused:"pause"===s.status?.state}])},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)([...Array(3).keys()],(e=>((0,l.wg)(),(0,l.iD)("span",{key:e})))),128))],2))]),e.track.artist?((0,l.wg)(),(0,l.iD)("div",_e,[(0,l._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(e.track.artist),onClick:t[8]||(t[8]=(0,i.iM)((t=>e.$emit("search",{artist:e.track.artist})),["prevent"]))},null,8,be)])):(0,l.kq)("",!0),e.track.album?((0,l.wg)(),(0,l.iD)("div",De,[(0,l._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(e.track.album),onClick:t[9]||(t[9]=(0,i.iM)((t=>e.$emit("search",{artist:e.track.artist,album:e.track.album})),["prevent"]))},null,8,Te)])):(0,l.kq)("",!0)]),(0,l._)("div",xe,[(0,l._)("span",{class:"duration",textContent:(0,a.zw)(e.track.time?e.convertTime(e.track.time):"-:--")},null,8,$e),(0,l._)("span",Pe,[(0,l.Wm)(u,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Play","icon-class":"fa fa-play",onClick:t=>e.$emit("play",{pos:c})},null,8,["onClick"]),(0,l.Wm)(d,{text:"Add to playlist","icon-class":"fa fa-list-ul",onClick:t[10]||(t[10]=t=>e.$emit("add-to-playlist",e.track))}),(0,l.Wm)(d,{text:"Remove","icon-class":"fa fa-trash",onClick:t=>e.$emit("remove",[...new Set([...n.selectedTracks,c])])},null,8,["onClick"]),(0,l.Wm)(d,{text:"Info","icon-class":"fa fa-info",onClick:t=>e.$emit("info",s.tracks[c])},null,8,["onClick"])])),_:2},1024)])])],42,ge)))),128))],544)]))}s(7658);const Ae={class:"header"};function Ie(e,t,s,a,i,c){return(0,l.wg)(),(0,l.iD)("div",Ae,[(0,l.WI)(e.$slots,"default",{},void 0,!0)])}var Re={name:"Header"};const qe=(0,G.Z)(Re,[["render",Ie],["__scopeId","data-v-7e4bd102"]]);var Me=qe,Le=s(2787),We=s(815),ze={name:"Playlist",mixins:[se.Z],components:{DropdownItem:We.Z,Dropdown:Le.Z,MusicHeader:Me,Loading:ee.Z},emits:["play","clear","add","remove","swap","search","move","save","info","refresh-status","select-device"],props:{tracks:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},status:{type:Object,default:()=>{}},devices:{type:Object},selectedDevice:{type:String},activeDevice:{type:String},maxVisibleTracks:{type:Number,default:100}},data(){return{selectionMode:!1,selectedTracks:[],filter:"",infoTrack:null,sourcePos:null,targetPos:null,centerPos:0,mounted:!1}},computed:{selectedTracksSet(){return new Set(this.selectedTracks)},trackIndicesByToken(){const e={};return this.tracks.forEach(((t,s)=>{const l=[t?.artist,t?.album,t?.title].filter((e=>e?.trim()?.length)).map((e=>e.trim().toLowerCase())).join(" ");e[l]||(e[l]=new Set),e[l].add(s)})),e},displayedTrackIndices(){let e=[...Array(this.tracks.length).keys()];if(this.filter?.length){const t=this.filter?.trim()?.replace(/\s+/g," ").toLowerCase(),s=new Set;Object.entries(this.trackIndicesByToken).forEach((([e,l])=>{e.indexOf(t)<0||s.add(...l)})),e=[...s],e.sort()}if(e.length>this.maxVisibleTracks){const t=Math.max(0,this.centerPos-Math.floor(this.maxVisibleTracks/2));e=e.slice(t,t+this.maxVisibleTracks)}return e}},methods:{onTrackClick(e,t){if(e.shiftKey){const e=this.selectedTracks.sort();e.length?t<e[0]?this.selectedTracks=[...this.selectedTracks,...[...Array(e[0]-t).keys()].map((e=>e+t))]:t>e[e.length-1]&&(this.selectedTracks=[...this.selectedTracks,...[...Array(t-e[e.length-1]+1).keys()].map((t=>t+e[e.length-1]))]):this.selectedTracks=[t]}else{const s=this.selectedTracks.indexOf(t);this.selectionMode||e.ctrlKey?s>=0?this.selectedTracks.splice(s,1):this.selectedTracks.push(t):this.selectedTracks=s>=0?[]:[t]}},trackClass(e){return{selected:this.selectedTracksSet.has(e),active:this.status?.playingPos===e}},addTrack(){const e=prompt("Item path or URL");e?.length&&this.$emit("add",e)},onTrackDragStart(e){this.sourcePos=e},onTrackDragEnd(){this.$refs.body.querySelectorAll(".track").forEach((e=>e.classList.remove("dragover"))),null!=this.sourcePos&&null!=this.targetPos&&this.sourcePos!==this.targetPos&&(this.$emit("move",{from:this.sourcePos,to:this.targetPos}),this.sourcePos=null,this.targetPos=null)},onTrackDragOver(e){this.targetPos=e;const t=this.$refs.body.querySelectorAll(".track");t.forEach((e=>e.classList.remove("dragover"))),[...t][e].classList.add("dragover")},onScroll(){const e=this.$refs.body.scrollTop,t=parseFloat(getComputedStyle(this.$refs.body).height),s=this.$refs.body.scrollHeight;e<5?this.centerPos=Math.max(0,parseInt(this.centerPos-this.maxVisibleTracks/1.5)):e===s-t&&(this.centerPos=Math.min(this.tracks.length-1,parseInt(this.centerPos+this.maxVisibleTracks/1.5)))},playlistSave(){const e=prompt("Playlist name");e?.length&&this.$emit("save",e)},scrollToTrack(e){this.centerPos=e||this.status?.playingPos||0,this.$nextTick((()=>{this.$refs.body?([...this.$refs.body.querySelectorAll(".track")].filter((e=>e.classList.contains("active"))).forEach((e=>e.scrollIntoView({block:"center",behavior:"smooth"}))),this.mounted=!0):this.$watch((()=>this.$refs.body),(()=>{this.mounted||this.scrollToTrack(e)}))}))}},mounted(){this.scrollToTrack(),this.$watch((()=>this.status),(()=>this.scrollToTrack())),this.$watch((()=>this.filter),(e=>{e?.length||this.scrollToTrack()}))}};const Ve=(0,G.Z)(ze,[["render",Se],["__scopeId","data-v-4badd225"]]);var je=Ve;const Ee=e=>((0,l.dD)("data-v-f5b35e0a"),e=e(),(0,l.Cn)(),e),Oe={key:1,class:"editor-container fade-in"},Fe={class:"header-container"},Ne={class:"col-8 filter"},Ze=Ee((()=>(0,l._)("i",{class:"fas fa-arrow-left"},null,-1))),He=[Ze],Ke={class:"search-box"},Ue={class:"col-4 buttons pull-right"},Ye=Ee((()=>(0,l._)("i",{class:"fa fa-sync"},null,-1))),Be=[Ye],Qe=Ee((()=>(0,l._)("i",{class:"fas fa-plus"},null,-1))),Ge=[Qe],Je={class:"editor",ref:"editor"},Xe={key:0,class:"no-content"},et=["onDragstart","onDragend","onDragover","onClick","onDblclick"],tt={class:"col-10"},st={class:"title"},lt={key:0,class:"artist"},at=["href","textContent","onClick"],it={key:1,class:"album"},ct=["href","textContent","onClick"],nt={class:"col-2 right-side"},ot=["textContent"],rt={class:"actions"},dt={key:2,class:"playlists fade-in"},ut={class:"header-container"},ht={class:"col-8 filter"},kt={class:"col-4 buttons"},pt=Ee((()=>(0,l._)("i",{class:"fa fa-sync"},null,-1))),yt=[pt],mt={class:"body",ref:"body"},ft={key:0,class:"no-content"},vt=["onClick","onDblclick"],gt={class:"col-10"},wt=["textContent"],Ct={class:"col-2 right-side"},_t={class:"actions"};function bt(e,t,s,c,n,o){const r=(0,l.up)("Loading"),d=(0,l.up)("DropdownItem"),u=(0,l.up)("Dropdown"),h=(0,l.up)("MusicHeader");return s.loading?((0,l.wg)(),(0,l.j4)(r,{key:0})):null!=s.editedPlaylist?((0,l.wg)(),(0,l.iD)("div",Oe,[(0,l._)("div",Fe,[(0,l.Wm)(h,{ref:"header"},{default:(0,l.w5)((()=>[(0,l._)("div",Ne,[(0,l._)("button",{class:"back-btn",title:"Back",onClick:t[0]||(t[0]=t=>e.$emit("playlist-edit",null))},He),(0,l._)("label",Ke,[(0,l.wy)((0,l._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[1]||(t[1]=e=>n.trackFilter=e)},null,512),[[i.nr,n.trackFilter]])])]),(0,l._)("div",Ue,[Object.keys(s.devices||{}).length?((0,l.wg)(),(0,l.j4)(u,{key:0,title:"Players","icon-class":"fa fa-volume-up"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.devices,((t,i)=>((0,l.wg)(),(0,l.j4)(d,{key:i,textContent:(0,a.zw)(t.name),"item-class":{active:s.activeDevice===i,selected:s.selectedDevice===i},"icon-class":"fa fa-volume-up",onClick:t=>e.$emit("select-device",i)},null,8,["textContent","item-class","onClick"])))),128))])),_:1})):(0,l.kq)("",!0),null!=s.devices?((0,l.wg)(),(0,l.iD)("button",{key:1,title:"Refresh status",onClick:t[2]||(t[2]=t=>e.$emit("refresh-status"))},Be)):(0,l.kq)("",!0),(0,l._)("button",{class:"add-btn",title:"Add track",onClick:t[3]||(t[3]=(...e)=>o.addTrack&&o.addTrack(...e))},Ge)])])),_:1},512)]),(0,l._)("div",Je,[s.tracks?.length?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Xe," No tracks found ")),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.tracks,((t,c)=>((0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(["row track",{selected:o.selectedTracksSet.has(c),active:e.status?.playingPos===c,hidden:!o.displayedTracks.has(c)}]),draggable:"true",key:c,onDragstart:e=>o.onTrackDragStart(c),onDragend:e=>o.onTrackDragEnd(c),onDragover:e=>o.onTrackDragOver(c),onClick:e=>o.onTrackClick(e,c),onDblclick:t=>e.$emit("load-track",{pos:c,play:!0})},[(0,l._)("div",tt,[(0,l._)("div",st,(0,a.zw)(t.title||"[No Title]"),1),t.artist?((0,l.wg)(),(0,l.iD)("div",lt,[(0,l._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(t.artist),onClick:(0,i.iM)((s=>e.$emit("search",{artist:t.artist})),["prevent"])},null,8,at)])):(0,l.kq)("",!0),t.album?((0,l.wg)(),(0,l.iD)("div",it,[(0,l._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(t.album),onClick:(0,i.iM)((s=>e.$emit("search",{artist:t.artist,album:t.album})),["prevent"])},null,8,ct)])):(0,l.kq)("",!0)]),(0,l._)("div",nt,[(0,l._)("span",{class:"duration",textContent:(0,a.zw)(t.time?e.convertTime(t.time):"-:--")},null,8,ot),(0,l._)("span",rt,[(0,l.Wm)(u,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Play","icon-class":"fa fa-play",onClick:t=>e.$emit("load-track",{pos:c,play:!0})},null,8,["onClick"]),(0,l.Wm)(d,{text:"Add to queue","icon-class":"fa fa-plus",onClick:t=>e.$emit("load-track",{pos:c,play:!1})},null,8,["onClick"]),(0,l.Wm)(d,{text:"Add to playlist","icon-class":"fa fa-list-ul",onClick:s=>e.$emit("add-to-playlist",t)},null,8,["onClick"]),(0,l.Wm)(d,{text:"Remove","icon-class":"fa fa-trash",onClick:t=>e.$emit("remove-track",[...new Set([...n.selectedTracks,c])])},null,8,["onClick"]),(0,l.Wm)(d,{text:"Info","icon-class":"fa fa-info",onClick:(0,i.iM)((t=>e.$emit("info",s.tracks[c])),["stop"])},null,8,["onClick"])])),_:2},1024)])])],42,et)))),128))],512)])):((0,l.wg)(),(0,l.iD)("div",dt,[(0,l._)("div",ut,[(0,l.Wm)(h,{ref:"header"},{default:(0,l.w5)((()=>[(0,l._)("div",ht,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[4]||(t[4]=e=>n.filter=e)},null,512),[[i.nr,n.filter]])])]),(0,l._)("div",kt,[Object.keys(s.devices||{}).length?((0,l.wg)(),(0,l.j4)(u,{key:0,title:"Players","icon-class":"fa fa-volume-up"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.devices,((t,i)=>((0,l.wg)(),(0,l.j4)(d,{key:i,textContent:(0,a.zw)(t.name),"item-class":{active:s.activeDevice===i,selected:s.selectedDevice===i},"icon-class":"fa fa-volume-up",onClick:t=>e.$emit("select-device",i)},null,8,["textContent","item-class","onClick"])))),128))])),_:1})):(0,l.kq)("",!0),null!=s.devices?((0,l.wg)(),(0,l.iD)("button",{key:1,title:"Refresh status",onClick:t[5]||(t[5]=t=>e.$emit("refresh-status"))},yt)):(0,l.kq)("",!0)])])),_:1},512)]),(0,l._)("div",mt,[s.playlists?.length?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",ft," No playlists found ")),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.playlists,((t,s)=>((0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(["row playlist",{hidden:!o.displayedPlaylists.has(s)}]),key:s,onClick:t=>e.$emit("playlist-edit",s),onDblclick:t=>e.$emit("load",s)},[(0,l._)("div",gt,[(0,l._)("div",{class:"name",textContent:(0,a.zw)(t.name||"[No Name]")},null,8,wt)]),(0,l._)("div",Ct,[(0,l._)("span",_t,[(0,l.Wm)(u,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Play","icon-class":"fa fa-play",onClick:(0,i.iM)((t=>e.$emit("play",s)),["stop"])},null,8,["onClick"]),(0,l.Wm)(d,{text:"Load","icon-class":"fa fa-list-ul",onClick:(0,i.iM)((t=>e.$emit("load",s)),["stop"])},null,8,["onClick"]),(0,l.Wm)(d,{text:"Edit","icon-class":"fa fa-edit",onClick:(0,i.iM)((t=>e.$emit("playlist-edit",s)),["stop"])},null,8,["onClick"]),(0,l.Wm)(d,{text:"Remove","icon-class":"fa fa-trash",onClick:(0,i.iM)((t=>e.$emit("remove",s)),["stop"])},null,8,["onClick"])])),_:2},1024)])])],42,vt)))),128))],512)]))}var Dt={name:"Playlists",mixins:[se.Z],components:{DropdownItem:We.Z,Dropdown:Le.Z,MusicHeader:Me,Loading:ee.Z},emits:["play","load","remove","playlist-edit","search","remove-track","load-track","info","playlist-add","add-to-playlist","track-move","refresh-status","select-device"],props:{playlists:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},tracks:{type:Array,default:()=>[]},editedPlaylist:{type:Number},devices:{type:Object},selectedDevice:{type:String},activeDevice:{type:String}},data(){return{selectedTracks:[],filter:"",trackFilter:"",sourcePos:null,targetPos:null}},computed:{selectedTracksSet(){return new Set(this.selectedTracks)},displayedPlaylists(){const e=[...Array(this.playlists.length).keys()];if(!this.filter?.length)return new Set(e);const t=this,s=(t.filter||"").toLowerCase();return new Set(e.filter((e=>{const t=this.playlists[e];return(t?.name||"").toLowerCase().indexOf(s)>=0})))},displayedTracks(){const e=[...Array(this.tracks.length).keys()];if(!this.trackFilter?.length)return new Set(e);const t=this,s=(t.trackFilter||"").toLowerCase();return new Set(e.filter((e=>{const t=this.tracks[e];return(t?.artist||"").toLowerCase().indexOf(s)>=0||(t?.title||"").toLowerCase().indexOf(s)>=0||(t?.album||"").toLowerCase().indexOf(s)>=0})))}},methods:{onTrackClick(e,t){if(e.shiftKey){const e=this.selectedTracks.sort();e.length?t<e[0]?this.selectedTracks=[...this.selectedTracks,...[...Array(e[0]-t).keys()].map((e=>e+t))]:t>e[e.length-1]&&(this.selectedTracks=[...this.selectedTracks,...[...Array(t-e[e.length-1]+1).keys()].map((t=>t+e[e.length-1]))]):this.selectedTracks=[t]}else{const s=this.selectedTracks.indexOf(t);e.ctrlKey?s>=0?this.selectedTracks.splice(s,1):this.selectedTracks.push(t):this.selectedTracks=s>=0?[]:[t]}},addTrack(){const e=prompt("Track path or URL");e?.length&&this.$emit("playlist-add",e)},onTrackDragStart(e){this.sourcePos=e},onTrackDragEnd(){this.$refs.editor.querySelectorAll(".track").forEach((e=>e.classList.remove("dragover"))),null!=this.sourcePos&&null!=this.targetPos&&this.sourcePos!==this.targetPos&&(this.$emit("track-move",{from:this.sourcePos,to:this.targetPos,playlist:this.editedPlaylist}),this.sourcePos=null,this.targetPos=null)},onTrackDragOver(e){this.targetPos=e;const t=this.$refs.editor.querySelectorAll(".track");t.forEach((e=>e.classList.remove("dragover"))),[...t][e].classList.add("dragover")}}};const Tt=(0,G.Z)(Dt,[["render",bt],["__scopeId","data-v-f5b35e0a"]]);var xt=Tt;const $t=e=>((0,l.dD)("data-v-9ff27196"),e=e(),(0,l.Cn)(),e),Pt={class:"search-form"},St={class:"row"},At={class:"row"},It={class:"row"},Rt={class:"row"},qt=$t((()=>(0,l._)("i",{class:"icon fa fa-times"},null,-1))),Mt=$t((()=>(0,l._)("span",{class:"btn-title"},"Clear",-1))),Lt=[qt,Mt],Wt=$t((()=>(0,l._)("button",{type:"submit"},[(0,l._)("i",{class:"icon fa fa-search"}),(0,l._)("span",{class:"btn-title"},"Search")],-1))),zt={class:"search-box"},Vt={class:"buttons"},jt=$t((()=>(0,l._)("i",{class:"icon fa fa-times"},null,-1))),Et=$t((()=>(0,l._)("span",{class:"btn-title"},"Clear",-1))),Ot=[jt,Et],Ft={class:"results"},Nt=["onClick"],Zt={class:"col-10"},Ht={class:"title"},Kt=["textContent"],Ut=["textContent"],Yt={class:"col-2 right-side"},Bt=["textContent"],Qt={class:"actions"};function Gt(e,t,s,c,n,o){const r=(0,l.up)("FormFooter"),d=(0,l.up)("MusicHeader"),u=(0,l.up)("DropdownItem"),h=(0,l.up)("Dropdown");return(0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(["search fade-in",{"form-collapsed":o.formCollapsed}])},[o.formCollapsed?((0,l.wg)(),(0,l.j4)(d,{key:1},{default:(0,l.w5)((()=>[(0,l._)("label",zt,[(0,l.wy)((0,l._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[6]||(t[6]=e=>n.filter=e)},null,512),[[i.nr,n.filter]])]),(0,l._)("span",Vt,[(0,l._)("button",{onClick:t[7]||(t[7]=(...e)=>o.clear&&o.clear(...e))},Ot)])])),_:1})):((0,l.wg)(),(0,l.iD)("div",{key:0,class:"form-container",onSubmit:t[5]||(t[5]=(0,i.iM)((t=>e.$emit("search",o.filteredQuery)),["prevent"]))},[(0,l._)("form",Pt,[(0,l._)("div",St,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Any","onUpdate:modelValue":t[0]||(t[0]=e=>n.query.any=e)},null,512),[[i.nr,n.query.any]])])]),(0,l._)("div",At,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Artist","onUpdate:modelValue":t[1]||(t[1]=e=>n.query.artist=e)},null,512),[[i.nr,n.query.artist]])])]),(0,l._)("div",It,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Title","onUpdate:modelValue":t[2]||(t[2]=e=>n.query.title=e)},null,512),[[i.nr,n.query.title]])])]),(0,l._)("div",Rt,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Album","onUpdate:modelValue":t[3]||(t[3]=e=>n.query.album=e)},null,512),[[i.nr,n.query.album]])])]),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l._)("button",{onClick:t[4]||(t[4]=(...e)=>o.clear&&o.clear(...e))},Lt),Wt])),_:1})])],32)),(0,l._)("div",Ft,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.results,((t,s)=>((0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(["row track",{selected:n.selectedResults.has(s),hidden:!o.displayedTracks.has(s)}]),key:s,onClick:e=>o.resultClick(s,e)},[(0,l._)("div",Zt,[(0,l._)("div",Ht,(0,a.zw)(t.title||"[No Title]"),1),t.artist?.length?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"artist",textContent:(0,a.zw)(t.artist)},null,8,Kt)):(0,l.kq)("",!0),t.album?.length?((0,l.wg)(),(0,l.iD)("div",{key:1,class:"album",textContent:(0,a.zw)(t.album)},null,8,Ut)):(0,l.kq)("",!0)]),(0,l._)("div",Yt,[(0,l._)("span",{class:"duration",textContent:(0,a.zw)(t.time&&parseInt(t.time)?e.convertTime(t.time):"-:--")},null,8,Bt),(0,l._)("span",Qt,[(0,l.Wm)(h,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{text:"Play","icon-class":"fa fa-play",onClick:e=>o.play(s)},null,8,["onClick"]),(0,l.Wm)(u,{text:"Add to queue","icon-class":"fa fa-plus",onClick:e=>o.load(s)},null,8,["onClick"]),(0,l.Wm)(u,{text:"Add to playlist","icon-class":"fa fa-list-ul",onClick:s=>e.$emit("add-to-playlist",t)},null,8,["onClick"]),(0,l.Wm)(u,{text:"Info","icon-class":"fa fa-info",onClick:s=>e.$emit("info",t)},null,8,["onClick"])])),_:2},1024)])])],10,Nt)))),128))])],2)}var Jt={name:"Search",components:{Dropdown:Le.Z,DropdownItem:We.Z,FormFooter:X,MusicHeader:Me},mixins:[se.Z],emits:["search","clear","play","load","add-to-playlist","info","refresh-status","select-device"],props:{loading:{type:Boolean,default:!1},results:{type:Array},devices:{type:Object},selectedDevice:{type:String},activeDevice:{type:String}},data(){return{selectedResults:new Set,filter:"",query:{any:"",artist:"",title:"",album:""}}},computed:{formCollapsed(){return this.results?.length>0},filteredQuery(){return Object.entries(this.query).filter((e=>e[1]?.length)).reduce(((e,[t,s])=>(e[t]=s,e)),{})},displayedTracks(){return new Set([...Array(this.results?.length||0).keys()].filter((e=>{const t=this.results[e];if(!this.filter?.length)return t;const s=this.filter.toLowerCase();return(t?.artist||"").toLowerCase().indexOf(s)>=0||(t?.title||"").toLowerCase().indexOf(s)>=0||(t?.album||"").toLowerCase().indexOf(s)>=0})))}},methods:{clear(){this.$emit("clear"),this.selectedResults=new Set},resultClick(e,t){if(t.shiftKey){if(this.selectedResults.size>0&&!this.selectedResults.has(e)){const t=[...this.selectedResults],s=Math.min(Math.min(t),e),l=Math.max(Math.max(t),e);this.selectedResults=new Set([...Array(l-s+1).keys()].map((e=>e+s)))}}else t.ctrlKey||(this.selectedResults=new Set),this.selectedResults.has(e)?this.selectedResults.delete(e):this.selectedResults.add(e)},play(e){this.$emit("play",this.results[e]),this.selectedResults.size&&this.selectedResults.forEach((e=>{this.$emit("load",e)}))},load(e){this.selectedResults.has(e)||this.selectedResults.add(e),this.selectedResults.forEach((e=>{this.$emit("load",this.results[e])}))}}};const Xt=(0,G.Z)(Jt,[["render",Gt],["__scopeId","data-v-9ff27196"]]);var es=Xt;const ts=e=>((0,l.dD)("data-v-74e2a8c9"),e=e(),(0,l.Cn)(),e),ss={class:"library fade-in"},ls={class:"search-box"},as={class:"results"},is=ts((()=>(0,l._)("div",{class:"icon-container"},[(0,l._)("i",{class:"icon fa fa-folder"})],-1))),cs=ts((()=>(0,l._)("div",{class:"result-container"},[(0,l._)("div",{class:"title"},"..")],-1))),ns=[is,cs],os=["onClick"],rs={class:"col-10 left-side"},ds={class:"icon-container"},us={key:0,class:"icon fa fa-folder"},hs={key:1,class:"icon fa fa-music"},ks={class:"info"},ps={class:"title"},ys=["textContent"],ms=["textContent"],fs={class:"artist-album"},vs=["textContent"],gs=["textContent"],ws={class:"col-2 right-side"},Cs=["textContent"],_s={class:"actions"};function bs(e,t,s,c,n,o){const r=(0,l.up)("Loading"),d=(0,l.up)("MusicHeader"),u=(0,l.up)("DropdownItem"),h=(0,l.up)("Dropdown");return(0,l.wg)(),(0,l.iD)("div",ss,[s.loading?((0,l.wg)(),(0,l.j4)(r,{key:0})):(0,l.kq)("",!0),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l._)("label",ls,[(0,l.wy)((0,l._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[0]||(t[0]=e=>n.filter=e)},null,512),[[i.nr,n.filter]])])])),_:1}),(0,l._)("div",as,["/"!==s.path?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"row track back-track",onClick:t[1]||(t[1]=(...e)=>o.back&&o.back(...e))},ns)):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.results,((t,s)=>((0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(["row track",{selected:n.selectedResults.has(s),hidden:!o.displayedResults.has(s)}]),key:s,onClick:e=>o.resultClick(s,e)},[(0,l._)("div",rs,[(0,l._)("div",ds,[t.directory?((0,l.wg)(),(0,l.iD)("i",us)):t.file?((0,l.wg)(),(0,l.iD)("i",hs)):(0,l.kq)("",!0)]),(0,l._)("div",ks,[(0,l._)("div",ps,[t.directory?((0,l.wg)(),(0,l.iD)("span",{key:0,textContent:(0,a.zw)(t.directory.split("/").pop())},null,8,ys)):t.title?((0,l.wg)(),(0,l.iD)("span",{key:1,textContent:(0,a.zw)(t.title)},null,8,ms)):(0,l.kq)("",!0)]),(0,l._)("div",fs,[t.artist?.length?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"artist",textContent:(0,a.zw)(t.artist)},null,8,vs)):(0,l.kq)("",!0),t.album?.length?((0,l.wg)(),(0,l.iD)("div",{key:1,class:"album",textContent:(0,a.zw)(t.album)},null,8,gs)):(0,l.kq)("",!0)])])]),(0,l._)("div",ws,[(0,l._)("span",{class:"duration",textContent:(0,a.zw)(t.time&&parseInt(t.time)?e.convertTime(t.time):"-:--")},null,8,Cs),(0,l._)("span",_s,[(0,l.Wm)(h,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{text:"Play","icon-class":"fa fa-play",onClick:e=>o.play(s)},null,8,["onClick"]),(0,l.Wm)(u,{text:"Add to queue","icon-class":"fa fa-plus",onClick:e=>o.load(s)},null,8,["onClick"]),(0,l.Wm)(u,{text:"Add to playlist","icon-class":"fa fa-list-ul",onClick:s=>e.$emit("add-to-playlist",t)},null,8,["onClick"]),(0,l.Wm)(u,{text:"Info","icon-class":"fa fa-info",onClick:s=>e.$emit("info",t)},null,8,["onClick"])])),_:2},1024)])])],10,os)))),128))])])}var Ds={name:"Library",components:{Dropdown:Le.Z,DropdownItem:We.Z,MusicHeader:Me,Loading:ee.Z},mixins:[se.Z],emits:["search","play","load","add-to-playlist","info","cd","refresh-status","select-device"],props:{loading:{type:Boolean,default:!1},results:{type:Array},path:{type:String},devices:{type:Object},selectedDevice:{type:String},activeDevice:{type:String}},data(){return{selectedResults:new Set,filter:"",query:{any:"",artist:"",title:"",album:""}}},computed:{displayedResults(){return new Set([...Array(this.results?.length||0).keys()].filter((e=>{const t=this.results[e];if(!this.filter?.length)return t;const s=this.filter.toLowerCase();return(t?.artist||"").toLowerCase().indexOf(s)>=0||(t?.title||"").toLowerCase().indexOf(s)>=0||(t?.album||"").toLowerCase().indexOf(s)>=0||(t?.directory||"").toLowerCase().indexOf(s)>=0})))}},methods:{resultClick(e,t){if(t.shiftKey){if(this.selectedResults.size>0&&!this.selectedResults.has(e)){const t=[...this.selectedResults],s=Math.min(Math.min(t),e),l=Math.max(Math.max(t),e);this.selectedResults=new Set([...Array(l-s+1).keys()].map((e=>e+s)))}}else t.ctrlKey?this.selectedResults.has(e)?this.selectedResults.delete(e):this.selectedResults.add(e):this.results[e].directory?this.$emit("cd",this.results[e].directory):(this.selectedResults=new Set,this.selectedResults.has(e)?this.selectedResults.delete(e):this.selectedResults.add(e))},play(e){this.$emit("play",this.results[e]),this.selectedResults.size&&this.selectedResults.forEach((e=>{this.$emit("load",e)}))},load(e){this.selectedResults.has(e)||this.selectedResults.add(e),this.selectedResults.forEach((e=>{this.$emit("load",this.results[e])}))},back(){const e=this.path.split("/");this.$emit("cd",e.slice(0,e.length-1).join("/"))}}};const Ts=(0,G.Z)(Ds,[["render",bs],["__scopeId","data-v-74e2a8c9"]]);var xs=Ts,$s=s(8637),Ps={name:"Music",emits:["add-to-playlist","add-to-tracklist","add-to-tracklist-from-edited-playlist","cd","clear","consume","info","load-playlist","new-playing-track","next","pause","play","play-playlist","playlist-add","playlist-edit","playlist-track-move","playlist-update","previous","random","refresh-status","remove-from-playlist","remove-from-tracklist","remove-playlist","repeat","search","search-clear","seek","select-device","set-volume","status-update","stop","swap-tracks","tracklist-move","tracklist-save"],mixins:[$s.Z,se.Z],components:{Loading:ee.Z,Modal:te.Z,Nav:oe,MediaView:le.Z,Playlist:je,Playlists:xt,FormFooter:X,Search:es,Library:xs},props:{pluginName:{type:String,required:!0},loading:{type:Boolean,default:!1},config:{type:Object,default:()=>{}},tracks:{type:Array,default:()=>[]},editedPlaylistTracks:{type:Array,default:()=>[]},playlists:{type:Array,default:()=>[]},status:{type:Object,default:()=>{}},editedPlaylist:{type:Number},trackInfo:{type:String},searchResults:{type:Array},libraryResults:{type:Array},path:{type:String},devices:{type:Object},activeDevice:{type:String},selectedDevice:{type:String}},data(){return{selectedView:"playing",selectedPlaylists:[],addToPlaylistTrack:null,playlistFilter:""}},computed:{track(){return null==this.status?.playingPos?null:this.tracks[this.status.playingPos]}},methods:{async onStatusEvent(e){e.plugin_name===this.pluginName&&this.$emit("status-update",e)},async onPlaylistEvent(e){e.plugin_name===this.pluginName&&this.$emit("playlist-update",e)},async onNewPlayingTrack(e){e.plugin_name===this.pluginName&&(this.notify({html:`<b>${e.track?.artist}</b><br>${e.track?.title}`,image:{iconClass:"fa fa-play"}}),this.$emit("new-playing-track",e))},async openAddToPlaylist(e){this.addToPlaylistTrack=e,this.$refs.playlistsModal.isVisible=!0},async addToPlaylist(){this.$emit("add-to-playlist",{track:this.addToPlaylistTrack,playlists:[...Array(this.selectedPlaylists.length).keys()].filter((e=>this.selectedPlaylists[e]))}),this.$refs.playlistsModal.isVisible=!1,this.addToPlaylistTrack=null,this.playlistFilter=""},async search(e){this.$emit("search",e),this.$refs.trackInfo.isVisible=!1,this.selectedView="search"},selectDevice(e){this.$emit("select-device",e)},refreshStatus(){this.$emit("refresh-status")}},mounted(){this.subscribe(this.onStatusEvent,"on-status-update","platypush.message.event.music.MusicPlayEvent","platypush.message.event.music.MusicPauseEvent","platypush.message.event.music.MusicStopEvent","platypush.message.event.music.SeekChangeEvent","platypush.message.event.music.VolumeChangeEvent","platypush.message.event.music.MuteChangeEvent","platypush.message.event.music.PlaybackRepeatModeChangeEvent","platypush.message.event.music.PlaybackRandomModeChangeEvent","platypush.message.event.music.PlaybackConsumeModeChangeEvent","platypush.message.event.music.PlaybackSingleModeChangeEvent"),this.subscribe(this.onPlaylistEvent,"on-playlist-update","platypush.message.event.music.PlaylistChangeEvent"),this.subscribe(this.onNewPlayingTrack,"on-new-playing-track","platypush.message.event.music.NewPlayingTrackEvent"),this.$watch((()=>this.trackInfo),(e=>{null!=e&&(this.$refs.trackInfo.isVisible=!0)}))},unmounted(){this.unsubscribe("on-status-update"),this.unsubscribe("on-playlist-update")}};const Ss=(0,G.Z)(Ps,[["render",U],["__scopeId","data-v-e009e590"]]);var As=Ss}}]);
//# sourceMappingURL=8853.ff35c2fb.js.map