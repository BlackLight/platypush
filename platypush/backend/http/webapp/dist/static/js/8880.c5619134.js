"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[8880],{8337:function(t,e,s){s.d(e,{Z:function(){return o}});var a=s(2628),n={name:"Utils",mixins:[a.Z],computed:{audioExtensions(){return new Set(["3gp","aa","aac","aax","act","aiff","amr","ape","au","awb","dct","dss","dvf","flac","gsm","iklax","ivs","m4a","m4b","m4p","mmf","mp3","mpc","msv","nmf","nsf","ogg,","opus","ra,","raw","sln","tta","vox","wav","wma","wv","webm","8svx"])},videoExtensions(){return new Set(["webm","mkv","flv","flv","vob","ogv","ogg","drc","gif","gifv","mng","avi","mts","m2ts","mov","qt","wmv","yuv","rm","rmvb","asf","amv","mp4","m4p","m4v","mpg","mp2","mpeg","mpe","mpv","mpg","mpeg","m2v","m4v","svi","3gp","3g2","mxf","roq","nsv","flv","f4v","f4p","f4a","f4b"])},mediaExtensions(){return new Set([...this.videoExtensions,...this.audioExtensions])}},methods:{convertTime(t){t=parseFloat(t);const e={};e.h=""+parseInt(t/3600),e.m=""+parseInt(t/60-60*e.h),e.s=""+parseInt(t-(3600*e.h+60*e.m));for(const a of["m","s"])parseInt(e[a])<10&&(e[a]="0"+e[a]);const s=[];return parseInt(e.h)&&s.push(e.h),s.push(e.m,e.s),s.join(":")},async startStreaming(t,e=!1){let s=t,a=null;t instanceof Object?(s=t.url,a=t.subtitles):t={url:s};const n=await this.request("media.start_streaming",{media:s,subtitles:a,download:e});return{...t,...n}},async stopStreaming(t){await this.request("media.stop_streaming",{media_id:t})}}};const l=n;var o=l},6342:function(t,e,s){s.d(e,{Z:function(){return Lt}});var a=s(6252);const n={class:"media-container"},l={class:"view-container"},o={class:"controls-container"};function i(t,e,s,i,u,c){const r=(0,a.up)("Controls");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",l,[(0,a.WI)(t.$slots,"default",{},void 0,!0)]),(0,a._)("div",o,[(0,a.Wm)(r,{status:s.status,track:s.track,buttons:s.buttons,onPlay:e[0]||(e[0]=e=>t.$emit("play",e)),onPause:e[1]||(e[1]=e=>t.$emit("pause",e)),onStop:e[2]||(e[2]=e=>t.$emit("stop")),onPrevious:e[3]||(e[3]=e=>t.$emit("previous")),onNext:e[4]||(e[4]=e=>t.$emit("next")),onSeek:e[5]||(e[5]=e=>t.$emit("seek",e)),onSetVolume:e[6]||(e[6]=e=>t.$emit("set-volume",e)),onConsume:e[7]||(e[7]=e=>t.$emit("consume",e)),onRepeat:e[8]||(e[8]=e=>t.$emit("repeat",e)),onRandom:e[9]||(e[9]=e=>t.$emit("random",e)),onSearch:e[10]||(e[10]=e=>t.$emit("search",e))},null,8,["status","track","buttons"])])])}var u=s(3577),c=s(9963);const r=t=>((0,a.dD)("data-v-f179401e"),t=t(),(0,a.Cn)(),t),m={class:"row"},p=r((()=>(0,a._)("div",{class:"col-3"},null,-1))),d={class:"col-6"},v={class:"buttons"},k=r((()=>(0,a._)("i",{class:"icon fa fa-step-backward"},null,-1))),b=[k],f=r((()=>(0,a._)("i",{class:"icon fa fa-stop"},null,-1))),g=[f],_=r((()=>(0,a._)("i",{class:"icon fa fa-step-forward"},null,-1))),y=[_],w=r((()=>(0,a._)("div",{class:"col-3"},null,-1))),h={class:"row"},C={class:"col-9 volume-container"},x={class:"col-1"},$=["disabled"],D=r((()=>(0,a._)("i",{class:"icon fa fa-volume-up"},null,-1))),T=[D],q={class:"col-11 volume-slider"},S={class:"col-3 list-controls"},P=r((()=>(0,a._)("i",{class:"icon fa fa-utensils"},null,-1))),I=[P],Z=r((()=>(0,a._)("i",{class:"icon fa fa-random"},null,-1))),j=[Z],z=r((()=>(0,a._)("i",{class:"icon fa fa-redo"},null,-1))),M=[z],O={class:"row"},N={class:"col-s-2 col-m-1 time"},W=["textContent"],E={class:"col-s-8 col-m-10 time-bar"},R={class:"col-s-2 col-m-1 time"},A=["textContent"],B={class:"controls"},H={class:"playback-controls mobile tablet col-2"},L=["title"],V={key:0,class:"icon play-pause fa fa-pause"},F={key:1,class:"icon play-pause fa fa-play"},U={class:"track-container col-s-8 col-m-8 col-l-3"},Y={key:0,class:"track-info"},G={key:0,class:"title"},J=["href","textContent"],K=["href","textContent"],Q=["textContent"],X={key:1,class:"artist"},tt=["href","textContent"],et={class:"playback-controls desktop col-6"},st={class:"row buttons"},at=r((()=>(0,a._)("i",{class:"icon fa fa-step-backward"},null,-1))),nt=[at],lt=["title"],ot={key:0,class:"icon play-pause fa fa-pause"},it={key:1,class:"icon play-pause fa fa-play"},ut=r((()=>(0,a._)("i",{class:"icon fa fa-stop"},null,-1))),ct=[ut],rt=r((()=>(0,a._)("i",{class:"icon fa fa-step-forward"},null,-1))),mt=[rt],pt={class:"row"},dt={class:"col-1 time"},vt=["textContent"],kt={class:"col-10"},bt={class:"col-1 time"},ft=["textContent"],gt={class:"col-2 pull-right mobile tablet right-buttons"},_t=["title"],yt={class:"col-3 pull-right desktop"},wt={class:"row list-controls"},ht=r((()=>(0,a._)("i",{class:"icon fa fa-utensils"},null,-1))),Ct=[ht],xt=r((()=>(0,a._)("i",{class:"icon fa fa-random"},null,-1))),$t=[xt],Dt=r((()=>(0,a._)("i",{class:"icon fa fa-redo"},null,-1))),Tt=[Dt],qt={class:"row volume-container"},St={class:"col-2"},Pt=["disabled"],It=r((()=>(0,a._)("i",{class:"icon fa fa-volume-up"},null,-1))),Zt=[It],jt={class:"col-10"};function zt(t,e,s,n,l,o){const i=(0,a.up)("Slider");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,u.C_)(["extension fade-in",{hidden:!l.expanded}])},[(0,a._)("div",m,[p,(0,a._)("div",d,[(0,a._)("div",v,[l.buttons_.previous?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e[0]||(e[0]=e=>t.$emit("previous")),title:"Play previous track"},b)):(0,a.kq)("",!0),l.buttons_.stop&&"stop"!==s.status.state?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:e[1]||(e[1]=e=>t.$emit("stop")),title:"Stop playback"},g)):(0,a.kq)("",!0),l.buttons_.next?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:e[2]||(e[2]=e=>t.$emit("next")),title:"Play next track"},y)):(0,a.kq)("",!0)])]),w]),(0,a._)("div",h,[(0,a._)("div",C,[(0,a._)("div",x,[(0,a._)("button",{disabled:null==s.status.muted,onClick:e[3]||(e[3]=e=>t.$emit(s.status.muted?"unmute":"mute"))},T,8,$)]),(0,a._)("div",q,[(0,a.Wm)(i,{value:s.status.volume,range:s.volumeRange,disabled:null==s.status.volume,onMouseup:e[4]||(e[4]=e=>t.$emit("set-volume",e.target.value))},null,8,["value","range","disabled"])])]),(0,a._)("div",S,[l.buttons_.consume?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e[5]||(e[5]=e=>t.$emit("consume",!s.status.consume)),class:(0,u.C_)({enabled:s.status.consume}),title:"Toggle consume mode"},I,2)):(0,a.kq)("",!0),l.buttons_.random?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:e[6]||(e[6]=e=>t.$emit("random",!s.status.random)),class:(0,u.C_)({enabled:s.status.random}),title:"Toggle shuffle"},j,2)):(0,a.kq)("",!0),l.buttons_.repeat?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:e[7]||(e[7]=e=>t.$emit("repeat",!s.status.repeat)),class:(0,u.C_)({enabled:s.status.repeat}),title:"Toggle repeat"},M,2)):(0,a.kq)("",!0)])]),(0,a._)("div",O,[(0,a._)("div",N,[(0,a._)("span",{class:"elapsed-time",textContent:(0,u.zw)(null==l.elapsed||"play"!==s.status.state&&"pause"!==s.status.state?"-:--":t.convertTime(l.elapsed))},null,8,W)]),(0,a._)("div",E,[(0,a.Wm)(i,{value:l.elapsed,range:[0,o.duration],disabled:!o.duration||"stop"===s.status.state,onMouseup:e[8]||(e[8]=e=>t.$emit("seek",e.target.value))},null,8,["value","range","disabled"])]),(0,a._)("div",R,[(0,a._)("span",{class:"total-time",textContent:(0,u.zw)(o.duration&&"stop"!==s.status.state?t.convertTime(o.duration):"-:--")},null,8,A)])])],2),(0,a._)("div",B,[(0,a._)("div",H,[(0,a._)("button",{onClick:e[9]||(e[9]=e=>t.$emit("play"===s.status.state?"pause":"play")),title:"play"===s.status.state?"Pause":"Play"},["play"===s.status.state?((0,a.wg)(),(0,a.iD)("i",V)):((0,a.wg)(),(0,a.iD)("i",F))],8,L)]),(0,a._)("div",U,[s.track&&"stop"!==s.status?.state?((0,a.wg)(),(0,a.iD)("div",Y,["play"===s.status.state||"pause"===s.status.state?((0,a.wg)(),(0,a.iD)("div",G,[s.track.album?((0,a.wg)(),(0,a.iD)("a",{key:0,href:t.$route.fullPath,textContent:(0,u.zw)(s.track.title?.length?s.track.title:"[No Title]"),onClick:e[10]||(e[10]=(0,c.iM)((e=>t.$emit("search",{artist:s.track.artist,album:s.track.album})),["prevent"]))},null,8,J)):s.track.url?((0,a.wg)(),(0,a.iD)("a",{key:1,href:s.track.url,textContent:(0,u.zw)(s.track.title?.length?s.track.title:"[No Title]")},null,8,K)):((0,a.wg)(),(0,a.iD)("span",{key:2,textContent:(0,u.zw)(s.track.title?.length?s.track.title:"[No Title]")},null,8,Q))])):(0,a.kq)("",!0),!s.track.artist?.length||"play"!==s.status.state&&"pause"!==s.status.state?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",X,[(0,a._)("a",{href:t.$route.fullPath,textContent:(0,u.zw)(s.track.artist),onClick:e[11]||(e[11]=(0,c.iM)((e=>t.$emit("search",{artist:s.track.artist})),["prevent"]))},null,8,tt)]))])):(0,a.kq)("",!0)]),(0,a._)("div",et,[(0,a._)("div",st,[l.buttons_.previous?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e[12]||(e[12]=e=>t.$emit("previous")),title:"Play previous track"},nt)):(0,a.kq)("",!0),(0,a._)("button",{onClick:e[13]||(e[13]=e=>t.$emit("play"===s.status.state?"pause":"play")),title:"play"===s.status.state?"Pause":"Play"},["play"===s.status.state?((0,a.wg)(),(0,a.iD)("i",ot)):((0,a.wg)(),(0,a.iD)("i",it))],8,lt),l.buttons_.stop&&"stop"!==s.status.state?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:e[14]||(e[14]=e=>t.$emit("stop")),title:"Stop playback"},ct)):(0,a.kq)("",!0),l.buttons_.next?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:e[15]||(e[15]=e=>t.$emit("next")),title:"Play next track"},mt)):(0,a.kq)("",!0)]),(0,a._)("div",pt,[(0,a._)("div",dt,[(0,a._)("span",{class:"elapsed-time",textContent:(0,u.zw)(null==l.elapsed||"play"!==s.status.state&&"pause"!==s.status.state?"-:--":t.convertTime(l.elapsed))},null,8,vt)]),(0,a._)("div",kt,[(0,a.Wm)(i,{value:l.elapsed,range:[0,o.duration],disabled:!o.duration||"stop"===s.status.state,onMouseup:e[16]||(e[16]=e=>t.$emit("seek",e.target.value))},null,8,["value","range","disabled"])]),(0,a._)("div",bt,[(0,a._)("span",{class:"total-time",textContent:(0,u.zw)(o.duration&&"stop"!==s.status.state?t.convertTime(o.duration):"-:--")},null,8,ft)])])]),(0,a._)("div",gt,[(0,a._)("button",{onClick:e[17]||(e[17]=t=>l.expanded=!l.expanded),title:l.expanded?"Show more controls":"Hide extra controls"},[(0,a._)("i",{class:(0,u.C_)(["fas",["fa-chevron-"+(l.expanded?"down":"up")]])},null,2)],8,_t)]),(0,a._)("div",yt,[(0,a._)("div",wt,[l.buttons_.consume?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e[18]||(e[18]=e=>t.$emit("consume")),class:(0,u.C_)({enabled:s.status.consume}),title:"Toggle consume mode"},Ct,2)):(0,a.kq)("",!0),l.buttons_.random?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:e[19]||(e[19]=e=>t.$emit("random")),class:(0,u.C_)({enabled:s.status.random}),title:"Toggle shuffle"},$t,2)):(0,a.kq)("",!0),l.buttons_.repeat?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:e[20]||(e[20]=e=>t.$emit("repeat")),class:(0,u.C_)({enabled:s.status.repeat}),title:"Toggle repeat"},Tt,2)):(0,a.kq)("",!0)]),(0,a._)("div",qt,[(0,a._)("div",St,[(0,a._)("button",{disabled:null==s.status.muted,onClick:e[21]||(e[21]=e=>t.$emit(s.status.muted?"unmute":"mute"))},Zt,8,Pt)]),(0,a._)("div",jt,[(0,a.Wm)(i,{value:s.status.volume,range:s.volumeRange,disabled:null==s.status.volume,onMouseup:e[22]||(e[22]=e=>t.$emit("set-volume",e.target.value))},null,8,["value","range","disabled"])])])])])],64)}var Mt=s(2628),Ot=s(8337),Nt=s(542),Wt={name:"Controls",components:{Slider:Nt.Z},mixins:[Mt.Z,Ot.Z],emits:["search","previous","next","play","pause","stop","seek","consume","random","repeat","set-volume","mute","unmute"],props:{track:{type:Object},status:{type:Object,default:()=>{}},buttons:{type:Object,default:()=>({previous:!0,next:!0,stop:!0,consume:!0,random:!0,repeat:!0})},volumeRange:{type:Array,default:()=>[0,100]}},data(){const t=Object.keys(this.buttons)?.length?this.buttons:{previous:!0,next:!0,stop:!0,consume:!0,random:!0,repeat:!0};return{expanded:!1,lastSync:0,elapsed:this.status?.elapsed||this.status?.position,buttons_:t}},computed:{duration(){return null!=this.status?.duration?this.status.duration:this.track?.duration}},methods:{getTime(){return(new Date).getTime()/1e3}},mounted(){const t=this;this.lastSync=this.getTime(),this.$watch((()=>this.track),(e=>{e&&"play"===t.status?.state||(t.lastSync=this.getTime())})),this.$watch((()=>this.status),(()=>{t.lastSync=this.getTime()})),setInterval((()=>{"stop"!==t.status?.state&&(t.elapsed=t.status?.elapsed||t.status?.position||0,"play"===t.status?.state&&(t.elapsed+=Math.round(this.getTime()-t.lastSync)))}),1e3)}},Et=s(3744);const Rt=(0,Et.Z)(Wt,[["render",zt],["__scopeId","data-v-f179401e"]]);var At=Rt,Bt={name:"View",components:{Controls:At},emits:["play","pause","stop","next","previous","set-volume","seek","consume","random","repeat","search"],props:{pluginName:{type:String,required:!0},status:{type:Object,default:()=>{}},track:{type:Object},buttons:{type:Object}}};const Ht=(0,Et.Z)(Bt,[["render",i],["__scopeId","data-v-70d7a7df"]]);var Lt=Ht},542:function(t,e,s){s.d(e,{Z:function(){return m}});var a=s(6252),n=s(3577);const l=["min","max","value","disabled"],o=["textContent"];function i(t,e,s,i,u,c){return(0,a.wg)(),(0,a.iD)("label",null,[(0,a._)("input",{class:"slider",type:"range",min:s.range[0],max:s.range[1],value:s.value,disabled:s.disabled,onChange:e[0]||(e[0]=e=>t.$emit("input",e)),onMouseup:e[1]||(e[1]=e=>t.$emit("mouseup",e)),onInput:e[2]||(e[2]=e=>t.$emit("input",e)),onMousedown:e[3]||(e[3]=e=>t.$emit("mousedown",e)),onTouch:e[4]||(e[4]=e=>t.$emit("input",e)),onTouchstart:e[5]||(e[5]=e=>t.$emit("mousedown",e)),onTouchend:e[6]||(e[6]=e=>t.$emit("mouseup",e))},null,40,l),s.withLabel?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"label",textContent:(0,n.zw)(s.value)},null,8,o)):(0,a.kq)("",!0)])}var u={name:"Slider",emits:["input","mouseup","mousedown"],props:{value:{type:Number},disabled:{type:Boolean,default:!1},range:{type:Array,default:()=>[0,100]},withLabel:{type:Boolean,default:!1}}},c=s(3744);const r=(0,c.Z)(u,[["render",i],["__scopeId","data-v-1a18952e"]]);var m=r}}]);
//# sourceMappingURL=8880.c5619134.js.map
