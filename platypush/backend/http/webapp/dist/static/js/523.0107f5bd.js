"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[523],{523:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var s=n(6252),i=n(9963),o=n(3577);const a={class:"row plugin extensions-container"},l={class:"filter-container"},c=["disabled"],d={class:"items"},r={key:0,class:"extension"},u=["data-name","onClick","textContent"],p={key:0,class:"extension-body-container until tablet"},f={key:0,class:"extension-body-container from desktop"};function h(e,t,n,h,x,b){const m=(0,s.up)("Loading"),g=(0,s.up)("Extension");return(0,s.wg)(),(0,s.iD)("div",a,[x.loading?((0,s.wg)(),(0,s.j4)(m,{key:0})):(0,s.kq)("",!0),(0,s._)("header",null,[(0,s._)("div",l,[(0,s.wy)((0,s._)("input",{type:"text",ref:"filter",placeholder:"Extension name","onUpdate:modelValue":t[0]||(t[0]=e=>x.filter=e),disabled:x.loading},null,8,c),[[i.nr,x.filter]])])]),(0,s._)("main",null,[(0,s._)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.extensionNames,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"extension-container",key:e},[b.matchesFilter(e)?((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",{class:(0,o.C_)(["item name",{selected:e===x.selectedExtension}]),"data-name":e,onClick:t=>b.onInput(e,!1),textContent:(0,o.zw)(b.extensions[e].name)},null,10,u),x.selectedExtension&&e===x.selectedExtension?((0,s.wg)(),(0,s.iD)("div",p,[(0,s.Wm)(g,{extension:b.extensions[x.selectedExtension]},null,8,["extension"])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])))),128))]),x.selectedExtension?((0,s.wg)(),(0,s.iD)("div",f,[(0,s.Wm)(g,{extension:b.extensions[x.selectedExtension]},null,8,["extension"])])):(0,s.kq)("",!0)])])}var x=n(6791),b=n(6397);const m=e=>((0,s.dD)("data-v-28d23b30"),e=e(),(0,s.Cn)(),e),g={class:"extension"},_=m((()=>(0,s._)("span",{class:"from tablet"},"Documentation",-1))),k=m((()=>(0,s._)("span",{class:"from tablet"},"Install",-1))),w=m((()=>(0,s._)("span",{class:"from tablet"},"Configuration",-1))),v=m((()=>(0,s._)("span",{class:"from tablet"},"Actions",-1))),y={class:"extension-body"};function D(e,t,n,i,o,a){const l=(0,s.up)("Tab"),c=(0,s.up)("Tabs"),d=(0,s.up)("Doc"),r=(0,s.up)("Config");return(0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("header",null,[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{selected:"doc"===o.selectedTab,"icon-class":"fas fa-book",onInput:t[0]||(t[0]=e=>o.selectedTab="doc")},{default:(0,s.w5)((()=>[_])),_:1},8,["selected"]),(0,s.Wm)(l,{selected:"install"===o.selectedTab,"icon-class":"fas fa-download",onInput:t[1]||(t[1]=e=>o.selectedTab="install")},{default:(0,s.w5)((()=>[k])),_:1},8,["selected"]),(0,s.Wm)(l,{selected:"config"===o.selectedTab,"icon-class":"fas fa-square-check",onInput:t[2]||(t[2]=e=>o.selectedTab="config")},{default:(0,s.w5)((()=>[w])),_:1},8,["selected"]),(0,s.Wm)(l,{selected:"actions"===o.selectedTab,"icon-class":"fas fa-play",onInput:t[3]||(t[3]=e=>o.selectedTab="actions")},{default:(0,s.w5)((()=>[v])),_:1},8,["selected"])])),_:1})]),(0,s._)("div",y,["doc"===o.selectedTab?((0,s.wg)(),(0,s.j4)(d,{key:0,extension:n.extension},null,8,["extension"])):"config"===o.selectedTab?((0,s.wg)(),(0,s.j4)(r,{key:1,extension:n.extension},null,8,["extension"])):(0,s.kq)("",!0)])])}var C=n(1989),T=n(3176);const E=e=>((0,s.dD)("data-v-cf62ca3a"),e=e(),(0,s.Cn)(),e),q={class:"config-container",ref:"root"},I=["data-clipboard-text"],Z=E((()=>(0,s._)("i",{class:"fas fa-clipboard"},null,-1))),$=[Z],j=["innerHTML"];function L(e,t,n,i,o,a){return(0,s.wg)(),(0,s.iD)("div",q,[(0,s._)("button",{class:"copy-button",ref:"copyButton",title:"Copy to clipboard","data-clipboard-text":n.extension.config_snippet,onClick:t[0]||(t[0]=t=>e.copyToClipboard(n.extension.config_snippet))},$,8,I),(0,s._)("pre",null,[(0,s._)("code",{class:"config-snippet",innerHTML:a.highlightedConfigSnippet},null,8,j)])],512)}n(8783),n(7560);var W=n(637),O={name:"Extension",mixins:[b.Z],props:{extension:{type:Object,required:!0}},computed:{highlightedConfigSnippet(){return W.Z.highlight("yaml",this.extension.config_snippet).value.trim()}}},H=n(3744);const M=(0,H.Z)(O,[["render",L],["__scopeId","data-v-cf62ca3a"]]);var N=M;const S=e=>((0,s.dD)("data-v-2e08893e"),e=e(),(0,s.Cn)(),e),z={class:"doc"},A=["href"],F=S((()=>(0,s._)("i",{class:"icon fas fa-book"},null,-1))),U=["innerHTML"];function V(e,t,n,i,a,l){return(0,s.wg)(),(0,s.iD)("section",z,[(0,s._)("header",null,[(0,s._)("h2",null,[(0,s._)("a",{class:"title",href:n.extension.doc_url,target:"_blank"},[F,(0,s.Uk)(" "+(0,o.zw)(n.extension.name),1)],8,A)])]),a.doc?((0,s.wg)(),(0,s.iD)("article",{key:0,innerHTML:a.doc,onClick:t[0]||(t[0]=(...e)=>l.onDocClick&&l.onDocClick(...e))},null,8,U)):(0,s.kq)("",!0)])}var B=n(5250),K={name:"Doc",mixins:[b.Z],props:{extension:{type:Object,required:!0}},data(){return{doc:null}},methods:{async parseDoc(){return this.extension.doc?.length?await this.request("utils.rst_to_html",{text:this.extension.doc}):null},refreshDoc(){this.parseDoc().then((e=>this.doc=e))},onDocClick(e){if("a"===!e.target.tagName.toLowerCase())return;e.preventDefault();const t=e.target.getAttribute("href");if(!t)return;const n=t.match(/^https:\/\/docs\.platypush\.tech\/platypush\/(plugins|backend)\/([\w.]+)\.html#?.*$/);if(!n)return e.preventDefault(),void window.open(t,"_blank");let[s,i]=n.slice(1);"backend"===s&&(i=`backend.${i}`),B.$.emit("update:extension",i),e.preventDefault()}},mounted(){this.refreshDoc(),this.$watch("extension.doc",this.refreshDoc)}};const P=(0,H.Z)(K,[["render",V],["__scopeId","data-v-2e08893e"]]);var Y=P,G={name:"Extension",components:{Config:N,Doc:Y,Tab:C.Z,Tabs:T.Z},props:{extension:{type:Object,required:!0}},data(){return{selectedTab:"doc"}}};const J=(0,H.Z)(G,[["render",D],["__scopeId","data-v-28d23b30"]]);var Q=J,R={name:"Extensions",mixins:[b.Z],components:{Extension:Q,Loading:x.Z},data(){return{loading:!1,plugins:{},backends:{},filter:"",selectedExtension:null}},computed:{extensions(){const e={};return Object.entries(this.plugins).forEach((([t,n])=>{e[t]={...n,name:t}})),Object.entries(this.backends).forEach((([t,n])=>{t=`backend.${t}`,e[t]={...n,name:t}})),e},extensionNames(){return Object.keys(this.extensions).sort()}},methods:{onInput(e,t=!0){t&&(this.filter=e);const n=e?.toLowerCase()?.trim();if(n?.length&&n!==this.selectedExtension&&this.extensions[n]){this.selectedExtension=n;const e=this.$el.querySelector(`.extensions-container .item[data-name="${n}"]`);e&&e.scrollIntoView({behavior:"smooth"})}else this.selectedExtension=null},matchesFilter(e){return!this.filter||e.includes(this.filter.toLowerCase())},async loadExtensions(){this.loading=!0;try{[this.plugins,this.backends]=await Promise.all([this.request("inspect.get_all_plugins"),this.request("inspect.get_all_backends")])}finally{this.loading=!1}}},mounted(){this.loadExtensions(),B.$.on("update:extension",(e=>this.onInput(e,!1))),this.$nextTick((()=>this.$refs.filter.focus()))}};const X=(0,H.Z)(R,[["render",h],["__scopeId","data-v-16781d30"]]);var ee=X}}]);
//# sourceMappingURL=523.0107f5bd.js.map