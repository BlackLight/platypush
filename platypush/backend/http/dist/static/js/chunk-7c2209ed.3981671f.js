(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c2209ed"],{"38cf":function(t,e,s){var a=s("23e7"),n=s("1148");a({target:"String",proto:!0},{repeat:n})},"4fad":function(t,e,s){var a=s("23e7"),n=s("6f53").entries;a({target:"Object",stat:!0},{entries:function(t){return n(t)}})},"6f53":function(t,e,s){var a=s("83ab"),n=s("df75"),r=s("fc6a"),i=s("d1e7").f,c=function(t){return function(e){var s,c=r(e),u=n(c),o=u.length,l=0,h=[];while(o>l)s=u[l++],a&&!i.call(c,s)||h.push(t?[s,c[s]]:c[s]);return h}};t.exports={entries:c(!0),values:c(!1)}},8789:function(t,e,s){"use strict";s("ac8b")},a15b:function(t,e,s){"use strict";var a=s("23e7"),n=s("44ad"),r=s("fc6a"),i=s("a640"),c=[].join,u=n!=Object,o=i("join",",");a({target:"Array",proto:!0,forced:u||!o},{join:function(t){return c.call(r(this),void 0===t?",":t)}})},ac8b:function(t,e,s){},bcf7:function(t,e,s){"use strict";s.r(e);s("38cf");var a=s("7a23"),n=Object(a["G"])("data-v-5de2d5af");Object(a["u"])("data-v-5de2d5af");var r={key:1,class:"music"},i={class:"track"},c={key:0,class:"unknown"},u={key:1,class:"no-track"},o={key:0,class:"time"},l={class:"row"},h={class:"progress-bar"},p=Object(a["h"])("div",{class:"total"},null,-1),m={class:"row"},d={key:1,class:"playback-status"},b={class:"status-property col-4"},f=Object(a["h"])("i",{class:"fa fa-volume-up"},null,-1),v=Object(a["g"])("Â  "),k={class:"status-property col-2"},g={class:"status-property col-2"},y={class:"status-property col-2"},j={class:"status-property col-2"};Object(a["s"])();var O=n((function(t,e,s,n,O,w){var T=Object(a["z"])("Loading");return O.loading?(Object(a["r"])(),Object(a["e"])(T,{key:0})):(Object(a["r"])(),Object(a["e"])("div",r,[Object(a["h"])("div",i,[O.status?Object(a["f"])("",!0):(Object(a["r"])(),Object(a["e"])("div",c,"[Unknown state]")),O.status&&"stop"===O.status.state?(Object(a["r"])(),Object(a["e"])("div",u,"No media is being played")):Object(a["f"])("",!0),O.status&&"stop"!==O.status.state&&O.track&&O.track.artist?(Object(a["r"])(),Object(a["e"])("div",{key:2,class:"artist",textContent:Object(a["C"])(O.track.artist)},null,8,["textContent"])):Object(a["f"])("",!0),O.status&&"stop"!==O.status.state&&O.track&&O.track.title?(Object(a["r"])(),Object(a["e"])("div",{key:3,class:"title",textContent:Object(a["C"])(O.track.title)},null,8,["textContent"])):Object(a["f"])("",!0)]),O.status&&"play"===O.status.state?(Object(a["r"])(),Object(a["e"])("div",o,[Object(a["h"])("div",l,[Object(a["h"])("div",h,[Object(a["h"])("div",{class:"elapsed",style:{width:O.track.time?O.status.elapsed/O.track.time*100+"%":"100%"}},null,4),p])]),Object(a["h"])("div",m,[Object(a["h"])("div",{class:"col-6 time-elapsed",textContent:Object(a["C"])(w.convertTime(O.status.elapsed))},null,8,["textContent"]),O.track.time?(Object(a["r"])(),Object(a["e"])("div",{key:0,class:"col-6 time-total",textContent:Object(a["C"])(w.convertTime(O.track.time))},null,8,["textContent"])):Object(a["f"])("",!0)])])):Object(a["f"])("",!0),O.status?(Object(a["r"])(),Object(a["e"])("div",d,[Object(a["h"])("div",b,[f,v,Object(a["h"])("span",{textContent:Object(a["C"])(O.status.volume+"%")},null,8,["textContent"])]),Object(a["h"])("div",k,[Object(a["h"])("i",{class:["fas fa-random",{active:O.status.random}]},null,2)]),Object(a["h"])("div",g,[Object(a["h"])("i",{class:["fas fa-redo",{active:O.status.repeat}]},null,2)]),Object(a["h"])("div",y,[Object(a["h"])("i",{class:["fa fa-bullseye",{active:O.status.single}]},null,2)]),Object(a["h"])("div",j,[Object(a["h"])("i",{class:["fa fa-utensils",{active:O.status.consume}]},null,2)])])):Object(a["f"])("",!0)]))}));s("c975"),s("a15b"),s("a9e3"),s("b680"),s("4fad");function w(t){if(Array.isArray(t))return t}s("a4d3"),s("e01a"),s("d28b"),s("d3b7"),s("3ca3"),s("ddb0");function T(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var s=[],a=!0,n=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0)if(s.push(i.value),e&&s.length===e)break}catch(u){n=!0,r=u}finally{try{a||null==c["return"]||c["return"]()}finally{if(n)throw r}}return s}}var C=s("06c5");function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){return w(t)||T(t,e)||Object(C["a"])(t,e)||x()}s("96cf");var _=s("1da1"),I=s("3e54"),M=s("3a5e"),R={name:"Music",components:{Loading:M["a"]},mixins:[I["a"]],props:{refreshSeconds:{type:Number,required:!1,default:60}},data:function(){return{track:void 0,status:void 0,timer:void 0,loading:!1,syncTime:{timestamp:null,elapsed:null}}},methods:{refresh:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.request("music.mpd.status");case 4:return s=e.sent,e.next=7,t.request("music.mpd.currentsong");case 7:a=e.sent,t._parseStatus(s),t._parseTrack(a),"play"!==s.state||t.timer?"play"!==s.state&&t.timer&&t.stopTimer():t.startTimer();case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,,11,14]])})))()},convertTime:function(t){t=parseFloat(t);var e={};e.h=parseInt(t/3600),e.m=parseInt(t/60-60*e.h),e.s=parseInt(t-(3600*e.h+60*e.m));for(var s=0,a=["m","s"];s<a.length;s++){var n=a[s];e[n]=""+e[n]}for(var r=0,i=["m","s"];r<i.length;r++){var c=i[r];parseInt(e[c])<10&&(e[c]="0"+e[c])}var u=[];return parseInt(e.h)&&u.push(e.h),u.push(e.m,e.s),u.join(":")},_parseStatus:function(t){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function s(){var a,n,r,i,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t&&0!==t.length){s.next=4;break}return s.next=3,e.request("music.mpd.status");case 3:t=s.sent;case 4:for(e.status||(e.status={}),a=0,n=Object.entries(t);a<n.length;a++)r=S(n[a],2),i=r[0],c=r[1],["consume","random","repeat","single","bitrate"].indexOf(i)>=0?e.status[i]=!!parseInt(c):["nextsong","nextsongid","playlist","playlistlength","volume","xfade","song","songid"].indexOf(i)>=0?e.status[i]=parseInt(c):["elapsed"].indexOf(i)>=0?e.status[i]=parseFloat(c):e.status[i]=c;case 6:case"end":return s.stop()}}),s)})))()},_parseTrack:function(t){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function s(){var a,n,r,i,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t&&0!==t.length){s.next=4;break}return s.next=3,e.request("music.mpd.currentsong");case 3:t=s.sent;case 4:for(e.track||(e.track={}),a=0,n=Object.entries(t);a<n.length;a++)r=S(n[a],2),i=r[0],c=r[1],["id","pos","time","track","disc"].indexOf(i)>=0?e.track[i]=parseInt(c):e.track[i]=c;case 6:case"end":return s.stop()}}),s)})))()},showNewTrackNotification:function(){this.notify({html:"<b>"+(this.track.artist||"[No Artist]")+"</b><br>"+(this.track.title||"[No Title]"),image:{icon:"play"}})},onNewPlayingTrack:function(t){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function s(){var a,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=void 0,e.track&&(a={file:e.track.file,artist:e.track.artist,title:e.track.title}),e.status.state="play",e.status.elapsed=0,e.track={},e._parseTrack(t.track),!t.status){s.next=10;break}s.t0=t.status,s.next=13;break;case 10:return s.next=12,e.request("music.mpd.status");case 12:s.t0=s.sent;case 13:n=s.t0,e._parseStatus(n),e.startTimer(),a&&e.track.file===a.file&&e.track.artist===a.artist&&e.track.title===a.title||e.showNewTrackNotification();case 17:case"end":return s.stop()}}),s)})))()},onMusicStop:function(t){this.status.state="stop",this.status.elapsed=0,this._parseStatus(t.status),this._parseTrack(t.track),this.stopTimer()},onMusicPlay:function(t){this.status.state="play",this._parseStatus(t.status),this._parseTrack(t.track),this.startTimer()},onMusicPause:function(t){this.status.state="pause",this._parseStatus(t.status),this._parseTrack(t.track),this.syncTime.timestamp=new Date,this.syncTime.elapsed=this.status.elapsed},onSeekChange:function(t){null!=t.position&&(this.status.elapsed=parseFloat(t.position)),t.status&&this._parseStatus(t.status),t.track&&this._parseTrack(t.track),this.syncTime.timestamp=new Date,this.syncTime.elapsed=this.status.elapsed},onVolumeChange:function(t){null!=t.volume&&(this.status.volume=parseFloat(t.volume)),t.status&&this._parseStatus(t.status),t.track&&this._parseTrack(t.track)},onRepeatChange:function(t){this.status.repeat=t.state},onRandomChange:function(t){this.status.random=t.state},onConsumeChange:function(t){this.status.consume=t.state},onSingleChange:function(t){this.status.single=t.state},startTimer:function(){null!=this.timer&&this.stopTimer(),this.syncTime.timestamp=new Date,this.syncTime.elapsed=this.status.elapsed,this.timer=setInterval(this.timerFunc,1e3)},stopTimer:function(){null==this.timer&&(clearInterval(this.timer),this.timer=null)},timerFunc:function(){"play"===this.status.state&&null!=this.status.elapsed&&(this.status.elapsed=this.syncTime.elapsed+(new Date).getTime()/1e3-this.syncTime.timestamp.getTime()/1e3)}},mounted:function(){this.refresh(),this.refreshSeconds&&setInterval(this.refresh,parseInt((1e3*this.refreshSeconds).toFixed(0))),this.subscribe(this.onNewPlayingTrack,"platypush.message.event.music.NewPlayingTrackEvent"),this.subscribe(this.onMusicStop,"platypush.message.event.music.MusicStopEvent"),this.subscribe(this.onMusicPlay,"platypush.message.event.music.MusicPlayEvent"),this.subscribe(this.onMusicPause,"platypush.message.event.music.MusicPauseEvent"),this.subscribe(this.onSeekChange,"platypush.message.event.music.SeekChangeEvent"),this.subscribe(this.onVolumeChange,"platypush.message.event.music.VolumeChangeEvent"),this.subscribe(this.onRepeatChange,"platypush.message.event.music.PlaybackRepeatModeChangeEvent"),this.subscribe(this.onRandomChange,"platypush.message.event.music.PlaybackRandomModeChangeEvent"),this.subscribe(this.onConsumeChange,"platypush.message.event.music.PlaybackConsumeModeChangeEvent"),this.subscribe(this.onSingleChange,"platypush.message.event.music.PlaybackSingleModeChangeEvent")}};s("8789");R.render=O,R.__scopeId="data-v-5de2d5af";e["default"]=R}}]);
//# sourceMappingURL=chunk-7c2209ed.3981671f.js.map