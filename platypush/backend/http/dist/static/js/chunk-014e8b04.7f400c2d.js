(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-014e8b04"],{"07ac":function(e,t,n){var o=n("23e7"),r=n("6f53").values;o({target:"Object",stat:!0},{values:function(e){return r(e)}})},1804:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("99af"),n("d81d"),n("b680"),n("b64b");var o=n("2909");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var a=function(){function e(t){if(r(this,e),this.ranges={hue:[0,360],sat:[0,100],bri:[0,100],ct:[154,500]},t)for(var n=0,o=Object.keys(this.ranges);n<o.length;n++){var i=o[n];t[i]&&(this.ranges[i]=t[i])}}return c(e,[{key:"normalize",value:function(e,t,n){return n[0]+(e-t[0])*(n[1]-n[0])/(t[1]-t[0])}},{key:"hslToRgb",value:function(e,t,n){var o=[this.normalize(e,this.ranges.hue,[0,360]),this.normalize(t,this.ranges.sat,[0,100]),this.normalize(n,this.ranges.bri,[0,100])];e=o[0],t=o[1],n=o[2],n/=100;var r=t*Math.min(n,1-n)/100,i=function(t){var o=(t+e/30)%12,i=n-r*Math.max(Math.min(o-3,9-o,1),-1);return Math.round(255*i)};return[i(0),i(8),i(4)]}},{key:"rgbToHsl",value:function(e,t,n){e/=255,t/=255,n/=255;var o,r,i=Math.max(e,t,n),c=Math.min(e,t,n),a=(i+c)/2;if(i===c)o=r=0;else{var l=i-c;switch(r=a>.5?l/(2-i-c):l/(i+c),i){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4;break}o/=6}return[parseInt(this.normalize(o,[0,1],this.ranges.hue)),parseInt(this.normalize(r,[0,1],this.ranges.sat)),parseInt(this.normalize(a,[0,1],this.ranges.bri))]}},{key:"xyToRgb",value:function(e,t,n){null==n&&(n=this.ranges.bri[1]);var o=1-e-t,r=(n/(this.ranges.bri[1]-1)).toFixed(2),i=r/t*e,c=r/t*o,a=1.656492*i-.354851*r-.255038*c,l=.707196*-i+1.655397*r+.036152*c,s=.051713*i-.121364*r+1.01153*c;return a>s&&a>l&&a>1?(l/=a,s/=a,a=1):l>s&&l>a&&l>1?(a/=l,s/=l,l=1):s>a&&s>l&&s>1&&(a/=s,l/=s,s=1),a=a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055,l=l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055,s=s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055,a=Math.round(255*a),l=Math.round(255*l),s=Math.round(255*s),isNaN(a)&&(a=0),isNaN(l)&&(l=0),isNaN(s)&&(s=0),[a,l,s].map((function(e){return Math.min(Math.max(0,e),255)}))}},{key:"rgbToXY",value:function(e,t,n){e>1&&(e/=255),t>1&&(t/=255),n>1&&(n/=255),e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var o=.664511*e+.154324*t+.162028*n,r=.283881*e+.668433*t+.047685*n,i=88e-6*e+.07231*t+.986039*n,c=parseFloat((o/(o+r+i)).toFixed(4)),a=parseFloat((r/(o+r+i)).toFixed(4));return isNaN(c)&&(c=0),isNaN(a)&&(a=0),[c,a]}},{key:"rgbToBri",value:function(e,t,n){return Math.min(2*this.rgbToHsl(e,t,n)[2],this.ranges.bri[1])}},{key:"getRGB",value:function(e){return null!=e.red&&null!=e.green&&null!=e.blue?[e.red,e.green,e.blue]:null!=e.r&&null!=e.g&&null!=e.b?[e.r,e.g,e.b]:e.rgb?e.rgb:void 0}},{key:"getXY",value:function(e){return null!=e.x&&null!=e.y?[e.x,e.y]:e.xy?e.xy:void 0}},{key:"toRGB",value:function(e){var t=this.getRGB(e);if(t)return t;var n=this.getXY(e);return n&&e.bri?this.xyToRgb.apply(this,Object(o["a"])(n).concat([e.bri])):e.hue&&e.sat&&e.bri?this.hslToRgb(e.hue,e.sat,e.bri):(console.debug("Could not determine color space"),void console.debug(e))}},{key:"toXY",value:function(e){var t=this.getXY(e);if(t&&e.bri)return[t[0],t[1],e.bri];var n=this.getRGB(e);if(n)return this.rgbToXY.apply(this,Object(o["a"])(n));if(e.hue&&e.sat&&e.bri){var r=this.hslToRgb(e.hue,e.sat,e.bri);return this.rgbToXY.apply(this,Object(o["a"])(r))}console.debug("Could not determine color space"),console.debug(e)}},{key:"toHSL",value:function(e){if(e.hue&&e.sat&&e.bri)return[e.hue,e.sat,e.bri];var t=this.getRGB(e);if(t)return this.rgbToHsl.apply(this,Object(o["a"])(t));var n=this.getXY(e);if(n&&e.bri){var r=this.xyToRgb.apply(this,Object(o["a"])(n).concat([e.bri]));return this.rgbToHsl.apply(this,Object(o["a"])(r))}console.debug("Could not determine color space"),console.debug(e)}}]),e}()},"1ed6":function(e,t,n){},3401:function(e,t,n){"use strict";n("7e56")},"487a":function(e,t,n){"use strict";n("c8ad")},"4da5":function(e,t,n){},"4de4":function(e,t,n){"use strict";var o=n("23e7"),r=n("b727").filter,i=n("1dde"),c=n("ae40"),a=i("filter"),l=c("filter");o({target:"Array",proto:!0,forced:!a||!l},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"520c":function(e,t,n){},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},"5b0a":function(e,t,n){"use strict";n("7ef9")},"5d62":function(e,t,n){},6055:function(e,t,n){},6851:function(e,t,n){"use strict";n("4da5")},"7e56":function(e,t,n){},"7e57":function(e,t,n){"use strict";n("e3f0")},"7ef9":function(e,t,n){},"8dcb":function(e,t,n){"use strict";n("d28c")},"93d8":function(e,t,n){"use strict";n("6055")},9840:function(e,t,n){"use strict";n("af43")},98402:function(e,t,n){"use strict";n("5d62")},af43:function(e,t,n){},bf6b:function(e,t,n){"use strict";n("fda1")},c8ad:function(e,t,n){},cf99:function(e,t,n){"use strict";n.r(t);n("b64b");var o=n("7a23"),r=Object(o["J"])("data-v-040404d2");Object(o["u"])("data-v-040404d2");var i={class:"plugin lights-plugin"},c={key:0,class:"panel"},a={key:1,class:"panel"};Object(o["s"])();var l=r((function(e,t,n,r,l,s){var u=Object(o["z"])("Groups"),b=Object(o["z"])("Group");return Object(o["r"])(),Object(o["e"])("div",i,[null==l.selectedGroup&&n.groups&&Object.keys(n.groups).length?(Object(o["r"])(),Object(o["e"])("div",c,[Object(o["h"])(u,{groups:n.groups,"loading-groups":n.loadingGroups,"color-converter":n.colorConverter,onSelect:t[1]||(t[1]=function(e){return l.selectedGroup=e}),onToggle:t[2]||(t[2]=function(t){return e.$emit("group-toggle",t)})},null,8,["groups","loading-groups","color-converter"])])):(Object(o["r"])(),Object(o["e"])("div",a,[Object(o["h"])(b,{group:n.groups[l.selectedGroup],lights:s.displayedLights,scenes:s.scenesByGroup[l.selectedGroup],"color-converter":n.colorConverter,animations:s.animationsByGroup[l.selectedGroup],onClose:s.closeGroup,onLightToggle:t[3]||(t[3]=function(t){return e.$emit("light-toggle",t)}),onGroupToggle:t[4]||(t[4]=function(t){return e.$emit("group-toggle",t)}),onSetLight:t[5]||(t[5]=function(t){return e.$emit("set-light",t)}),onSetGroup:t[6]||(t[6]=function(t){return e.$emit("set-group",{groupId:l.selectedGroup,value:t})}),onSelectScene:t[7]||(t[7]=function(t){return e.$emit("select-scene",{groupId:l.selectedGroup,sceneId:t})}),onStartAnimation:t[8]||(t[8]=function(t){return e.$emit("start-animation",t)}),onStopAnimation:t[9]||(t[9]=function(t){return e.$emit("stop-animation",t)})},null,8,["group","lights","scenes","color-converter","animations","onClose"])]))])})),s=(n("4160"),n("13d5"),n("a9e3"),n("4fad"),n("07ac"),n("159b"),n("5530")),u=n("3835"),b=n("3e54"),d={name:"Panel",emits:["mounted"],props:{config:{type:Object,default:function(){}},pluginName:{type:String,required:!0}},data:function(){return{loading:!1}},mounted:function(){this.$emit("mounted",this)}},g=d,h=(n("b0c0"),Object(o["J"])("data-v-42318a2b"));Object(o["u"])("data-v-42318a2b");var p={class:"panel-row header"},f=Object(o["h"])("div",{class:"col-3"},[Object(o["h"])("i",{class:"icon fas fa-home"})],-1),O=Object(o["h"])("div",{class:"col-6 name"}," Rooms ",-1),j={class:"col-3 pull-right"},v={class:"name col-9"},m={class:"controls col-3 pull-right"};Object(o["s"])();var y=h((function(e,t,n,r,i,c){var a=Object(o["z"])("ToggleSwitch"),l=Object(o["z"])("MenuPanel");return Object(o["r"])(),Object(o["e"])(l,null,{default:h((function(){return[Object(o["h"])("div",p,[f,O,Object(o["h"])("div",j,[Object(o["h"])(a,{value:c.anyLightsOn,onInput:t[1]||(t[1]=function(t){return e.$emit("toggle")})},null,8,["value"])])]),(Object(o["r"])(!0),Object(o["e"])(o["a"],null,Object(o["x"])(c.groupsSorted,(function(t){return Object(o["r"])(),Object(o["e"])("div",{class:"panel-row row group",key:t.id,onClick:function(n){return e.$emit("select",t.id)}},[Object(o["h"])("span",v,Object(o["C"])(t.name||"[Group ".concat(t.id,"]")),1),Object(o["h"])("span",m,[Object(o["h"])(a,{value:t.state.any_on,disabled:t.id in(n.loadingGroups||{}),onInput:function(n){return e.$emit("toggle",t)}},null,8,["value","disabled","onInput"])])],8,["onClick"])})),128))]})),_:1})})),w=(n("d81d"),{class:"menu-panel"}),C={class:"content"};function k(e,t,n,r,i,c){return Object(o["r"])(),Object(o["e"])("div",w,[Object(o["h"])("div",C,[Object(o["y"])(e.$slots,"default")])])}var S={name:"MenuPanel"};n("3401");S.render=k;var _=S,G=Object(o["J"])("data-v-8fae7678");Object(o["u"])("data-v-8fae7678");var $=Object(o["h"])("div",{class:"switch"},[Object(o["h"])("div",{class:"dot"})],-1),L={class:"label"};Object(o["s"])();var I=G((function(e,t,n,r,i,c){return Object(o["r"])(),Object(o["e"])("div",{class:["power-switch",{disabled:n.disabled}],onClick:t[1]||(t[1]=function(){return c.onInput.apply(c,arguments)})},[Object(o["h"])("input",{type:"checkbox",checked:n.value},null,8,["checked"]),Object(o["h"])("label",null,[$,Object(o["h"])("span",L,[Object(o["y"])(e.$slots,"default")])])],2)})),x={name:"ToggleSwitch",emits:["input"],props:{value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},methods:{onInput:function(e){if(e.stopPropagation(),this.disabled)return!1;this.$emit("input",e)}}};n("5b0a");x.render=I,x.__scopeId="data-v-8fae7678";var T=x,M=n("1804"),A={name:"Groups",components:{ToggleSwitch:T,MenuPanel:_},emits:["select","toggle"],props:{groups:{type:Object,default:function(){}},loadingGroups:{type:Object,default:function(){}},colorConverter:{type:Object,default:function(){return new M["a"]}}},computed:{groupsSorted:function(){return Object.entries(this.groups).sort((function(e,t){return e[1].name.localeCompare(t[1].name)})).map((function(e){var t=Object(u["a"])(e,2),n=t[0],o=t[1];return Object(s["a"])(Object(s["a"])({},o),{},{id:n})}))},anyLightsOn:function(){for(var e=0,t=Object.values(this.groups);e<t.length;e++){var n,o=t[e];if(null===o||void 0===o||null===(n=o.state)||void 0===n?void 0:n.any_on)return!0}return!1}}};n("8dcb");A.render=y,A.__scopeId="data-v-42318a2b";var z=A,B={class:"light-group-container"},P={class:"panel-row header"},R={key:0,class:"col-3"},N=Object(o["h"])("i",{class:"fas fa-chevron-left"},null,-1),V={key:1,class:"col-3 pull-right"},E={key:0,class:"no-lights"},F={key:1,class:"lights-view"},H={class:"row view-selector"},J=Object(o["h"])("i",{class:"icon fas fa-lightbulb"},null,-1),X=Object(o["h"])("span",{class:"view-title"},"  Lights",-1),Y=Object(o["h"])("i",{class:"icon far fa-image"},null,-1),D=Object(o["h"])("span",{class:"view-title"},"  Scenes",-1),U=Object(o["h"])("i",{class:"icon fas fa-video"},null,-1),q=Object(o["h"])("span",{class:"view-title"},"  Animate",-1),K={key:0,class:"view fade-in"},Q={key:1,class:"view fade-in"},W={key:2,class:"view group-controls fade-in"},Z={key:3,class:"view group-controls fade-in"};function ee(e,t,n,r,i,c){var a=Object(o["z"])("ToggleSwitch"),l=Object(o["z"])("Light"),s=Object(o["z"])("Scene"),u=Object(o["z"])("Controls"),b=Object(o["z"])("Animate"),d=Object(o["z"])("MenuPanel");return Object(o["r"])(),Object(o["e"])("div",B,[Object(o["h"])(d,null,{default:Object(o["G"])((function(){return[Object(o["h"])("div",P,[n.group?(Object(o["r"])(),Object(o["e"])("div",R,[Object(o["h"])("button",{class:"back-btn",title:"Back",onClick:t[1]||(t[1]=function(){return c.close.apply(c,arguments)})},[N])])):Object(o["f"])("",!0),Object(o["h"])("div",{class:["col-6 name",{selected:"group"===i.selectedView}],textContent:Object(o["C"])(c.groupName),onClick:t[2]||(t[2]=function(e){return i.selectedView="group"===i.selectedView?null:"group"})},null,10,["textContent"]),n.group?(Object(o["r"])(),Object(o["e"])("div",V,[Object(o["h"])(a,{value:n.group.state.any_on,onInput:t[3]||(t[3]=function(t){return e.$emit("group-toggle",n.group)})},null,8,["value"])])):Object(o["f"])("",!0)]),n.lights&&Object.keys(n.lights).length?(Object(o["r"])(),Object(o["e"])("div",F,[Object(o["h"])("div",H,[Object(o["h"])("button",{class:{selected:"lights"===i.selectedView},title:"Lights",onClick:t[4]||(t[4]=function(e){return i.selectedView="lights"})},[J,X],2),Object(o["h"])("button",{class:{selected:"scenes"===i.selectedView},title:"Scenes",onClick:t[5]||(t[5]=function(e){return i.selectedView="scenes"})},[Y,D],2),Object(o["h"])("button",{class:{selected:"animate"===i.selectedView},title:"Animate",onClick:t[6]||(t[6]=function(e){return i.selectedView="animate"})},[U,q],2)]),"lights"===i.selectedView?(Object(o["r"])(),Object(o["e"])("div",K,[(Object(o["r"])(),Object(o["e"])(o["b"],null,[(Object(o["r"])(!0),Object(o["e"])(o["a"],null,Object(o["x"])(c.lightsSorted,(function(t,r){return Object(o["r"])(),Object(o["e"])("div",{class:["panel-row row",{expanded:t.id===i.selectedLight}],key:r,onClick:function(e){return i.selectedLight=i.selectedLight===t.id?null:t.id}},[Object(o["h"])(l,{light:t,group:n.group,collapsed:t.id!==i.selectedLight,"color-converter":n.colorConverter,onToggle:function(n){return e.$emit("light-toggle",t)},onSetLight:function(n){return e.$emit("set-light",{light:t,value:n})}},null,8,["light","group","collapsed","color-converter","onToggle","onSetLight"])],10,["onClick"])})),128))],1024))])):"scenes"===i.selectedView?(Object(o["r"])(),Object(o["e"])("div",Q,[(Object(o["r"])(),Object(o["e"])(o["b"],null,[(Object(o["r"])(!0),Object(o["e"])(o["a"],null,Object(o["x"])(c.scenesSorted,(function(e,t){return Object(o["r"])(),Object(o["e"])("div",{class:["panel-row row",{selected:e.id===i.selectedScene}],key:t,onClick:function(t){return c.onSceneSelected(e.id)}},[Object(o["h"])(s,{scene:e,group:n.group},null,8,["scene","group"])],10,["onClick"])})),128))],1024))])):"group"===i.selectedView?(Object(o["r"])(),Object(o["e"])("div",W,[(Object(o["r"])(),Object(o["e"])(o["b"],null,[Object(o["h"])(u,{group:n.group,lights:n.lights,"color-converter":n.colorConverter,onSetGroup:t[7]||(t[7]=function(t){return e.$emit("set-group",t)})},null,8,["group","lights","color-converter"])],1024))])):"animate"===i.selectedView?(Object(o["r"])(),Object(o["e"])("div",Z,[(Object(o["r"])(),Object(o["e"])(o["b"],null,[Object(o["h"])(b,{group:n.group,lights:n.lights,"color-converter":n.colorConverter,"running-animations":n.animations,onStart:t[8]||(t[8]=function(t){return e.$emit("start-animation",t)}),onStop:t[9]||(t[9]=function(t){return e.$emit("stop-animation",t)})},null,8,["group","lights","color-converter","running-animations"])],1024))])):Object(o["f"])("",!0)])):(Object(o["r"])(),Object(o["e"])("div",E," No lights found "))]})),_:1})])}var te=Object(o["J"])("data-v-52168252");Object(o["u"])("data-v-52168252");var ne={class:"row"},oe={class:"toggle col-3 pull-right"},re={key:0,class:"row fade-in"};Object(o["s"])();var ie=te((function(e,t,n,r,i,c){var a=Object(o["z"])("ToggleSwitch"),l=Object(o["z"])("Controls");return Object(o["r"])(),Object(o["e"])("div",{class:["light",{expanded:!n.collapsed}],ref:"element"},[Object(o["h"])("div",ne,[Object(o["h"])("span",{class:"name col-9",onClick:t[1]||(t[1]=function(){return c.expandToggle.apply(c,arguments)})},Object(o["C"])(n.light.name||"[Light ".concat(n.light.id,"]")),1),Object(o["h"])("span",oe,[Object(o["h"])(a,{value:n.light.state.on,disabled:n.loading,onInput:t[2]||(t[2]=function(t){return e.$emit("toggle",n.light)})},null,8,["value","disabled"])])]),n.collapsed?Object(o["f"])("",!0):(Object(o["r"])(),Object(o["e"])("div",re,[Object(o["h"])(l,{light:n.light,loading:n.loading,"color-converter":n.colorConverter,onSetLight:t[3]||(t[3]=function(t){return e.$emit("set-light",t)})},null,8,["light","loading","color-converter"])]))],2)})),ce=Object(o["J"])("data-v-e2726892");Object(o["u"])("data-v-e2726892");var ae={key:1,class:"row"},le=Object(o["h"])("div",{class:"col-1 icon"},[Object(o["h"])("i",{class:"fas fa-sun"})],-1),se={class:"col-11 control"},ue={key:2,class:"row"},be=Object(o["h"])("div",{class:"col-1 icon"},[Object(o["h"])("i",{class:"fas fa-thermometer-half"})],-1),de={class:"col-11 control"},ge={key:3,class:"row"},he=Object(o["h"])("span",{class:"col-1 icon"},[Object(o["h"])("i",{class:"fas fa-palette"})],-1),pe={class:"col-11 control"};Object(o["s"])();var fe=ce((function(e,t,n,r,i,c){var a=Object(o["z"])("Loading"),l=Object(o["z"])("Slider");return Object(o["r"])(),Object(o["e"])("div",{class:"controls light-controls",onClick:t[4]||(t[4]=function(e){return e.stopPropagation()})},[n.loading?(Object(o["r"])(),Object(o["e"])(a,{key:0})):Object(o["f"])("",!0),null!=c.state.bri?(Object(o["r"])(),Object(o["e"])("div",ae,[le,Object(o["h"])("div",se,[Object(o["h"])(l,{range:n.colorConverter.ranges.bri,disabled:n.loading,value:c.state.bri,onMouseup:t[1]||(t[1]=Object(o["I"])((function(t){return e.$emit(n.light?"set-light":"set-group",{brightness:parseInt(t.target.value)})}),["stop"]))},null,8,["range","disabled","value"])])])):Object(o["f"])("",!0),null!=c.state.ct?(Object(o["r"])(),Object(o["e"])("div",ue,[be,Object(o["h"])("div",de,[Object(o["h"])(l,{range:n.colorConverter.ranges.ct,disabled:n.loading,value:c.state.ct,onMouseup:t[2]||(t[2]=Object(o["I"])((function(t){return e.$emit(n.light?"set-light":"set-group",{temperature:parseInt(t.target.value)})}),["stop"]))},null,8,["range","disabled","value"])])])):Object(o["f"])("",!0),c.rgbColor?(Object(o["r"])(),Object(o["e"])("label",ge,[he,Object(o["h"])("span",pe,[Object(o["h"])("input",{type:"color",value:c.rgbColor,onChange:t[3]||(t[3]=Object(o["I"])((function(){return c.onColorSelect.apply(c,arguments)}),["stop"]))},null,40,["value"])])])):Object(o["f"])("",!0)])})),Oe=(n("99af"),n("a15b"),n("fb6a"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("ddb0"),n("2909")),je=Object(o["J"])("data-v-255c0e3c"),ve=je((function(e,t,n,r,i,c){return Object(o["r"])(),Object(o["e"])("label",null,[Object(o["h"])("input",{class:"slider",type:"range",min:n.range[0],max:n.range[1],value:n.value,disabled:n.disabled,onChange:t[1]||(t[1]=function(t){return e.$emit("input",t)}),onMouseup:t[2]||(t[2]=function(t){return e.$emit("mouseup",t)}),onInput:t[3]||(t[3]=function(t){return e.$emit("input",t)}),onMousedown:t[4]||(t[4]=function(t){return e.$emit("mousedown",t)}),onTouch:t[5]||(t[5]=function(t){return e.$emit("input",t)}),onTouchstart:t[6]||(t[6]=function(t){return e.$emit("mousedown",t)}),onTouchend:t[7]||(t[7]=function(t){return e.$emit("mouseup",t)})},null,40,["min","max","value","disabled"])])})),me={name:"Slider",emits:["input","mouseup","mousedown"],props:{value:{type:Number},disabled:{type:Boolean,default:!1},range:{type:Array,default:function(){return[0,100]}}}};n("9840");me.render=ve,me.__scopeId="data-v-255c0e3c";var ye=me,we=n("3a5e"),Ce={name:"Controls",components:{Loading:we["a"],Slider:ye},emits:["set-light","set-group"],props:{light:{type:Object},lights:{type:Object},group:{type:Object},loading:{type:Boolean,default:!1},colorConverter:{type:Object,default:function(){return new M["a"]}}},computed:{state:function(){var e,t;if(null===(e=this.light)||void 0===e?void 0:e.state)return this.light.state;var n=(null===(t=this.group)||void 0===t?void 0:t.state)||{};if(!this.lights)return n;var o=function e(t){return t&&t.length?t[0]instanceof Array?Object(Oe["a"])(t[0].keys()).map((function(n){return e(t.map((function(e){return e[n]})))})):t.reduce((function(e,t){return e+t}),0)/t.length:0};return Object(s["a"])(Object(s["a"])({},n),Object.entries(Object.values(this.lights).reduce((function(e,t){return["bri","hue","sat","rgb","xy","red","green","blue","ct"].forEach((function(n){var o;null!=(null===(o=t.state)||void 0===o?void 0:o[n])&&(e[n]=[].concat(Object(Oe["a"])(e[n]||[]),[t.state[n]]))})),e}),{})).reduce((function(e,t){var n=Object(u["a"])(t,2),r=n[0],i=n[1];return e[r]=o(i),e}),{}))},color:function(){return this.getColor(this.state)},rgbColor:function(){var e=this.colorConverter.toRGB(this.state);return e?"#"+e.map((function(e){var t=e.toString(16);return t.length<2&&(t="0"+t),t})).join(""):null}},methods:{onColorSelect:function(e){var t,n,o,r=e.target.value.slice(1).split(/(?=(?:..)*$)/).map((function(e){return parseInt("0x".concat(e))}));this.$emit(this.light?"set-light":"set-group",{rgb:r,xy:(t=this.colorConverter).rgbToXY.apply(t,Object(Oe["a"])(r)),hsl:(n=this.colorConverter).rgbToHsl.apply(n,Object(Oe["a"])(r)),brightness:(o=this.colorConverter).rgbToBri.apply(o,Object(Oe["a"])(r))})},getColor:function(e){return{rgb:this.colorConverter.toRGB(e),xy:this.colorConverter.toXY(e),hsl:this.colorConverter.toHSL(e)}}}};n("bf6b"),n("e239");Ce.render=fe,Ce.__scopeId="data-v-e2726892";var ke=Ce,Se={name:"Light",components:{Controls:ke,ToggleSwitch:T},emits:["toggle","set-light","collapsed","expanded"],props:{light:{type:Object,default:function(){}},group:{type:Object,default:function(){}},loading:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!0},colorConverter:{type:Object,default:function(){return new M["a"]}}},methods:{expandToggle:function(){this.$emit(this.collapsed?"expanded":"collapsed")}}};n("93d8");Se.render=ie,Se.__scopeId="data-v-52168252";var _e=Se;function Ge(e,t,n,r,i,c){var a=Object(o["z"])("Loading");return Object(o["r"])(),Object(o["e"])(o["a"],null,[n.loading?(Object(o["r"])(),Object(o["e"])(a,{key:0})):Object(o["f"])("",!0),Object(o["h"])("div",{class:"scene row name",onClick:t[1]||(t[1]=function(){return c.onSelect.apply(c,arguments)})},Object(o["C"])(n.scene.name||"[Scene ".concat(n.scene.id,"]")),1)],64)}var $e={name:"Light",emits:["select"],props:{scene:{type:Object,default:function(){}},group:{type:Object,default:function(){}},loading:{type:Boolean,default:!1}},methods:{onSelect:function(){if(this.loading)return!1;this.$emit("select")}}};$e.render=Ge;var Le=$e,Ie=(n("4de4"),Object(o["J"])("data-v-1739aaba"));Object(o["u"])("data-v-1739aaba");var xe={class:"animation-container"},Te={class:"animation-header"},Me={class:"row"},Ae=Object(o["h"])("div",{class:"col-3"}," Run Animation ",-1),ze={class:"col-9"},Be={class:"row"},Pe=Object(o["h"])("div",{class:"col-3"},"Animation",-1),Re={class:"col-9"},Ne=Object(o["h"])("option",{value:"color_transition"},"Color transition",-1),Ve=Object(o["h"])("option",{value:"blink"},"Blink",-1),Ee={class:"animation"},Fe={key:0,class:"row"},He=Object(o["h"])("div",{class:"col-3"}," Hue range ",-1),Je={class:"col-9"},Xe={key:1,class:"row"},Ye=Object(o["h"])("div",{class:"col-3"}," Sat range ",-1),De={class:"col-9"},Ue={key:2,class:"row"},qe=Object(o["h"])("div",{class:"col-3"}," Bri range ",-1),Ke={class:"col-9"},Qe={key:3,class:"row"},We=Object(o["h"])("div",{class:"col-3"}," Hue step ",-1),Ze={class:"col-9"},et={key:4,class:"row"},tt=Object(o["h"])("div",{class:"col-3"}," Sat step ",-1),nt={class:"col-9"},ot={key:5,class:"row"},rt=Object(o["h"])("div",{class:"col-3"}," Bri step ",-1),it={class:"col-9"},ct={class:"row"},at=Object(o["h"])("div",{class:"col-3"}," Refresh seconds ",-1),lt={class:"col-9"},st={class:"row"},ut=Object(o["h"])("div",{class:"col-3"}," Duration (seconds) ",-1),bt={class:"col-9"},dt={class:"lights"},gt={class:"row"},ht=Object(o["g"])(" Select all lights ");Object(o["s"])();var pt=Ie((function(e,t,n,r,i,c){var a=Object(o["z"])("Loading"),l=Object(o["z"])("ToggleSwitch"),s=Object(o["z"])("RangeSlider"),u=Object(o["z"])("Slider");return Object(o["r"])(),Object(o["e"])("div",{class:"controls animation-controls",onClick:t[11]||(t[11]=function(e){return e.stopPropagation()})},[n.loading?(Object(o["r"])(),Object(o["e"])(a,{key:0})):Object(o["f"])("",!0),Object(o["h"])("div",xe,[Object(o["h"])("div",Te,[Object(o["h"])("div",Me,[Ae,Object(o["h"])("div",ze,[Object(o["h"])(l,{value:c.animationRunning,onInput:c.toggleAnimation},null,8,["value","onInput"])])]),Object(o["h"])("div",Be,[Pe,Object(o["h"])("div",Re,[Object(o["h"])("label",null,[Object(o["h"])("select",{class:"selector",onClick:t[1]||(t[1]=function(e){return i.selectedAnimation=e.target.value})},[Ne,Ve])])])])]),Object(o["h"])("div",Ee,["color_transition"===i.selectedAnimation?(Object(o["r"])(),Object(o["e"])("div",Fe,[He,Object(o["h"])("div",Je,[Object(o["h"])(s,{range:n.colorConverter.ranges.hue,disabled:n.loading,value:i.animations.color_transition.hue_range,onMouseup:t[2]||(t[2]=function(e){return i.animations.color_transition.hue_range=e.target.value})},null,8,["range","disabled","value"])])])):Object(o["f"])("",!0),"color_transition"===i.selectedAnimation?(Object(o["r"])(),Object(o["e"])("div",Xe,[Ye,Object(o["h"])("div",De,[Object(o["h"])(s,{range:n.colorConverter.ranges.sat,disabled:n.loading,value:i.animations.color_transition.sat_range,onMouseup:t[3]||(t[3]=function(e){return i.animations.color_transition.sat_range=e.target.value})},null,8,["range","disabled","value"])])])):Object(o["f"])("",!0),"color_transition"===i.selectedAnimation?(Object(o["r"])(),Object(o["e"])("div",Ue,[qe,Object(o["h"])("div",Ke,[Object(o["h"])(s,{range:n.colorConverter.ranges.sat,disabled:n.loading,value:i.animations.color_transition.bri_range,onMouseup:t[4]||(t[4]=function(e){return i.animations.color_transition.bri_range=e.target.value})},null,8,["range","disabled","value"])])])):Object(o["f"])("",!0),"color_transition"===i.selectedAnimation?(Object(o["r"])(),Object(o["e"])("div",Qe,[We,Object(o["h"])("div",Ze,[Object(o["h"])(u,{range:n.colorConverter.ranges.hue,disabled:n.loading,value:i.animations.color_transition.hue_step,onMouseup:t[5]||(t[5]=function(e){return i.animations.color_transition.hue_step=parseFloat(e.target.value)})},null,8,["range","disabled","value"])])])):Object(o["f"])("",!0),"color_transition"===i.selectedAnimation?(Object(o["r"])(),Object(o["e"])("div",et,[tt,Object(o["h"])("div",nt,[Object(o["h"])(u,{range:n.colorConverter.ranges.sat,disabled:n.loading,value:i.animations.color_transition.sat_step,onMouseup:t[6]||(t[6]=function(e){return i.animations.color_transition.sat_step=parseFloat(e.target.value)})},null,8,["range","disabled","value"])])])):Object(o["f"])("",!0),"color_transition"===i.selectedAnimation?(Object(o["r"])(),Object(o["e"])("div",ot,[rt,Object(o["h"])("div",it,[Object(o["h"])(u,{range:n.colorConverter.ranges.bri,disabled:n.loading,value:i.animations.color_transition.bri_step,onMouseup:t[7]||(t[7]=function(e){return i.animations.color_transition.bri_step=parseFloat(e.target.value)})},null,8,["range","disabled","value"])])])):Object(o["f"])("",!0),Object(o["h"])("div",ct,[at,Object(o["h"])("div",lt,[Object(o["h"])("label",null,[Object(o["h"])("input",{type:"number",value:i.animations[i.selectedAnimation].transition_seconds,step:"0.1",onInput:t[8]||(t[8]=function(e){return i.animations[i.selectedAnimation].transition_seconds=parseFloat(e.target.value)})},null,40,["value"])])])]),Object(o["h"])("div",st,[ut,Object(o["h"])("div",bt,[Object(o["h"])("label",null,[Object(o["h"])("input",{type:"number",value:i.animations[i.selectedAnimation].duration,step:"5",onInput:t[9]||(t[9]=function(e){var t;return i.animations[i.selectedAnimation].duration=(null===(t=e.target.value)||void 0===t?void 0:t.length)?parseFloat(e.target.value):null})},null,40,["value"])])])])])]),Object(o["h"])("div",dt,[Object(o["h"])("div",gt,[Object(o["h"])("label",null,[Object(o["h"])("input",{type:"checkbox",checked:Object.keys(n.lights).length===Object.values(i.selectedLights).filter((function(e){return e})).length,onClick:t[10]||(t[10]=function(){return c.toggleSelectAll.apply(c,arguments)})},null,8,["checked"]),ht])]),(Object(o["r"])(!0),Object(o["e"])(o["a"],null,Object(o["x"])(n.lights,(function(e,t){return Object(o["r"])(),Object(o["e"])("div",{class:"row",key:t},[Object(o["h"])("label",null,[Object(o["H"])(Object(o["h"])("input",{type:"checkbox","onUpdate:modelValue":function(e){return i.selectedLights[t]=e},onInput:function(e){return i.selectedLights[t]=!i.selectedLights[t]}},null,40,["onUpdate:modelValue","onInput"]),[[o["E"],i.selectedLights[t]]]),Object(o["g"])(" "+Object(o["C"])(e.name),1)])])})),128))])])})),ft=Object(o["J"])("data-v-e79165da");Object(o["u"])("data-v-e79165da");var Ot={class:"range-slider"};Object(o["s"])();var jt=ft((function(e,t,n,r,i,c){return Object(o["r"])(),Object(o["e"])("div",Ot,[Object(o["h"])("label",null,[(Object(o["r"])(!0),Object(o["e"])(o["a"],null,Object(o["x"])(n.value,(function(e,r){return Object(o["r"])(),Object(o["e"])("input",{class:"slider",type:"range",value:e,min:n.range[0],max:n.range[1],disabled:n.disabled,onInput:t[1]||(t[1]=function(){return c.input.apply(c,arguments)}),onChange:t[2]||(t[2]=function(){return c.changed.apply(c,arguments)}),onMouseup:t[3]||(t[3]=function(){return c.mouseup.apply(c,arguments)}),onMousedown:t[4]||(t[4]=function(){return c.mousedown.apply(c,arguments)}),onTouchstart:t[5]||(t[5]=function(){return c.mouseup.apply(c,arguments)}),onTouchend:t[6]||(t[6]=function(){return c.mousedown.apply(c,arguments)}),ref:"input_".concat(r),key:r},null,40,["value","min","max","disabled"])})),128))])])})),vt={name:"RangeSlider",emits:["input","change","mouseup","mousedown"],props:{disabled:{type:Boolean,default:!1},range:{type:Array,default:function(){return[0,100]}},value:{type:Array,default:function(){return[0,100]}}},methods:{getEvent:function(e){return Object(s["a"])(Object(s["a"])({},e),{},{target:Object(s["a"])(Object(s["a"])({},e.target),{},{value:Object.values(this.$refs).map((function(e){return parseFloat(e.value)})).sort()})})},input:function(e){this.$emit("input",this.getEvent(e))},changed:function(e){this.$emit("change",this.getEvent(e))},mouseup:function(e){this.$emit("mouseup",this.getEvent(e))},mousedown:function(e){this.$emit("mousedown",this.getEvent(e))}},mounted:function(){if(this.value){var e=this;this.value.forEach((function(t,n){e.$refs["input_".concat(n)].value=t}))}}};n("6851");vt.render=jt,vt.__scopeId="data-v-e79165da";var mt=vt,yt={name:"Animate",mixins:[b["a"]],components:{ToggleSwitch:T,Slider:ye,RangeSlider:mt,Loading:we["a"]},emits:["start","stop"],props:{lights:{type:Object},group:{type:Object},loading:{type:Boolean,default:!1},colorConverter:{type:Object,default:function(){return new M["a"]}},runningAnimations:{type:Object,default:function(){}}},data:function(){return{selectedAnimation:"color_transition",animation:{},selectedLights:Object.keys(this.lights).reduce((function(e,t){return e[t]=!0,e}),{}),animations:{color_transition:{hue_range:this.colorConverter.ranges.hue,sat_range:[parseInt((this.colorConverter.ranges.sat[1]-this.colorConverter.ranges.sat[0])/2),this.colorConverter.ranges.sat[1]],bri_range:[parseInt(.75*(this.colorConverter.ranges.bri[1]-this.colorConverter.ranges.bri[0])),this.colorConverter.ranges.bri[1]],hue_step:parseInt((this.colorConverter.ranges.hue[1]-this.colorConverter.ranges.hue[0])/25),sat_step:parseInt((this.colorConverter.ranges.sat[1]-this.colorConverter.ranges.sat[0])/50),bri_step:parseInt((this.colorConverter.ranges.bri[1]-this.colorConverter.ranges.bri[0])/50),transition_seconds:1,duration:null},blink:{transition_seconds:1,duration:null}}}},computed:{animationRunning:function(){return Object.keys(this.runningAnimations).length>0}},methods:{toggleSelectAll:function(){var e=this,t=Object.values(this.selectedLights).filter((function(e){return e})).length<Object.keys(this.lights).length;Object.keys(this.lights).forEach((function(n){e.selectedLights[n]=t}))},toggleAnimation:function(){var e=this.animationRunning?"stop":"start",t=Object.entries(this.selectedLights).filter((function(e){return e[1]})).map((function(e){return e[0]}));t.length?this.$emit(e,{lights:t,animation:Object(s["a"])(Object(s["a"])({},this.animations[this.selectedAnimation]),{},{animation:this.selectedAnimation})}):this.warn("No lights have been selected")}}};n("7e57");yt.render=pt,yt.__scopeId="data-v-1739aaba";var wt=yt,Ct={name:"Group",emits:["close","group-toggle","light-toggle","set-light","select-scene","start-animation","stop-animation"],components:{Animate:wt,ToggleSwitch:T,MenuPanel:_,Light:_e,Scene:Le,Controls:ke},props:{lights:{type:Object},group:{type:Object},scenes:{type:Object},animations:{type:Object,default:function(){}},colorConverter:{type:Object,default:function(){return new M["a"]}}},data:function(){return{selectedLight:null,selectedScene:null,selectedView:"lights"}},computed:{lightsSorted:function(){return this.lights?Object.entries(this.lights).sort((function(e,t){return e[1].name.localeCompare(t[1].name)})).map((function(e){var t=Object(u["a"])(e,2),n=t[0],o=t[1];return Object(s["a"])(Object(s["a"])({},o),{},{id:n})})):[]},scenesSorted:function(){return this.scenes?Object.entries(this.scenes).sort((function(e,t){return e[1].name.localeCompare(t[1].name)})).map((function(e){var t=Object(u["a"])(e,2),n=t[0],o=t[1];return Object(s["a"])(Object(s["a"])({},o),{},{id:n})})):[]},groupName:function(){var e,t;return(null===(e=this.group)||void 0===e?void 0:e.name)?this.group.name:null!=(null===(t=this.group)||void 0===t?void 0:t.id)?"[Group ".concat(this.group.id,"]"):"Lights"}},methods:{close:function(e){e.stopPropagation(),this.$emit("close")},onSceneSelected:function(e){this.selectedScene=e,this.$emit("select-scene",e)}}};n("fe49"),n("d4ec");Ct.render=ee;var kt=Ct,St={name:"Light",components:{Group:kt,Groups:z},mixins:[b["a"],g],emits:["group-toggle","light-toggle","set-light","set-group","select-scene","start-animation","stop-animation"],props:{lights:{type:Object},groups:{type:Object},scenes:{type:Object},animations:{type:Object},colorConverter:{type:Object,default:function(){return new M["a"]}},loadingLights:{type:Object,default:function(){}},loadingGroups:{type:Object,default:function(){}},pluginName:{type:String},initialGroup:{type:[Number,String]}},data:function(){return{selectedGroup:null,initialized:!1}},computed:{displayedLights:function(){var e=this,t=this.selectedGroup||this.initialGroup;return null==t?this.lights:this.groups[t].lights.reduce((function(t,n){return t[n]=e.lights[n],t}),{})},groupsByLight:function(){return this.groups?Object.entries(this.groups).reduce((function(e,t){var n=Object(u["a"])(t,2),o=n[0],r=n[1];return r.lights.forEach((function(t){e[t]||(e[t]={}),e[t][o]=r})),e}),{}):{}},scenesByGroup:function(){if(!this.scenes)return{};var e=this;return Object.entries(this.scenes).reduce((function(t,n){var o=Object(u["a"])(n,2),r=o[0],i=o[1];return i.lights.forEach((function(n){Object.keys(e.groupsByLight[n]).forEach((function(e){t[e]||(t[e]={}),t[e][r]=i}))})),t}),{})},animationsByGroup:function(){var e,t,n=this,o=Object.entries((null===(e=this.animations)||void 0===e?void 0:e.groups)||{}).reduce((function(e,t){var n=Object(u["a"])(t,2),o=n[0],r=n[1];return e[o]={},r&&(e[o][null]=r),e}),{});return Object(s["a"])(Object(s["a"])({},o),Object.entries((null===(t=this.animations)||void 0===t?void 0:t.lights)||{}).reduce((function(e,t){var o,r=Object(u["a"])(t,2),i=r[0],c=r[1],a=null===(o=Object.values(n.groupsByLight[i]))||void 0===o?void 0:o[0];return a&&c&&null!=a.id&&(e[a.id]||(e[a.id]={}),e[a.id][i]=c),e}),{}))}},methods:{initSelectedGroup:function(){var e=this,t=this.$watch((function(){return e.initialGroup}),(function(n){e.initialized||(e.initialized=!0,t(),null==e.selectedGroup&&null!=n&&(e.selectedGroup=e.initialGroup))}))},closeGroup:function(){this.selectedGroup=null}},mounted:function(){this.initSelectedGroup()}};n("487a"),n("98402");St.render=l,St.__scopeId="data-v-040404d2";t["default"]=St},d28c:function(e,t,n){},d4ec:function(e,t,n){"use strict";n("1ed6")},dbb4:function(e,t,n){var o=n("23e7"),r=n("83ab"),i=n("56ef"),c=n("fc6a"),a=n("06cf"),l=n("8418");o({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){var t,n,o=c(e),r=a.f,s=i(o),u={},b=0;while(s.length>b)n=r(o,t=s[b++]),void 0!==n&&l(u,t,n);return u}})},e239:function(e,t,n){"use strict";n("fb61")},e3f0:function(e,t,n){},e439:function(e,t,n){var o=n("23e7"),r=n("d039"),i=n("fc6a"),c=n("06cf").f,a=n("83ab"),l=r((function(){c(1)})),s=!a||l;o({target:"Object",stat:!0,forced:s,sham:!a},{getOwnPropertyDescriptor:function(e,t){return c(i(e),t)}})},fb61:function(e,t,n){},fda1:function(e,t,n){},fe49:function(e,t,n){"use strict";n("520c")}}]);
//# sourceMappingURL=chunk-014e8b04.7f400c2d.js.map